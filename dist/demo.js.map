{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/tiled_scrolling_demo/TiledScrollingDemo.ts","src/wolfie2d/AI/AIBehavior.ts","src/wolfie2d/AI/PaceRunAI.ts","src/wolfie2d/AI/PlayerAI.ts","src/wolfie2d/AI/RandomWalkAI.ts","src/wolfie2d/Game.ts","src/wolfie2d/files/ResourceManager.ts","src/wolfie2d/loop/GameLoopTemplate.ts","src/wolfie2d/math/MathUtilities.ts","src/wolfie2d/math/Matrix.ts","src/wolfie2d/math/Vector3.ts","src/wolfie2d/math/boundingCircle.ts","src/wolfie2d/physics/GamePhysics.ts","src/wolfie2d/rendering/TextRenderer.ts","src/wolfie2d/rendering/WebGLGameRenderingComponent.ts","src/wolfie2d/rendering/WebGLGameRenderingSystem.ts","src/wolfie2d/rendering/WebGLGameShader.ts","src/wolfie2d/rendering/WebGLGameSpriteRenderer.ts","src/wolfie2d/rendering/WebGLGameTexture.ts","src/wolfie2d/rendering/WebGLGameTiledLayerRenderer.ts","src/wolfie2d/scene/SceneGraph.ts","src/wolfie2d/scene/SceneObject.ts","src/wolfie2d/scene/Viewport.ts","src/wolfie2d/scene/sprite/AnimatedSprite.ts","src/wolfie2d/scene/sprite/AnimatedSpriteType.ts","src/wolfie2d/scene/tiles/TileSet.ts","src/wolfie2d/scene/tiles/TiledLayer.ts","src/wolfie2d/ui/UIController.ts"],"names":[],"mappings":"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","file":"demo.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","/*\n * TiledScrollingDemo.ts - demonstrates how tiled layers can be rendered\n * and scrolled using a viewport. \n */\nimport { Game } from '../wolfie2d/Game'\nimport { AnimatedSprite } from '../wolfie2d/scene/sprite/AnimatedSprite'\nimport { AnimatedSpriteType } from '../wolfie2d/scene/sprite/AnimatedSpriteType'\nimport { TiledLayer } from '../wolfie2d/scene/tiles/TiledLayer'\nimport { SceneGraph } from '../wolfie2d/scene/SceneGraph'\nimport { Viewport } from '../wolfie2d/scene/Viewport'\nimport { TextToRender, TextRenderer } from '../wolfie2d/rendering/TextRenderer'\nimport { AIBehavior } from '../wolfie2d/AI/AIBehavior'\nimport { RandomWalkAI } from '../wolfie2d/AI/RandomWalkAI'\nimport { PaceRunAI } from '../wolfie2d/AI/PaceRunAI'\nimport { PlayerAI } from '../wolfie2d/AI/PlayerAI'\n\n// THIS IS THE ENTRY POINT INTO OUR APPLICATION, WE MAKE\n// THE Game OBJECT AND INITIALIZE IT WITH THE CANVASES\nlet game = new Game(\"game_canvas\", \"text_canvas\");\n\n// WE THEN LOAD OUR GAME SCENE, WHICH WILL FIRST LOAD\n// ALL GAME RESOURCES, THEN CREATE ALL SHADERS FOR\n// RENDERING, AND THEN PLACE ALL GAME OBJECTS IN THE SCENE.\n// ONCE IT IS COMPLETED WE CAN START THE GAME\nconst DESERT_SCENE_PATH = \"resources/scenes/ScrollableDesert.json\";\ngame.getResourceManager().loadScene(DESERT_SCENE_PATH,\n    game.getSceneGraph(),\n    game.getRenderingSystem(),\n    function () {\n\n\n\n        // ADD ANY CUSTOM STUFF WE NEED HERE, LIKE TEXT RENDERING\n        // LET'S ADD A BUNCH OF RANDOM SPRITES\n        let world: TiledLayer[] = game.getSceneGraph().getTiledLayers();\n        let worldWidth: number = world[0].getColumns() * world[0].getTileSet().getTileWidth();\n        let worldHeight: number = world[0].getRows() * world[0].getTileSet().getTileHeight();\n        // let randomX: number = Math.random() * worldWidth;\n        // let randomY: number = Math.random() * worldHeight;\n        for (let i = 0; i < 50; i++) {\n            let type: AnimatedSpriteType = game.getResourceManager().getAnimatedSpriteType(\"COCKROACH\");\n            let ai: AIBehavior = new RandomWalkAI(game.getSceneGraph());\n            let randomSprite: AnimatedSprite = new AnimatedSprite(type, \"IDLE\");\n            randomSprite.setAI(ai);\n            let randomX: number = Math.random() * worldWidth;\n            let randomY: number = Math.random() * worldHeight;\n            randomSprite.getPosition().set(randomX, randomY, 0, 1);\n            randomSprite.setDirection(90 * Math.floor(Math.random() * 4));\n            game.getSceneGraph().addAnimatedSprite(randomSprite);\n        }\n        for (let i = 0; i < 50; i++) {\n            let type: AnimatedSpriteType = game.getResourceManager().getAnimatedSpriteType(\"CAMEL_SPIDER\");\n            let ai: AIBehavior = new PaceRunAI(game.getSceneGraph()); // make other AI and change class\n            let randomSprite: AnimatedSprite = new AnimatedSprite(type, \"IDLE\");\n            console.log(randomSprite.getSpriteType().getSpriteSheetTexture().webGLTextureId);\n            randomSprite.setAI(ai);\n            let randomX: number = Math.random() * worldWidth;\n            let randomY: number = Math.random() * worldHeight;\n            randomSprite.getPosition().set(randomX, randomY, 0, 1);\n            randomSprite.setDirection(90 * Math.floor(Math.random() * 4));\n            game.getSceneGraph().addAnimatedSprite(randomSprite);\n        }\n\n\n        let type: AnimatedSpriteType = game.getResourceManager().getAnimatedSpriteType(\"FUNNEL_WEB_SPIDER\");\n        let ai: AIBehavior = new PlayerAI(game.getSceneGraph());\n        let player: AnimatedSprite = new AnimatedSprite(type, \"IDLE\");\n        player.setAI(ai);\n        player.setIgnoreViewport();\n        player.getPosition().set(worldWidth / 5, worldHeight / 8, 0, 1);\n        player.setDirection(90 * Math.floor(Math.random() * 4));\n        game.getSceneGraph().addAnimatedSprite(player);\n        game.getSceneGraph().setPlayer(player)\n        // console.log(randomSprite.getSpriteType().getSpriteSheetTexture().webGLTextureId);\n\n\n\n        // NOW ADD TEXT RENDERING. WE ARE GOING TO RENDER 3 THINGS:\n        // NUMBER OF SPRITES IN THE SCENE\n        // LOCATION IN GAME WORLD OF VIEWPORT\n        // NUMBER OF SPRITES IN VISIBLE SET (i.e. IN THE VIEWPORT)\n        let sceneGraph: SceneGraph;\n        sceneGraph = game.getSceneGraph();\n        let spritesInSceneText: TextToRender = new TextToRender(\"Sprites in Scene\", \"\", 20, 50, function () {\n            spritesInSceneText.text = \"Sprites in Scene: \" + sceneGraph.getNumSprites();\n        });\n        let viewportText: TextToRender = new TextToRender(\"Viewport\", \"\", 20, 70, function () {\n            let viewport: Viewport = sceneGraph.getViewport();\n            viewportText.text = \"Viewport (w, h, x, y): (\" + viewport.getWidth() + \", \"\n                + viewport.getHeight() + \", \"\n                + viewport.getX() + \", \"\n                + viewport.getY() + \")\";\n        });\n        let spritesInViewportText: TextToRender = new TextToRender(\"Sprites in Viewport\", \"\", 20, 90, function () {\n            spritesInViewportText.text = \"Sprites in Viewport: \" + sceneGraph.scope().length;\n        });\n        let worldDimensionsText: TextToRender = new TextToRender(\"World Dimensions\", \"\", 20, 110, function () {\n            worldDimensionsText.text = \"World Dimensions (w, h): (\" + worldWidth + \", \" + worldHeight + \")\";\n        });\n        let spritesAlive: TextToRender = new TextToRender(\"Sprites Alive\", \"\", 20, 130, function () {\n            spritesAlive.text = \"Sprites Alive: \" + (sceneGraph.numAlive() - 51);\n        });\n\n        let won: TextToRender = new TextToRender(\"Won\", \"\", 100, sceneGraph.getViewport().getHeight() / 2, function () {\n            won.text = ((sceneGraph.numAlive() - 51) == 0) ? \"Congratulations!!!!! You Won!!!!!\" : \"\";\n            won.fontSize = 72;\n        });\n\n        let textRenderer = game.getRenderingSystem().getTextRenderer();\n        textRenderer.addTextToRender(spritesInSceneText);\n        textRenderer.addTextToRender(viewportText);\n        textRenderer.addTextToRender(spritesInViewportText);\n        textRenderer.addTextToRender(worldDimensionsText);\n        textRenderer.addTextToRender(spritesAlive);\n        textRenderer.addTextToRender(won);\n\n        // AND START THE GAME LOOP\n        game.start();\n    });","import { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\nimport { SceneGraph } from \"../scene/SceneGraph\";\n\nexport enum State {\n    WALK = \"WALK\",\n    RUN = \"RUN\",\n    TURN_NORTH = \"TURN_NORTH\",\n    TURN_SOUTH = \"TURN_SOUTH\",\n    TURN_EAST = \"TURN_EAST\",\n    TURN_WEST = \"TURN_WEST\",\n    TURN_RAND = \"TURN_RAND\",\n    TURN_AROUND = \"TURN_AROUND\",\n    NONE = \"NONE\",\n}\n\nexport abstract class AIBehavior {\n\n    protected stateIndex: number;\n    protected pattern: State[];\n    protected scene: SceneGraph;\n\n\n    constructor(scene: SceneGraph) {\n        this.stateIndex = 0;\n        this.pattern = [];\n        this.scene = scene;\n    }\n\n    public setBehavior(pattern: State[]): void {\n        this.pattern = pattern;\n        this.stateIndex = 0;\n    }\n\n    public update(): State {\n        // console.group(\"AIBehavior.update()\")\n        // console.log(\"inital stateIndex\", this.stateIndex);\n        let state = this.pattern[this.stateIndex];\n        // console.log(\"state\", state);\n        this.stateIndex++;\n        // console.log(\"incremented stateIndex\", this.stateIndex)\n        if (this.stateIndex >= this.pattern.length) {\n            // console.log(\"no more states\");\n            this.stateIndex = 0;\n            // console.log(\"resetting stateIndex\", this.stateIndex)\n        }\n        // console.groupEnd();\n        return state;\n    }\n\n    abstract resolveState(sprite: AnimatedSprite): void;\n\n    abstract generatePattern(): State[];\n}\n\n","import { AIBehavior, State } from \"./AIBehavior\";\nimport { SceneGraph } from \"../scene/SceneGraph\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\n\n\n\n\nexport class PaceRunAI extends AIBehavior {\n\n    private pacingBehavior: State[] = [State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.WALK, State.TURN_AROUND];\n\n    constructor(scene: SceneGraph) {\n        super(scene);\n        this.setBehavior(this.pacingBehavior);\n    }\n\n\n    public generatePattern(): State[] {\n        let pattern: State[] = [State.NONE];\n        return pattern;\n    }\n\n    public resolveState(sprite: AnimatedSprite): void {\n        let state = this.pattern[this.stateIndex];\n\n        let player: AnimatedSprite;\n        let playerInRange: boolean = false;\n        let nearSprites: AnimatedSprite[] = this.scene.spritesInRange(sprite.getPosition().getX() - 50, sprite.getPosition().getY() + 50, 100 + sprite.getSpriteType().getSpriteWidth());\n        for (let tempSprite of nearSprites) {\n            // console.log(tempSprite.getSpriteType().getSpriteSheetTexture().webGLTextureId);\n            if (tempSprite == this.scene.getPlayer()) {\n                player = tempSprite;\n                playerInRange = true;\n            }\n        }\n\n        // console.log(playerInRange);\n\n        if (playerInRange == true) {\n            sprite.setDirection(player.getDirection());\n            this.setBehavior([State.RUN, State.RUN, State.RUN, State.RUN, State.NONE]);\n            state = this.pattern[this.stateIndex];\n        }\n\n        let worldWidth: number = this.scene.getTiledLayers()[0].getColumns() * this.scene.getTiledLayers()[0].getTileSet().getTileWidth();\n        let worldHeight: number = this.scene.getTiledLayers()[0].getRows() * this.scene.getTiledLayers()[0].getTileSet().getTileHeight();\n\n\n        if (state == State.WALK) {\n            if (sprite.getState() != \"WALKING\") {\n                sprite.setState(\"WALKING\");\n            }\n\n\n            // let newY: number = 0;\n            // let newX: number = 0;\n            // let xStop: boolean = false;\n            // let yStop: boolean = false;\n\n            // switch (sprite.getDirection()) {\n            //     case 0:\n            //         newY = (sprite.getPosition().getY() - 1);\n            //         break;\n            //     case 90:\n            //         newX = (sprite.getPosition().getX() - 1);\n            //         break;\n            //     case 180:\n            //         newY = (sprite.getPosition().getY() + 1);\n            //         break;\n            //     case 270:\n            //         newX = (sprite.getPosition().getX() + 1);\n            //         break;\n            //     default:\n            //         // console.error(\"illegal sprite direction\", sprite.getDirection());\n            //         break;\n            // }\n\n            // if (!(newX <= 0 || newX >= worldWidth)) {\n            //     sprite.getPosition().setX(newX);\n            // }\n            // if (!(newY <= 0 || newY >= worldHeight)) {\n            //     sprite.getPosition().setY(newY);\n            // }\n\n            if (sprite.getPosition().getX() <= 0) {\n                sprite.getPosition().setX(sprite.getPosition().getX() + 10)\n            }\n            if (sprite.getPosition().getX() >= worldWidth) {\n                sprite.getPosition().setX(sprite.getPosition().getX() - 10)\n            }\n            if (sprite.getPosition().getY() <= 0) {\n                sprite.getPosition().setY(sprite.getPosition().getY() + 10)\n            }\n            if (sprite.getPosition().getY() >= worldHeight) {\n                sprite.getPosition().setY(sprite.getPosition().getY() - 10)\n            }\n\n            switch (sprite.getDirection()) {\n                case 0:\n                    sprite.getPosition().setY(sprite.getPosition().getY() - 1);\n                    break;\n                case 90:\n                    sprite.getPosition().setX(sprite.getPosition().getX() - 1);\n                    break;\n                case 180:\n                    sprite.getPosition().setY(sprite.getPosition().getY() + 1);\n                    break;\n                case 270:\n                    sprite.getPosition().setX(sprite.getPosition().getX() + 1);\n                    break;\n                default:\n                    // console.error(\"illegal sprite direction\", sprite.getDirection());\n                    break;\n            }\n        } else if (state == State.TURN_AROUND) {\n            sprite.setDirection(sprite.getDirection() + 180);\n        } else if (state == State.RUN) {\n            switch (sprite.getDirection()) {\n                case 0:\n                    sprite.getPosition().setY(sprite.getPosition().getY() - 2);\n                    break;\n                case 90:\n                    sprite.getPosition().setX(sprite.getPosition().getX() - 2);\n                    break;\n                case 180:\n                    sprite.getPosition().setY(sprite.getPosition().getY() + 2);\n                    break;\n                case 270:\n                    sprite.getPosition().setX(sprite.getPosition().getX() + 2);\n                    break;\n                default:\n                    // console.error(\"illegal sprite direction\", sprite.getDirection());\n                    break;\n            }\n        } else if (state = State.NONE) {\n            if (playerInRange == false) {\n                sprite.setDirection(sprite.getDirection() + 90);\n                this.setBehavior(this.pacingBehavior);\n            }\n        }\n    }\n}","import { AIBehavior, State } from \"./AIBehavior\";\nimport { SceneGraph } from \"../scene/SceneGraph\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\n\n\n\n\nexport class PlayerAI extends AIBehavior {\n\n    // private flip: boolean = false;\n\n    constructor(scene: SceneGraph) {\n        super(scene);\n        this.setBehavior([State.WALK]);\n    }\n\n\n    public generatePattern(): State[] {\n        let pattern: State[] = [State.NONE];\n        return pattern;\n    }\n\n    public resolveState(sprite: AnimatedSprite): void {\n        let state = this.pattern[this.stateIndex];\n\n        let targetX: number = this.scene.getMouse()[0] - (sprite.getSpriteType().getSpriteWidth() / 2);\n        let targetY: number = this.scene.getMouse()[1] - (sprite.getSpriteType().getSpriteHeight() / 2);\n\n        let deltaX: number = targetX - sprite.getPosition().getX();\n        let deltaY: number = targetY - sprite.getPosition().getY();\n\n        let worldWidth: number = this.scene.getTiledLayers()[0].getColumns() * this.scene.getTiledLayers()[0].getTileSet().getTileWidth();\n        let worldHeight: number = this.scene.getTiledLayers()[0].getRows() * this.scene.getTiledLayers()[0].getTileSet().getTileHeight();\n\n        if (Math.abs(deltaX) <= 6 && Math.abs(deltaY) <= 6) {\n            state = State.NONE;\n        }\n\n        if (state == State.WALK) {\n            if (sprite.getState() != \"WALKING\") {\n                sprite.setState(\"WALKING\");\n            }\n            if (sprite.getPosition().getX() <= 0) {\n                sprite.getPosition().setX(sprite.getPosition().getX() + 10)\n            }\n            if (sprite.getPosition().getX() >= worldWidth) {\n                sprite.getPosition().setX(sprite.getPosition().getX() - 10)\n            }\n            if (sprite.getPosition().getY() <= 0) {\n                sprite.getPosition().setY(sprite.getPosition().getY() + 10)\n            }\n            if (sprite.getPosition().getY() >= worldHeight) {\n                sprite.getPosition().setY(sprite.getPosition().getY() - 10)\n            }\n\n            let delta1: number = deltaX;\n            let delta2: number = deltaY;\n\n            if (delta1 > 6) {\n                sprite.setDirection(270);\n                sprite.getPosition().setX(sprite.getPosition().getX() + 3);\n            } else if (delta1 < -6) {\n                sprite.setDirection(90);\n                sprite.getPosition().setX(sprite.getPosition().getX() - 3);\n            } else if (delta2 > 6) {\n                sprite.setDirection(180);\n                sprite.getPosition().setY(sprite.getPosition().getY() + 3);\n            } else if (delta2 < -6) {\n                sprite.setDirection(0);\n                sprite.getPosition().setY(sprite.getPosition().getY() - 3);\n            }\n\n\n\n        } else if (state == State.NONE) {\n            this.setBehavior([State.NONE]);\n            if (sprite.getState() != \"IDLE\") {\n                sprite.setState(\"IDLE\");\n            }\n            // this.flip = (Math.floor(Math.random() * 3) == 1);\n        }\n    }\n}","import { AIBehavior } from \"./AIBehavior\";\nimport { SceneGraph } from \"../scene/SceneGraph\";\nimport { State } from \"./AIBehavior\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\n\n\n\nexport class RandomWalkAI extends AIBehavior {\n\n    constructor(scene: SceneGraph) {\n        super(scene);\n        this.setBehavior(this.generatePattern());\n    }\n\n\n    public generatePattern(): State[] {\n        let pattern: State[] = [];\n        for (let x = 0; x < 25 + Math.floor(Math.random() * 175); x++) {\n            pattern.push(State.WALK);\n        }\n        pattern.push(State.TURN_RAND);\n        return pattern;\n    }\n\n    public resolveState(sprite: AnimatedSprite): void {\n        let state = this.pattern[this.stateIndex];\n\n        let worldWidth: number = this.scene.getTiledLayers()[0].getColumns() * this.scene.getTiledLayers()[0].getTileSet().getTileWidth();\n        let worldHeight: number = this.scene.getTiledLayers()[0].getRows() * this.scene.getTiledLayers()[0].getTileSet().getTileHeight();\n\n\n        if (state == State.WALK) {\n            if (sprite.getState() != \"WALKING\") {\n                sprite.setState(\"WALKING\");\n            }\n            if (sprite.getPosition().getX() <= 0) {\n                sprite.getPosition().setX(sprite.getPosition().getX() + 10)\n            }\n            if (sprite.getPosition().getX() >= worldWidth) {\n                sprite.getPosition().setX(sprite.getPosition().getX() - 10)\n            }\n            if (sprite.getPosition().getY() <= 0) {\n                sprite.getPosition().setY(sprite.getPosition().getY() + 10)\n            }\n            if (sprite.getPosition().getY() >= worldHeight) {\n                sprite.getPosition().setY(sprite.getPosition().getY() - 10)\n            }\n\n            switch (sprite.getDirection()) {\n                case 0:\n                    sprite.getPosition().setY(sprite.getPosition().getY() - 1);\n                    break;\n                case 90:\n                    sprite.getPosition().setX(sprite.getPosition().getX() - 1);\n                    break;\n                case 180:\n                    sprite.getPosition().setY(sprite.getPosition().getY() + 1);\n                    break;\n                case 270:\n                    sprite.getPosition().setX(sprite.getPosition().getX() + 1);\n                    break;\n                default:\n                    // console.error(\"illegal sprite direction\", sprite.getDirection());\n                    break;\n            }\n        } else if (state == State.TURN_RAND) {\n            let tempRandNum = Math.floor(Math.random() * 2);\n            if (tempRandNum == 0) {\n                sprite.setDirection(sprite.getDirection() + 90);\n            } else {\n                sprite.setDirection(sprite.getDirection() + 270);\n            }\n        }\n    }\n\n\n}","/*\n * Game is the focal point of the application, it has 4 subsystems,\n * the resource manager, the scene graph, the rendering system, and\n * the UI controller. In addition it serves as the game loop, providing\n * both an update and draw function that is called on a schedule.\n */\nimport { GameLoopTemplate } from './loop/GameLoopTemplate'\nimport { WebGLGameRenderingSystem } from './rendering/WebGLGameRenderingSystem'\nimport { SceneGraph } from './scene/SceneGraph'\nimport { AnimatedSprite } from './scene/sprite/AnimatedSprite'\nimport { TiledLayer } from './scene/tiles/TiledLayer'\nimport { ResourceManager } from './files/ResourceManager'\nimport { UIController } from './ui/UIController'\nimport { Viewport } from './scene/Viewport'\n\nexport class Game extends GameLoopTemplate {\n    private resourceManager: ResourceManager;\n    private sceneGraph: SceneGraph;\n    private renderingSystem: WebGLGameRenderingSystem;\n    private uiController: UIController;\n\n    public constructor(gameCanvasId: string, textCanvasId: string) {\n        super();\n        this.resourceManager = new ResourceManager();\n        this.sceneGraph = new SceneGraph();\n        this.renderingSystem = new WebGLGameRenderingSystem(gameCanvasId, textCanvasId);\n        this.uiController = new UIController(gameCanvasId, this.sceneGraph);\n\n        // MAKE SURE THE SCENE GRAPH' S VIEWPORT IS PROPERLY SETUP\n        let viewportWidth: number = (<HTMLCanvasElement>document.getElementById(gameCanvasId)).width;\n        let viewportHeight: number = (<HTMLCanvasElement>document.getElementById(gameCanvasId)).height;\n        let viewport: Viewport = new Viewport(viewportWidth, viewportHeight);\n        this.sceneGraph.setViewport(viewport);\n    }\n\n    public getRenderingSystem(): WebGLGameRenderingSystem {\n        return this.renderingSystem;\n    }\n\n    public getResourceManager(): ResourceManager {\n        return this.resourceManager;\n    }\n\n    public getSceneGraph(): SceneGraph {\n        return this.sceneGraph;\n    }\n\n    public begin(): void {\n    }\n\n    /*\n     * This draws the game. Note that we are not currently using the \n     * interpolation value, but could once physics is involved.\n     */\n    public draw(interpolationPercentage: number): void {\n        // GET THE TILED LAYERS TO RENDER FROM THE SCENE GRAPH\n        let visibleLayers: Array<TiledLayer>;\n        visibleLayers = this.sceneGraph.getTiledLayers();\n\n        // GET THE VISIBLE SET FROM THE SCENE GRAPH\n        let visibleSprites: Array<AnimatedSprite>;\n        visibleSprites = <Array<AnimatedSprite>>this.sceneGraph.scope();\n\n        let viewport: Viewport = this.sceneGraph.getViewport();\n\n        // RENDER THE VISIBLE SET, WHICH SHOULD ALL BE RENDERABLE\n        this.renderingSystem.render(viewport, visibleLayers, visibleSprites);\n    }\n\n    /**\n     * Updates the scene.\n     */\n    public update(delta: number): void {\n        this.sceneGraph.update(delta);\n    }\n\n    /**\n     * Updates the FPS counter.\n     */\n    public end(fps: number, panic: boolean): void {\n        if (panic) {\n            var discardedTime = Math.round(this.resetFrameDelta());\n            console.warn('Main loop panicked, probably because the browser tab was put in the background. Discarding ' + discardedTime + 'ms');\n        }\n    }\n}","/*\n * ResourceManager.js\n *\n * This class is responsible for managing all shared resources. This means things\n * that may be needed by multiple game objects. In this application this means\n * textures for the purpose of GPU rendering and animated sprite types.\n */\nimport { SpriteTypeData, AnimationStateData } from './SpriteTypeData'\nimport { MapData, TiledLayerData, TiledLayerProperty, TileSetData } from './MapData'\nimport { SceneData, NamedPath } from './SceneData'\nimport { WebGLGameRenderingSystem } from '../rendering/WebGLGameRenderingSystem'\nimport { WebGLGameTexture } from '../rendering/WebGLGameTexture'\nimport { AnimatedSpriteType } from '../scene/sprite/AnimatedSpriteType'\nimport { SceneGraph } from '../scene/SceneGraph'\nimport { TiledLayer } from '../scene/tiles/TiledLayer'\nimport { TileSet } from '../scene/tiles/TileSet'\n\nexport class ResourceManager {\n    // GAME SHADER PROGRAM SOURCE CODE WILL BE LOADED HERE. NOTE THAT\n    // WE HAVE ONE MAP FOR MAPPING THE SHADER NAME TO THE SOURCE CODE\n    // AND ANOTHER FOR MAPPING THE SHADER NAME TO THE FILE PATH\n    private gameShadersSource: Map<string, string> = new Map();\n    private gameShadersSourcePaths: Map<string, string> = new Map();\n    private numShadersToLoad: number;\n    private numShadersLoaded: number;\n\n    // SPRITE TYPES\n    private gameSpriteTypes: Map<string, AnimatedSpriteType> = new Map();\n    private gameSpriteTypePaths: Map<string, string> = new Map();\n    private numSpriteTypesToLoad: number;\n    private numSpriteTypesLoaded: number;\n\n    // TILE SETS\n    private gameTileSets: Map<string, TileSet> = new Map();\n    private gameTileSetPaths: Map<string, string> = new Map();\n    private numTileSetsToLoad: number;\n    private numTileSetsLoaded: number;\n\n    // GAME TEXTURES \n    private gameTextures: Map<string, WebGLGameTexture> = new Map();\n    private numTexturesToLoad: number;\n    private numTexturesLoaded: number;\n\n    public constructor() { }\n\n    // ACCESSOR METHODS\n\n    public getShaderSource(shaderName: string): string {\n        return this.gameShadersSource.get(shaderName);\n    }\n\n    public getAnimatedSpriteType(spriteTypeName: string): AnimatedSpriteType {\n        return this.gameSpriteTypes.get(spriteTypeName);\n    }\n\n    public getTileSet(tileSetName: string): TileSet {\n        return this.gameTileSets.get(tileSetName);\n    }\n\n    public getTexture(texturePath: string): WebGLGameTexture {\n        return this.gameTextures.get(texturePath);\n    }\n\n    public clear(): void {\n        // CLEAR THE SHADER SOURCE \n        this.gameShadersSource.clear();\n        this.gameShadersSourcePaths.clear();\n\n        // CLEAR THE SPRITE TYPES\n        this.gameSpriteTypes.clear();\n        this.gameSpriteTypePaths.clear();\n\n        // CLEAR THE TEXTURES\n        this.gameTextures.clear();\n\n        // WE REALLY SHOULD ADD FUNCTIONALITY TO REMOVE\n        // ALL THE RESOURCES FROM THE GPU ONE BY ONE\n        // BUT THAT'S SOMETHING FOR THE FUTURE\n    }\n\n    /**\n     * loadScene is responsible for loading all the external files needed for\n     * playing the game. These will be used for loading the scene, maps,\n     * animated sprites, textures, and shaders.\n     */\n    public loadScene(scenePath: string,\n        sceneGraph: SceneGraph,\n        renderingSystem: WebGLGameRenderingSystem,\n        callback: Function): void {\n        // CLEAR THE SCENE GRAPH TO GET RID OF ALL THE OLD STUFF\n        // THAT MAY HAVE BEEN LOADED FOR SOME OTHER LEVEL\n        sceneGraph.clear();\n\n        // CLEAR ALL THE SCENE RESOURCES \n        this.clear();\n\n        // WE HAVE OUR OWN CUSTOM JSON FILE FORMAT TO REPRESENT OUR SCENE\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(scenePath, function (jsonSceneText: string) {\n            let sceneData: SceneData = <SceneData>JSON.parse(jsonSceneText);\n            thisResourceManager.loadShadersSource(renderingSystem, sceneData.shaderSourcePaths, function () {\n                // NEXT LOAD THE MAP, WHICH WILL FORCE A LOADING OF\n                // ANY USED TILE SET TEXTURES AS WELL AS THE CREATION\n                // OF TILED LAYERS TO BE ADDED TO THE SCENE\n                thisResourceManager.loadMap(sceneData.mapPath, renderingSystem, sceneGraph, function () {\n                    // NOW THAT THE MAP HAS BEEN LOADED LOAD ALL THE SPRITE TYPES\n                    thisResourceManager.loadSpriteTypes(renderingSystem, sceneData.spriteTypePaths, function () {\n                        // NOW WE CAN INIT ALL SHADERS\n                        thisResourceManager.initAllShaders(renderingSystem, sceneGraph);\n\n                        callback();\n                    });\n                });\n            });\n        });\n    }\n\n    public initAllShaders(renderingSystem: WebGLGameRenderingSystem,\n        sceneGraph: SceneGraph): void {\n        // SETUP THE SPRITE RENDERER FOR USE WITH THE SPRITE SHADER THAT'S BEEN LOADED\n        let spriteRendererVertexShaderSource: string = this.getShaderSource(\"SPRITE_VERTEX_SHADER\");\n        let spriteRendererFragmentShaderSource: string = this.getShaderSource(\"SPRITE_FRAGMENT_SHADER\");\n        renderingSystem.getSpriteRenderer().init(renderingSystem.getWebGL(), spriteRendererVertexShaderSource, spriteRendererFragmentShaderSource, null);\n\n        // SETUP THE TILED LAYER RENDERER FOR USE WITH THE TILED SHADER THAT'S BEEN LOADED\n        let tiledLayerVertexShaderSource: string = this.getShaderSource(\"TILED_LAYER_VERTEX_SHADER\");\n        let tiledLayerFragmentShaderSource: string = this.getShaderSource(\"TILED_LAYER_FRAGMENT_SHADER\");\n        renderingSystem.getTiledLayerRenderer().init(renderingSystem.getWebGL(), tiledLayerVertexShaderSource, tiledLayerFragmentShaderSource, sceneGraph.getTiledLayers());\n    }\n\n    public loadShadersSource(renderingSystem: WebGLGameRenderingSystem,\n        namedPaths: Array<NamedPath>,\n        callback: Function): void {\n        // START BY LOADING ALL THE SHADER SOURCE FILES THESE CAN THEN BE\n        // RETRIEVED LATER BY THE RENDERERS WHEN ITS TIME TO BUILD THE \n        // SHADER PROGRAMS\n        let thisResourceManager: ResourceManager = this;\n        this.numShadersLoaded = 0;\n        this.numShadersToLoad = namedPaths.length;\n        for (let i: number = 0; i < namedPaths.length; i++) {\n            let namedPath: NamedPath = namedPaths[i];\n            let shaderName: string = namedPath.name;\n            let shaderPath: string = namedPath.path;\n            this.loadTextFile(shaderPath, function (shaderSourceCode: string) {\n                thisResourceManager.gameShadersSource.set(shaderName, shaderSourceCode);\n                thisResourceManager.gameShadersSourcePaths.set(shaderName, shaderPath);\n                thisResourceManager.completeLoadingShader(function () {\n                    // ALL SOURCE CODE IS LOADED SO DO WHAT'S NEXT\n                    callback();\n                });\n            });\n        }\n    }\n\n    public buildPathToFileInSameDirectory(baseFileWithPath: string, targetFileName: string): string {\n        let lastIndexOfSlash: number = baseFileWithPath.lastIndexOf('/');\n        let targetFilePath: string = \"./\";\n        if (lastIndexOfSlash > 0)\n            targetFilePath = baseFileWithPath.substring(0, lastIndexOfSlash);\n        targetFilePath += \"/\" + targetFileName;\n        return targetFilePath;\n    }\n\n    public loadMap(mapPath: string,\n        renderingSystem: WebGLGameRenderingSystem,\n        sceneGraph: SceneGraph,\n        callback: Function): void {\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(mapPath, function (jsonMapText: string) {\n            let mapData: MapData = <MapData>JSON.parse(jsonMapText);\n\n            // WE ONLY USE ONE TILE SET\n            let tilesetFileName: string = mapData.tilesets[0].image;\n            let tilesetFilePath = thisResourceManager.buildPathToFileInSameDirectory(mapPath, tilesetFileName);\n\n            // USE THE PATHS TOLOAD THE TILE SET TEXTURES\n            thisResourceManager.loadTexture(tilesetFilePath, renderingSystem, function (tilesetTexture: WebGLGameTexture) {\n                // NOW THAT THE TILE SET TEXTURES HAVE BEEN LOADED,\n                // LOAD ALL THEIR ASSOCIATED TILESET DATA\n                for (let i = 0; i < mapData.tilesets.length; i++) {\n                    let tileSetData: TileSetData = mapData.tilesets[i];\n                    let rows: number = Math.ceil(tileSetData.tilecount / tileSetData.columns);\n                    let tileSetToAdd: TileSet = new TileSet(\n                        tileSetData.name,\n                        tileSetData.columns,\n                        rows,\n                        tileSetData.tilewidth,\n                        tileSetData.tileheight,\n                        tileSetData.spacing,\n                        tileSetData.imagewidth,\n                        tileSetData.imageheight,\n                        tileSetData.firstgid - 1,\n                        tilesetTexture);\n                    thisResourceManager.gameTileSets.set(tileSetToAdd.getName(), tileSetToAdd);\n                }\n\n                // AND NOW THAT THE TILE SETS HAVE BEEN LOADED\n                // WE CAN LOAD THE MAP'S TILED LAYERS, THOUGH NOTE\n                // IN THIS EXAMPLE WE ARE GOING TO KEEP IT SIMPLE\n                // AND ASSUME THERE IS ONLY ONE TILE SET\n                for (let i = 0; i < mapData.layers.length; i++) {\n                    let layerData: TiledLayerData = mapData.layers[i];\n\n                    // THIS LINE OF CODE IS FUNKY, WE CAN ONLY DO THIS WITH A SINGLE TILE SET,\n                    // SO TO MAKE THIS A REAL GAME ENGINE THIS WOULD NEED TO BE FIXED\n                    let layerTileSet: TileSet = thisResourceManager.gameTileSets.values().next().value;\n\n                    // WE ARE ASSUMING EACH LAYER USES JUST ONE TILE SET, WHICH MIGHT NOT\n                    // NECESSARILY BE TRUE. BUT FOR NOW, LET'S JUST MAKE THE LAYERS ALL\n                    // USING THE SAME TILE SET, ADD THE TILES, AND THEN ADD THEM TO THE SCENE GRAPH\n                    let tiledLayer: TiledLayer = new TiledLayer(layerData.width, layerData.height, layerTileSet);\n                    for (let j = 0; j < layerData.data.length; j++) {\n                        let tileIndex: number = layerData.data[j] - 1;\n                        tiledLayer.addTile(tileIndex);\n                    }\n                    sceneGraph.addLayer(tiledLayer);\n                }\n\n                callback();\n            });\n        });\n    }\n\n    /*\n     * Loads the texturePath file argument and once\n     * that is done it calls the callback function.\n     */\n    public loadTexture(texturePath: string,\n        renderingSystem: WebGLGameRenderingSystem,\n        callback: Function): void {\n        let thisResourceManager = this;\n        thisResourceManager.loadImage(texturePath, function (path: string, image: HTMLImageElement) {\n            let textureToLoad: WebGLGameTexture = new WebGLGameTexture();\n            let id: number = thisResourceManager.gameTextures.size;\n            thisResourceManager.gameTextures.set(path, textureToLoad);\n            renderingSystem.initWebGLTexture(textureToLoad, id, image, function () {\n                callback(textureToLoad);\n            });\n        });\n    }\n\n    /*\n     * Loads all the sprite types listed in the spriteTypePaths argument and once\n     * that is done it calls the callback function.\n     */\n    public loadSpriteTypes(renderingSystem: WebGLGameRenderingSystem,\n        spriteTypePaths: Array<NamedPath>,\n        callback: Function): void {\n        // THEN LOAD THE TEXTURES WE'LL BE USING\n        this.numSpriteTypesToLoad = spriteTypePaths.length;\n        this.numSpriteTypesLoaded = 0;\n        let thisResourceManager = this;\n        for (let namedPath of spriteTypePaths) {\n            let name: string = namedPath.name;\n            let path: string = namedPath.path;\n            this.loadSpriteType(renderingSystem, name, path, function () {\n                thisResourceManager.completeLoadingSpriteType(callback);\n            });\n        }\n    }\n\n    // PRIVATE HELPER METHODS\n\n    // LOADS A NEW JSON FILE AND UPON COMPLETION CALLS THE callback FUNCTION\n    private loadTextFile(textFilePath: string, callback: Function): void {\n        let xobj: XMLHttpRequest = new XMLHttpRequest();\n        xobj.overrideMimeType(\"application/json\");\n        xobj.open('GET', textFilePath, true);\n        xobj.onreadystatechange = function () {\n            if ((xobj.readyState == 4) && (xobj.status == 200)) {\n                callback(xobj.responseText);\n            }\n        };\n        xobj.send(null);\n    }\n\n    // CHECKS TO SEE IF ALL SHADER LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingShader(callback: Function): void {\n        this.numShadersLoaded++;\n        if (this.numShadersLoaded === this.numShadersToLoad) {\n            callback();\n        }\n    }\n\n    // CHECKS TO SEE IF ALL SPRITE TYPE LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingSpriteType(callback: Function): void {\n        this.numSpriteTypesLoaded++;\n        if (this.numSpriteTypesLoaded === this.numSpriteTypesToLoad) {\n            callback();\n        }\n    }\n\n    // CHECKS TO SEE IF ALL TEXTURE LOADING IS COMPLETE, IF YES, callback IS INVOKED\n    private completeLoadingTexture(callback: Function): void {\n        this.numTexturesLoaded++;\n        if (this.numTexturesLoaded === this.numTexturesToLoad) {\n            callback();\n        }\n    }\n\n    /**\n     * Loads an Image into RAM and once that process is complete it\n     * calls the callback method argument, presumably to then load\n     * it into GPU memory.\n     */\n    private loadImage(path: string, callback: Function): void {\n        // MAKE THE IMAGE\n        var image = new Image();\n\n        // ONCE THE IMAGE LOADING IS COMPLETED, THE CALLBACK WILL GET CALLED\n        image.onload = function () {\n            callback(path, image);\n        }\n\n        // START IMAGE LOADING\n        image.src = path;\n    }\n\n    /*\n     * This function loads a single sprite type resource from a JSON file and upon\n     * completion calls the callback function.\n     */\n    private loadSpriteType(renderingSystem: WebGLGameRenderingSystem, spriteTypeName: string, jsonFilePath: string, callback: Function): void {\n        let thisResourceManager: ResourceManager = this;\n        this.loadTextFile(jsonFilePath, function (jsonText: string) {\n            thisResourceManager.loadSpriteTypeData(renderingSystem, jsonFilePath, jsonText, function (spriteType: AnimatedSpriteType) {\n                thisResourceManager.gameSpriteTypes.set(spriteTypeName, spriteType);\n                thisResourceManager.gameSpriteTypePaths.set(spriteTypeName, jsonFilePath);\n                callback();\n            });\n        });\n    }\n\n    /*\n     * This helper function loads all the json text into an AnimatedSpriteType\n     * object and returns it.\n     */\n    private loadSpriteTypeData = (renderingSystem: WebGLGameRenderingSystem,\n        spriteFilePath: string,\n        jsonText: string,\n        callback: Function): void => {\n        let jsonData: SpriteTypeData = <SpriteTypeData>JSON.parse(jsonText);\n        let texturePath: string = this.buildPathToFileInSameDirectory(spriteFilePath, jsonData.spriteSheetImage);\n        let thisResourceManager: ResourceManager = this;\n        this.loadTexture(texturePath, renderingSystem, function (spritesheetTexture: WebGLGameTexture) {\n            let spriteWidth: number = jsonData.spriteWidth;\n            let spriteHeight: number = jsonData.spriteHeight;\n            let animatedSpriteType = new AnimatedSpriteType(spritesheetTexture, spriteWidth, spriteHeight);\n            for (let i = 0; i < jsonData.animations.length; i++) {\n                let animation = <AnimationStateData>jsonData.animations[i];\n                animatedSpriteType.addAnimation(animation.name, (!animation.repeat ? animation.next : animation.name));\n                for (var j = 0; j < animation.frames.length; j++) {\n                    var frame = animation.frames[j];\n                    animatedSpriteType.addAnimationFrame(animation.name, frame.index, frame.duration);\n                }\n            }\n            callback(animatedSpriteType);\n        });\n    }\n}","export abstract class GameLoopTemplate {\n    // ALL INSTANCE VARIABLES WILL BE INITIALIZED VIA THE CONSTRUCTOR\n    private fps: number;\n    private simulationTimestep: number;\n    private frameDelta: number;\n    private lastFrameTimeMs: number;\n    private fpsAlpha: number;\n    private fpsUpdateInterval: number;\n    private lastFpsUpdate: number;\n    private framesSinceLastFpsUpdate: number;\n    private numUpdateSteps: number;\n    private minFrameDelay: number;\n    private running: boolean;\n    private started: boolean;\n    private panic: boolean;\n    private raf: number;\n\n    constructor() {\n        // An exponential moving average of the frames per second.\n        this.fps = 60;\n\n        // The amount of time (in milliseconds) to simulate each time update() runs.\n        // See `MainLoop.setSimulationTimestep()` for details.\n        this.simulationTimestep = 1000 / this.fps;\n\n        // The cumulative amount of in-app time that hasn't been simulated yet.\n        // See the comments inside animate() for details.\n        this.frameDelta = 0;\n\n        // The timestamp in milliseconds of the last time the main loop was run.\n        // Used to compute the time elapsed between frames.\n        this.lastFrameTimeMs = 0;\n\n        // A factor that affects how heavily to weight more recent seconds'\n        // performance when calculating the average frames per second. Valid values\n        // range from zero to one inclusive. Higher values result in weighting more\n        // recent seconds more heavily.\n        this.fpsAlpha = 0.9;\n\n        // The minimum duration between updates to the frames-per-second estimate.\n        // Higher values increase accuracy, but result in slower updates.\n        this.fpsUpdateInterval = 1000;\n\n        // The timestamp (in milliseconds) of the last time the `fps` moving\n        // average was updated.\n        this.lastFpsUpdate = 0;\n\n        // The number of frames delivered since the last time the `fps` moving\n        // average was updated (i.e. since `lastFpsUpdate`).\n        this.framesSinceLastFpsUpdate = 0;\n\n        // The number of times update() is called in a given frame. This is only\n        // relevant inside of animate(), but a reference is held externally so that\n        // this variable is not marked for garbage collection every time the main\n        // loop runs.\n        this.numUpdateSteps = 0;\n\n        // The minimum amount of time in milliseconds that must pass since the last\n        // frame was executed before another frame can be executed. The\n        // multiplicative inverse caps the FPS (the default of zero means there is\n        // no cap).\n        this.minFrameDelay = 0;\n\n        // Whether the main loop is running.\n        this.running = false;\n\n        // `true` if `MainLoop.start()` has been called and the most recent time it\n        // was called has not been followed by a call to `MainLoop.stop()`. This is\n        // different than `running` because there is a delay of a few milliseconds\n        // after `MainLoop.start()` is called before the application is considered\n        // \"running.\" This delay is due to waiting for the next frame.\n        this.started = false;\n\n        // Whether the simulation has fallen too far behind real time.\n        // Specifically, `panic` will be set to `true` if too many updates occur in\n        // one frame. This is only relevant inside of animate(), but a reference is\n        // held externally so that this variable is not marked for garbage\n        // collection every time the main loop runs.\n        this.panic = false;\n    }\n\n    /**\n     * Gets how many milliseconds should be simulated by every run of update().\n     *\n     * See `MainLoop.setSimulationTimestep()` for details on this value.\n     *\n     * @return {Number}\n     *   The number of milliseconds that should be simulated by every run of\n     *   {@link #setUpdate update}().\n     */\n    getSimulationTimestep(): number {\n        return this.simulationTimestep;\n    }\n\n    /**\n     * Sets how many milliseconds should be simulated by every run of update().\n     *\n     * The perceived frames per second (FPS) is effectively capped at the\n     * multiplicative inverse of the simulation timestep. That is, if the\n     * timestep is 1000 / 60 (which is the default), then the maximum perceived\n     * FPS is effectively 60. Decreasing the timestep increases the maximum\n     * perceived FPS at the cost of running {@link #setUpdate update}() more\n     * times per frame at lower frame rates. Since running update() more times\n     * takes more time to process, this can actually slow down the frame rate.\n     * Additionally, if the amount of time it takes to run update() exceeds or\n     * very nearly exceeds the timestep, the application will freeze and crash\n     * in a spiral of death (unless it is rescued; see `MainLoop.setEnd()` for\n     * an explanation of what can be done if a spiral of death is occurring).\n     *\n     * The exception to this is that interpolating between updates for each\n     * render can increase the perceived frame rate and reduce visual\n     * stuttering. See `MainLoop.setDraw()` for an explanation of how to do\n     * this.\n     *\n     * If you are considering decreasing the simulation timestep in order to\n     * raise the maximum perceived FPS, keep in mind that most monitors can't\n     * display more than 60 FPS. Whether humans can tell the difference among\n     * high frame rates depends on the application, but for reference, film is\n     * usually displayed at 24 FPS, other videos at 30 FPS, most games are\n     * acceptable above 30 FPS, and virtual reality might require 75 FPS to\n     * feel natural. Some gaming monitors go up to 144 FPS. Setting the\n     * timestep below 1000 / 144 is discouraged and below 1000 / 240 is\n     * strongly discouraged. The default of 1000 / 60 is good in most cases.\n     *\n     * The simulation timestep should typically only be changed at\n     * deterministic times (e.g. before the main loop starts for the first\n     * time, and not in response to user input or slow frame rates) to avoid\n     * introducing non-deterministic behavior. The update timestep should be\n     * the same for all players/users in multiplayer/multi-user applications.\n     *\n     * See also `MainLoop.getSimulationTimestep()`.\n     *\n     * @param {Number} timestep\n     *   The number of milliseconds that should be simulated by every run of\n     *   {@link #setUpdate update}().\n     */\n    setSimulationTimestep(timestep: number): void {\n        this.simulationTimestep = timestep;\n    }\n\n    /**\n     * Returns the exponential moving average of the frames per second.\n     *\n     * @return {Number}\n     *   The exponential moving average of the frames per second.\n     */\n    getFPS(): number {\n        return this.fps;\n    }\n\n    /**\n     * Gets the maximum frame rate.\n     *\n     * Other factors also limit the FPS; see `MainLoop.setSimulationTimestep`\n     * for details.\n     *\n     * See also `MainLoop.setMaxAllowedFPS()`.\n     *\n     * @return {Number}\n     *   The maximum number of frames per second allowed.\n     */\n    getMaxAllowedFPS(): number {\n        return 1000 / this.minFrameDelay;\n    }\n\n    /**\n     * Sets a maximum frame rate.\n     *\n     * See also `MainLoop.getMaxAllowedFPS()`.\n     *\n     * @param {Number} [fps=Infinity]\n     *   The maximum number of frames per second to execute. If Infinity or not\n     *   passed, there will be no FPS cap (although other factors do limit the\n     *   FPS; see `MainLoop.setSimulationTimestep` for details). If zero, this\n     *   will stop the loop, and when the loop is next started, it will return\n     *   to the previous maximum frame rate. Passing negative values will stall\n     *   the loop until this function is called again with a positive value.\n     *\n     * @chainable\n     */\n    setMaxAllowedFPS(fps: number): void {\n        if (typeof fps === 'undefined') {\n            fps = Infinity;\n        }\n        if (fps === 0) {\n            this.stop();\n        }\n        else {\n            // Dividing by Infinity returns zero.\n            this.minFrameDelay = 1000 / fps;\n        }\n    }\n\n    /**\n     * Reset the amount of time that has not yet been simulated to zero.\n     *\n     * This introduces non-deterministic behavior if called after the\n     * application has started running (unless it is being reset, in which case\n     * it doesn't matter). However, this can be useful in cases where the\n     * amount of time that has not yet been simulated has grown very large\n     * (for example, when the application's tab gets put in the background and\n     * the browser throttles the timers as a result). In applications with\n     * lockstep the player would get dropped, but in other networked\n     * applications it may be necessary to snap or ease the player/user to the\n     * authoritative state and discard pending updates in the process. In\n     * non-networked applications it may also be acceptable to simply resume\n     * the application where it last left off and ignore the accumulated\n     * unsimulated time.\n     *\n     * @return {Number}\n     *   The cumulative amount of elapsed time in milliseconds that has not yet\n     *   been simulated, but is being discarded as a result of calling this\n     *   function.\n     */\n    resetFrameDelta() : number {\n        var oldFrameDelta = this.frameDelta;\n        this.frameDelta = 0;\n        return oldFrameDelta;\n    }\n\n    /**\n     * Starts the main loop.\n     *\n     * Note that the application is not considered \"running\" immediately after\n     * this function returns; rather, it is considered \"running\" after the\n     * application draws its first frame. The distinction is that event\n     * handlers should remain paused until the application is running, even\n     * after `MainLoop.start()` is called. Check `MainLoop.isRunning()` for the\n     * current status. To act after the application starts, register a callback\n     * with requestAnimationFrame() after calling this function and execute the\n     * action in that callback. It is safe to call `MainLoop.start()` multiple\n     * times even before the application starts running and without calling\n     * `MainLoop.stop()` in between, although there is no reason to do this;\n     * the main loop will only start if it is not already started.\n     *\n     * See also `MainLoop.stop()`.\n     */\n    start(): void {\n        if (!this.started) {\n            // Since the application doesn't start running immediately, track\n            // whether this function was called and use that to keep it from\n            // starting the main loop multiple times.\n            this.started = true;\n\n            // In the main loop, draw() is called after update(), so if we\n            // entered the main loop immediately, we would never render the\n            // initial state before any updates occur. Instead, we run one\n            // frame where all we do is draw, and then start the main loop with\n            // the next frame.\n            this.raf = requestAnimationFrame(this.startLoop.bind(this));\n        }\n    }\n\n    startLoop(timestamp : number): void {\n        // Render the initial state before any updates occur.\n        this.draw(1);\n\n        // The application isn't considered \"running\" until the\n        // application starts drawing.\n        this.running = true;\n\n        // Reset variables that are used for tracking time so that we\n        // don't simulate time passed while the application was paused.\n        this.lastFrameTimeMs = timestamp;\n        this.lastFpsUpdate = timestamp;\n        this.framesSinceLastFpsUpdate = 0;\n\n        // Start the main loop.\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\n    }\n\n    /**\n     * Returns whether the main loop is currently running.\n     *\n     * See also `MainLoop.start()` and `MainLoop.stop()`.\n     *\n     * @return {Boolean}\n     *   Whether the main loop is currently running.\n     */\n    isRunning(): boolean {\n        return this.running;\n    }\n\n    /**\n     * Stops the main loop.\n     *\n     * Event handling and other background tasks should also be paused when the\n     * main loop is paused.\n     *\n     * Note that pausing in multiplayer/multi-user applications will cause the\n     * player's/user's client to become out of sync. In this case the\n     * simulation should exit, or the player/user needs to be snapped to their\n     * updated position when the main loop is started again.\n     *\n     * See also `MainLoop.start()` and `MainLoop.isRunning()`.\n     */\n    stop(): void {\n        this.running = false;\n        this.started = false;\n        window.cancelAnimationFrame(this.raf);\n    }\n\n    /**\n     * The main loop that runs updates and rendering.\n     * \n     * @param {DOMHighResTimeStamp} timestamp\n     * The current timestamp. In practice this is supplied by\n     * requestAnimationFrame at the time that it starts to fire callbacks. This\n     * should only be used for comparison to other timestamps because the epoch\n     * (i.e. the \"zero\" time) depends on the engine running this code. In engines\n     * that support `DOMHighResTimeStamp` (all modern browsers except iOS Safari\n     * 8) the epoch is the time the page started loading, specifically\n     * `performance.timing.navigationStart`. Everywhere else, including node.js,\n     * the epoch is the Unix epoch (1970-01-01T00:00:00Z).\n     * \n     * @ignore\n     */\n    animate(timestamp : number): void {\n        // Run the loop again the next time the browser is ready to render.\n        // We set rafHandle immediately so that the next frame can be canceled\n        // during the current frame.\n        this.raf = window.requestAnimationFrame(this.animate.bind(this));\n\n        // Throttle the frame rate (if minFrameDelay is set to a non-zero value by\n        // `MainLoop.setMaxAllowedFPS()`).\n        if (timestamp < this.lastFrameTimeMs + this.minFrameDelay) {\n            return;\n        }\n\n        // frameDelta is the cumulative amount of in-app time that hasn't been\n        // simulated yet. Add the time since the last frame. We need to track total\n        // not-yet-simulated time (as opposed to just the time elapsed since the\n        // last frame) because not all actually elapsed time is guaranteed to be\n        // simulated each frame. See the comments below for details.\n        this.frameDelta += timestamp - this.lastFrameTimeMs;\n        this.lastFrameTimeMs = timestamp;\n\n        // Run any updates that are not dependent on time in the simulation. See\n        // `MainLoop.setBegin()` for additional details on how to use this.\n        this.begin(timestamp, this.frameDelta);\n\n        // Update the estimate of the frame rate, `fps`. Approximately every\n        // second, the number of frames that occurred in that second are included\n        // in an exponential moving average of all frames per second. This means\n        // that more recent seconds affect the estimated frame rate more than older\n        // seconds.\n        if (timestamp > this.lastFpsUpdate + this.fpsUpdateInterval) {\n            // Compute the new exponential moving average.\n            this.fps =\n                // Divide the number of frames since the last FPS update by the\n                // amount of time that has passed to get the mean frames per second\n                // over that period. This is necessary because slightly more than a\n                // second has likely passed since the last update.\n                this.fpsAlpha * this.framesSinceLastFpsUpdate * 1000 / (timestamp - this.lastFpsUpdate) +\n                (1 - this.fpsAlpha) * this.fps;\n\n            // Reset the frame counter and last-updated timestamp since their\n            // latest values have now been incorporated into the FPS estimate.\n            this.lastFpsUpdate = timestamp;\n            this.framesSinceLastFpsUpdate = 0;\n        }\n        // Count the current frame in the next frames-per-second update. This\n        // happens after the previous section because the previous section\n        // calculates the frames that occur up until `timestamp`, and `timestamp`\n        // refers to a time just before the current frame was delivered.\n        this.framesSinceLastFpsUpdate++;\n\n        /*\n         * A naive way to move an object along its X-axis might be to write a main\n         * loop containing the statement `obj.x += 10;` which would move the object\n         * 10 units per frame. This approach suffers from the issue that it is\n         * dependent on the frame rate. In other words, if your application is\n         * running slowly (that is, fewer frames per second), your object will also\n         * appear to move slowly, whereas if your application is running quickly\n         * (that is, more frames per second), your object will appear to move\n         * quickly. This is undesirable, especially in multiplayer/multi-user\n         * applications.\n         *\n         * One solution is to multiply the speed by the amount of time that has\n         * passed between rendering frames. For example, if you want your object to\n         * move 600 units per second, you might write `obj.x += 600 * delta`, where\n         * `delta` is the time passed since the last frame. (For convenience, let's\n         * move this statement to an update() function that takes `delta` as a\n         * parameter.) This way, your object will move a constant distance over\n         * time. However, at low frame rates and high speeds, your object will move\n         * large distances every frame, which can cause it to do strange things\n         * such as move through walls. Additionally, we would like our program to\n         * be deterministic. That is, every time we run the application with the\n         * same input, we would like exactly the same output. If the time between\n         * frames (the `delta`) varies, our output will diverge the longer the\n         * program runs due to accumulated rounding errors, even at normal frame\n         * rates.\n         *\n         * A better solution is to separate the amount of time simulated in each\n         * update() from the amount of time between frames. Our update() function\n         * doesn't need to change; we just need to change the delta we pass to it\n         * so that each update() simulates a fixed amount of time (that is, `delta`\n         * should have the same value each time update() is called). The update()\n         * function can be run multiple times per frame if needed to simulate the\n         * total amount of time passed since the last frame. (If the time that has\n         * passed since the last frame is less than the fixed simulation time, we\n         * just won't run an update() until the the next frame. If there is\n         * unsimulated time left over that is less than our timestep, we'll just\n         * leave it to be simulated during the next frame.) This approach avoids\n         * inconsistent rounding errors and ensures that there are no giant leaps\n         * through walls between frames.\n         *\n         * That is what is done below. It introduces a new problem, but it is a\n         * manageable one: if the amount of time spent simulating is consistently\n         * longer than the amount of time between frames, the application could\n         * freeze and crash in a spiral of death. This won't happen as long as the\n         * fixed simulation time is set to a value that is high enough that\n         * update() calls usually take less time than the amount of time they're\n         * simulating. If it does start to happen anyway, see `MainLoop.setEnd()`\n         * for a discussion of ways to stop it.\n         *\n         * Additionally, see `MainLoop.setUpdate()` for a discussion of performance\n         * considerations.\n         *\n         * Further reading for those interested:\n         *\n         * - http://gameprogrammingpatterns.com/game-loop.html\n         * - http://gafferongames.com/game-physics/fix-your-timestep/\n         * - https://gamealchemist.wordpress.com/2013/03/16/thoughts-on-the-javascript-game-loop/\n         * - https://developer.mozilla.org/en-US/docs/Games/Anatomy\n         */\n        this.numUpdateSteps = 0;\n        while (this.frameDelta >= this.simulationTimestep) {\n            this.update(this.simulationTimestep);\n            this.frameDelta -= this.simulationTimestep;\n\n            /*\n             * Sanity check: bail if we run the loop too many times.\n             *\n             * One way this could happen is if update() takes longer to run than\n             * the time it simulates, thereby causing a spiral of death. For ways\n             * to avoid this, see `MainLoop.setEnd()`. Another way this could\n             * happen is if the browser throttles serving frames, which typically\n             * occurs when the tab is in the background or the device battery is\n             * low. An event outside of the main loop such as audio processing or\n             * synchronous resource reads could also cause the application to hang\n             * temporarily and accumulate not-yet-simulated time as a result.\n             *\n             * 240 is chosen because, for any sane value of simulationTimestep, 240\n             * updates will simulate at least one second, and it will simulate four\n             * seconds with the default value of simulationTimestep. (Safari\n             * notifies users that the script is taking too long to run if it takes\n             * more than five seconds.)\n             *\n             * If there are more updates to run in a frame than this, the\n             * application will appear to slow down to the user until it catches\n             * back up. In networked applications this will usually cause the user\n             * to get out of sync with their peers, but if the updates are taking\n             * this long already, they're probably already out of sync.\n             */\n            if (++this.numUpdateSteps >= 240) {\n                this.panic = true;\n                break;\n            }\n        }\n\n        /*\n         * Render the screen. We do this regardless of whether update() has run\n         * during this frame because it is possible to interpolate between updates\n         * to make the frame rate appear faster than updates are actually\n         * happening. See `MainLoop.setDraw()` for an explanation of how to do\n         * that.\n         *\n         * We draw after updating because we want the screen to reflect a state of\n         * the application that is as up-to-date as possible. (`MainLoop.start()`\n         * draws the very first frame in the application's initial state, before\n         * any updates have occurred.) Some sources speculate that rendering\n         * earlier in the requestAnimationFrame callback can get the screen painted\n         * faster; this is mostly not true, and even when it is, it's usually just\n         * a trade-off between rendering the current frame sooner and rendering the\n         * next frame later.\n         *\n         * See `MainLoop.setDraw()` for details about draw() itself.\n         */\n        this.draw(this.frameDelta / this.simulationTimestep);\n\n        // Run any updates that are not dependent on time in the simulation. See\n        // `MainLoop.setEnd()` for additional details on how to use this.\n        this.end(this.fps, this.panic);\n\n        this.panic = false;\n    }\n\n    // SUBCLASSES MUST OVERRIDE FOUR REQUIRED METHODS:\n        // begin\n        // update\n        // draw\n        // end\n\n    /**\n     * A function that runs at the beginning of the main loop.\n     *\n     * The begin() function is typically used to process input before the\n     * updates run. Processing input here (in chunks) can reduce the running\n     * time of event handlers, which is useful because long-running event\n     * handlers can sometimes delay frames.\n     *\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\n     * frame, begin() always runs exactly once per frame. This makes it useful\n     * for any updates that are not dependent on time in the simulation.\n     * Examples include adjusting HUD calculations or performing long-running\n     * updates incrementally. Compared to {@link #setEnd end}(), generally\n     * actions should occur in begin() if they affect anything that\n     * {@link #setUpdate update}() or {@link #setDraw draw}() use.\n     *\n     * @param {Function} begin\n     *   The begin() function.\n     * @param {Number} [begin.timestamp]\n     *   The current timestamp (when the frame started), in milliseconds. This\n     *   should only be used for comparison to other timestamps because the\n     *   epoch (i.e. the \"zero\" time) depends on the engine running this code.\n     *   In engines that support `DOMHighResTimeStamp` (all modern browsers\n     *   except iOS Safari 8) the epoch is the time the page started loading,\n     *   specifically `performance.timing.navigationStart`. Everywhere else,\n     *   including node.js, the epoch is the Unix epoch (1970-01-01T00:00:00Z).\n     * @param {Number} [begin.delta]\n     *   The total elapsed time that has not yet been simulated, in\n     *   milliseconds.\n     */\n    abstract begin(timestamp : number, delta : number) : void;\n\n    /**\n     * A function that runs updates (i.e. AI and physics).\n     *\n     * The update() function should simulate anything that is affected by time.\n     * It can be called zero or more times per frame depending on the frame\n     * rate.\n     *\n     * As with everything in the main loop, the running time of update()\n     * directly affects the frame rate. If update() takes long enough that the\n     * frame rate drops below the target (\"budgeted\") frame rate, parts of the\n     * update() function that do not need to execute between every frame can be\n     * moved into Web Workers. (Various sources on the internet sometimes\n     * suggest other scheduling patterns using setTimeout() or setInterval().\n     * These approaches sometimes offer modest improvements with minimal\n     * changes to existing code, but because JavaScript is single-threaded, the\n     * updates will still block rendering and drag down the frame rate. Web\n     * Workers execute in separate threads, so they free up more time in the\n     * main loop.)\n     *\n     * This script can be imported into a Web Worker using importScripts() and\n     * used to run a second main loop in the worker. Some considerations:\n     *\n     * - Profile your code before doing the work to move it into Web Workers.\n     *   It could be the rendering that is the bottleneck, in which case the\n     *   solution is to decrease the visual complexity of the scene.\n     * - It doesn't make sense to move the *entire* contents of update() into\n     *   workers unless {@link #setDraw draw}() can interpolate between frames.\n     *   The lowest-hanging fruit is background updates (like calculating\n     *   citizens' happiness in a city-building game), physics that doesn't\n     *   affect the scene (like flags waving in the wind), and anything that is\n     *   occluded or happening far off screen.\n     * - If draw() needs to interpolate physics based on activity that occurs\n     *   in a worker, the worker needs to pass the interpolation value back to\n     *   the main thread so that is is available to draw().\n     * - Web Workers can't access the state of the main thread, so they can't\n     *   directly modify objects in your scene. Moving data to and from Web\n     *   Workers is a pain. The fastest way to do it is with Transferable\n     *   Objects: basically, you can pass an ArrayBuffer to a worker,\n     *   destroying the original reference in the process.\n     *\n     * You can read more about Web Workers and Transferable Objects at\n     * [HTML5 Rocks](http://www.html5rocks.com/en/tutorials/workers/basics/).\n     *\n     * @param {Function} update\n     *   The update() function.\n     * @param {Number} [update.delta]\n     *   The amount of time in milliseconds to simulate in the update. In most\n     *   cases this timestep never changes in order to ensure deterministic\n     *   updates. The timestep is the same as that returned by\n     *   `MainLoop.getSimulationTimestep()`.\n     */\n    abstract update(timeStep : number) : void;\n\n    /**\n     * A function that draws things on the screen.\n     *\n     * The draw() function gets passed the percent of time that the next run of\n     * {@link #setUpdate update}() will simulate that has actually elapsed, as\n     * a decimal. In other words, draw() gets passed how far between update()\n     * calls it is. This is useful because the time simulated by update() and\n     * the time between draw() calls is usually different, so the parameter to\n     * draw() can be used to interpolate motion between frames to make\n     * rendering appear smoother. To illustrate, if update() advances the\n     * simulation at each vertical bar in the first row below, and draw() calls\n     * happen at each vertical bar in the second row below, then some frames\n     * will have time left over that is not yet simulated by update() when\n     * rendering occurs in draw():\n     *\n     *     update() timesteps:  |  |  |  |  |  |  |  |  |\n     *     draw() calls:        |   |   |   |   |   |   |\n     *\n     * To interpolate motion for rendering purposes, objects' state after the\n     * last update() must be retained and used to calculate an intermediate\n     * state. Note that this means renders will be up to one update() behind.\n     * This is still better than extrapolating (projecting objects' state after\n     * a future update()) which can produce bizarre results. Storing multiple\n     * states can be difficult to set up, and keep in mind that running this\n     * process takes time that could push the frame rate down, so it's often\n     * not worthwhile unless stuttering is visible.\n     *\n     * @param {Function} draw\n     *   The draw() function.\n     * @param {Number} [draw.interpolationPercentage]\n     *   The cumulative amount of time that hasn't been simulated yet, divided\n     *   by the amount of time that will be simulated the next time update()\n     *   runs. Useful for interpolating frames.\n     */\n    public abstract draw(interpolationPercentage : number) : void;\n\n    /**\n     * A function that runs at the end of the main loop.\n     *\n     * Unlike {@link #setUpdate update}(), which can run zero or more times per\n     * frame, end() always runs exactly once per frame. This makes it useful\n     * for any updates that are not dependent on time in the simulation.\n     * Examples include cleaning up any temporary state set up by\n     * {@link #setBegin begin}(), lowering the visual quality if the frame rate\n     * is too low, or performing long-running updates incrementally. Compared\n     * to begin(), generally actions should occur in end() if they use anything\n     * that update() or {@link #setDraw draw}() affect.\n     *\n     * @param {Function} end\n     *   The end() function.\n     * @param {Number} [end.fps]\n     *   The exponential moving average of the frames per second. This is the\n     *   same value returned by `MainLoop.getFPS()`. It can be used to take\n     *   action when the FPS is too low (or to restore to normalcy if the FPS\n     *   moves back up). Examples of actions to take if the FPS is too low\n     *   include exiting the application, lowering the visual quality, stopping\n     *   or reducing activities outside of the main loop like event handlers or\n     *   audio playback, performing non-critical updates less frequently, or\n     *   increasing the simulation timestep (by calling\n     *   `MainLoop.setSimulationTimestep()`). Note that this last option\n     *   results in more time being simulated per update() call, which causes\n     *   the application to behave non-deterministically.\n     * @param {Boolean} [end.panic=false]\n     *   Indicates whether the simulation has fallen too far behind real time.\n     *   Specifically, `panic` will be `true` if too many updates occurred in\n     *   one frame. In networked lockstep applications, the application should\n     *   wait for some amount of time to see if the user can catch up before\n     *   dropping the user. In networked but non-lockstep applications, this\n     *   typically indicates that the user needs to be snapped or eased to the\n     *   current authoritative state. When this happens, it may be convenient\n     *   to call `MainLoop.resetFrameDelta()` to discard accumulated pending\n     *   updates. In non-networked applications, it may be acceptable to allow\n     *   the application to keep running for awhile to see if it will catch up.\n     *   However, this could also cause the application to look like it is\n     *   running very quickly for a few frames as it transitions through the\n     *   intermediate states. An alternative that may be acceptable is to\n     *   simply ignore the unsimulated elapsed time by calling\n     *   `MainLoop.resetFrameDelta()` even though this introduces\n     *   non-deterministic behavior. In all cases, if the application panics\n     *   frequently, this is an indication that the main loop is running too\n     *   slowly. However, most of the time the drop in frame rate will probably\n     *   be noticeable before a panic occurs. To help the application catch up\n     *   after a panic caused by a spiral of death, the same steps can be taken\n     *   that are suggested above if the FPS drops too low.\n     */\n    abstract end(fps : number, panic : boolean) : void;\n}","/*\n * MathUtilities provides a number of services for rendering using 4x4 matrices, like\n * transformting (i.e. translation, rotation, and scaling) 3d or 2d points from world\n * coordinate systems to screen coordinate systems.\n */\nimport {Matrix} from './Matrix'\nimport {Vector3} from './Vector3'\n\nexport namespace MathUtilities {\n    export function determinant4x4(result : Matrix) : number {\n        let det0 = result.get(0, 0) * (\n            (result.get(1, 1) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\n            - (result.get(1, 2) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\n            + (result.get(1, 3) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(3, 1) * result.get(2, 2)))));\n        let det1 = result.get(0, 1) * (\n            (result.get(1, 0) * ((result.get(2, 2) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 2))))\n            - (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(3, 0) * result.get(2, 3))))\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(3, 0) * result.get(2, 2)))));\n        let det2 = result.get(0, 2) * (\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 1))))\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 3)) - (result.get(2, 3) * result.get(3, 0))))\n            + (result.get(1, 3) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\n        let det3 = result.get(0, 3) * (\n            (result.get(1, 0) * ((result.get(2, 1) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 1))))\n            - (result.get(1, 1) * ((result.get(2, 0) * result.get(3, 2)) - (result.get(2, 2) * result.get(3, 0))))\n            + (result.get(1, 2) * ((result.get(2, 0) * result.get(3, 1)) - (result.get(2, 1) * result.get(3, 0)))));\n        let det = det0 - det1 + det2 - det3;\n        console.log(\"det = \" + det0 + \" + \" + det1 + \" + \" + det2 + \" + \" + det3);\n        return det;\n    }\n    export function identity(result : Matrix) : void {\n        if (result.getRows() === result.getColumns()) {\n            for (let i = 0; i < result.getRows(); i++) {\n                for (let j = 0; j < result.getColumns(); j++) {\n                    if (i === j)\n                        result.set(1.0, i, j);\n                    else\n                        result.set(0.0, i, j);\n                }\n            }\n        }\n    }\n    export function inverse(result : Matrix, mat : Matrix) : void {\n        let det = this.determinant(mat);\n        let m00 = mat.get(0, 0); let m01 = mat.get(0, 1); let m02 = mat.get(0, 2); let m03 = mat.get(0, 3);\n        let m10 = mat.get(1, 0); let m11 = mat.get(1, 1); let m12 = mat.get(1, 2); let m13 = mat.get(1, 3);\n        let m20 = mat.get(2, 0); let m21 = mat.get(2, 1); let m22 = mat.get(2, 2); let m23 = mat.get(2, 3);\n        let m30 = mat.get(3, 0); let m31 = mat.get(3, 1); let m32 = mat.get(3, 2); let m33 = mat.get(3, 3);\n        let temp = new Matrix(4, 4);\n        temp.set((m12 * m23 * m31) - (m13 * m22 * m31) + (m13 * m21 * m32) - (m11 * m23 * m32) - (m12 * m21 * m33) + (m11 * m22 * m33), 0, 0);\n        temp.set((m03 * m22 * m31) - (m02 * m23 * m31) - (m03 * m21 * m32) + (m01 * m23 * m32) + (m02 * m21 * m33) - (m01 * m22 * m33), 0, 1);\n        temp.set((m02 * m13 * m31) - (m03 * m12 * m31) + (m03 * m11 * m32) - (m01 * m13 * m32) - (m02 * m11 * m33) + (m01 * m12 * m33), 0, 2);\n        temp.set((m03 * m12 * m21) - (m02 * m13 * m21) - (m03 * m11 * m22) + (m01 * m13 * m22) + (m02 * m11 * m23) - (m01 * m12 * m23), 0, 3);\n        temp.set((m13 * m22 * m30) - (m12 * m23 * m30) - (m13 * m20 * m32) + (m10 * m23 * m32) + (m12 * m20 * m33) - (m10 * m22 * m33), 1, 0);\n        temp.set((m02 * m23 * m30) - (m03 * m22 * m30) + (m03 * m20 * m32) - (m00 * m23 * m32) - (m02 * m20 * m33) + (m00 * m22 * m33), 1, 1);\n        temp.set((m03 * m12 * m30) - (m02 * m13 * m30) - (m03 * m10 * m32) + (m00 * m13 * m32) + (m02 * m10 * m33) - (m00 * m12 * m33), 1, 2);\n        temp.set((m02 * m13 * m20) - (m03 * m12 * m20) + (m03 * m10 * m22) - (m00 * m13 * m22) - (m02 * m10 * m23) + (m00 * m12 * m23), 1, 3);\n        temp.set((m11 * m23 * m30) - (m13 * m21 * m30) + (m13 * m20 * m31) - (m10 * m23 * m31) - (m11 * m20 * m33) + (m10 * m21 * m33), 2, 0);\n        temp.set((m03 * m21 * m30) - (m01 * m23 * m30) - (m03 * m20 * m31) + (m00 * m23 * m31) + (m01 * m20 * m33) - (m00 * m21 * m33), 2, 1);\n        temp.set((m01 * m13 * m30) - (m03 * m11 * m30) + (m03 * m10 * m31) - (m00 * m13 * m31) - (m01 * m10 * m33) + (m00 * m11 * m33), 2, 2);\n        temp.set((m03 * m11 * m20) - (m01 * m13 * m20) - (m03 * m10 * m21) + (m00 * m13 * m21) + (m01 * m10 * m23) - (m00 * m11 * m23), 2, 3);\n        temp.set((m12 * m21 * m30) - (m11 * m22 * m30) - (m12 * m20 * m31) + (m10 * m22 * m31) + (m11 * m20 * m32) - (m10 * m21 * m32), 3, 0);\n        temp.set((m01 * m22 * m30) - (m02 * m21 * m30) + (m02 * m20 * m31) - (m00 * m22 * m31) - (m01 * m20 * m32) + (m00 * m21 * m32), 3, 1);\n        temp.set((m02 * m11 * m30) - (m01 * m12 * m30) - (m02 * m10 * m31) + (m00 * m12 * m31) + (m01 * m10 * m32) - (m00 * m11 * m32), 3, 2);\n        temp.set((m01 * m12 * m20) - (m02 * m11 * m20) + (m02 * m10 * m21) - (m00 * m12 * m21) - (m01 * m10 * m22) + (m00 * m11 * m22), 3, 3);\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                result.set(temp.get(i, j) / det, i, j);\n            }\n        }\n    }\n    export function model(result : Matrix, translation : Vector3, rotation : Vector3, scale : Vector3) : void {\n        // TRANSLATION MATRIX\t\n        let translationMatrix = new Matrix(4, 4);\n        this.identity(translationMatrix);\n        this.translate(translationMatrix, translation);\n\n        // ROTATION MATRIX\n        let rotationMatrix = new Matrix(4, 4);\n        this.identity(rotationMatrix);\n        this.rotate(rotationMatrix, rotation);\n\n        // SCALING MATRIX\n        let scaleMatrix = new Matrix(4, 4);\n        this.identity(scaleMatrix);\n        this.scale(scaleMatrix, scale);\n\n        // AND NOW MULTIPLY THEM TOGETHER IN THE CORRECT ORDER\n        let tempMatrix = new Matrix(4, 4);\n        this.multiply(tempMatrix, translationMatrix, rotationMatrix);\n        this.multiply(result, tempMatrix, scaleMatrix);\n    }\n\n    export function multiply(result : Matrix, mat0 : Matrix, mat1 : Matrix) : void {\n        // result MIGHT BE mat0 OR mat1 SO IT'S BEST IF WE\n        // CALCULATE TEMP VALUES FIRST BEFORE ASSIGNMENT\n        let r00 = (mat0.get(0, 0) * mat1.get(0, 0))\n            + (mat0.get(0, 1) * mat1.get(1, 0))\n            + (mat0.get(0, 2) * mat1.get(2, 0))\n            + (mat0.get(0, 3) * mat1.get(3, 0));\n        let r10 = (mat0.get(1, 0) * mat1.get(0, 0))\n            + (mat0.get(1, 1) * mat1.get(1, 0))\n            + (mat0.get(1, 2) * mat1.get(2, 0))\n            + (mat0.get(1, 3) * mat1.get(3, 0));\n        let r20 = (mat0.get(2, 0) * mat1.get(0, 0))\n            + (mat0.get(2, 1) * mat1.get(1, 0))\n            + (mat0.get(2, 2) * mat1.get(2, 0))\n            + (mat0.get(2, 3) * mat1.get(3, 0));\n        let r30 = (mat0.get(3, 0) * mat1.get(0, 0))\n            + (mat0.get(3, 1) * mat1.get(1, 0))\n            + (mat0.get(3, 2) * mat1.get(2, 0))\n            + (mat0.get(3, 3) * mat1.get(3, 0));\n        let r01 = (mat0.get(0, 0) * mat1.get(0, 1))\n            + (mat0.get(0, 1) * mat1.get(1, 1))\n            + (mat0.get(0, 2) * mat1.get(2, 1))\n            + (mat0.get(0, 3) * mat1.get(3, 1));\n        let r11 = (mat0.get(1, 0) * mat1.get(0, 1))\n            + (mat0.get(1, 1) * mat1.get(1, 1))\n            + (mat0.get(1, 2) * mat1.get(2, 1))\n            + (mat0.get(1, 3) * mat1.get(3, 1));\n        let r21 = (mat0.get(2, 0) * mat1.get(0, 1))\n            + (mat0.get(2, 1) * mat1.get(1, 1))\n            + (mat0.get(2, 2) * mat1.get(2, 1))\n            + (mat0.get(2, 3) * mat1.get(3, 1));\n        let r31 = (mat0.get(3, 0) * mat1.get(0, 1))\n            + (mat0.get(3, 1) * mat1.get(1, 1))\n            + (mat0.get(3, 2) * mat1.get(2, 1))\n            + (mat0.get(3, 3) * mat1.get(3, 1));\n        let r02 = (mat0.get(0, 0) * mat1.get(0, 2))\n            + (mat0.get(0, 1) * mat1.get(1, 2))\n            + (mat0.get(0, 2) * mat1.get(2, 2))\n            + (mat0.get(0, 3) * mat1.get(3, 2));\n        let r12 = (mat0.get(1, 0) * mat1.get(0, 2))\n            + (mat0.get(1, 1) * mat1.get(1, 2))\n            + (mat0.get(1, 2) * mat1.get(2, 2))\n            + (mat0.get(1, 3) * mat1.get(3, 2));\n        let r22 = (mat0.get(2, 0) * mat1.get(0, 2))\n            + (mat0.get(2, 1) * mat1.get(1, 2))\n            + (mat0.get(2, 2) * mat1.get(2, 2))\n            + (mat0.get(2, 3) * mat1.get(3, 2));\n        let r32 = (mat0.get(3, 0) * mat1.get(0, 2))\n            + (mat0.get(3, 1) * mat1.get(1, 2))\n            + (mat0.get(3, 2) * mat1.get(2, 2))\n            + (mat0.get(3, 3) * mat1.get(3, 2));\n        let r03 = (mat0.get(0, 0) * mat1.get(0, 3))\n            + (mat0.get(0, 1) * mat1.get(1, 3))\n            + (mat0.get(0, 2) * mat1.get(2, 3))\n            + (mat0.get(0, 3) * mat1.get(3, 3));\n        let r13 = (mat0.get(1, 0) * mat1.get(0, 3))\n            + (mat0.get(1, 1) * mat1.get(1, 3))\n            + (mat0.get(1, 2) * mat1.get(2, 3))\n            + (mat0.get(1, 3) * mat1.get(3, 3));\n        let r23 = (mat0.get(2, 0) * mat1.get(0, 3))\n            + (mat0.get(2, 1) * mat1.get(1, 3))\n            + (mat0.get(2, 2) * mat1.get(2, 3))\n            + (mat0.get(2, 3) * mat1.get(3, 3));\n        let r33 = (mat0.get(3, 0) * mat1.get(0, 3))\n            + (mat0.get(3, 1) * mat1.get(1, 3))\n            + (mat0.get(3, 2) * mat1.get(2, 3))\n            + (mat0.get(3, 3) * mat1.get(3, 3));\n\n        // NOW PUT ALL THE CALCULATED VALUES IN THE result MATRIX\n        result.set(r00, 0, 0);\n        result.set(r10, 1, 0);\n        result.set(r20, 2, 0);\n        result.set(r30, 3, 0);\n        result.set(r01, 0, 1);\n        result.set(r11, 1, 1);\n        result.set(r21, 2, 1);\n        result.set(r31, 3, 1);\n        result.set(r02, 0, 2);\n        result.set(r12, 1, 2);\n        result.set(r22, 2, 2);\n        result.set(r32, 3, 2);\n        result.set(r03, 0, 3);\n        result.set(r13, 1, 3);\n        result.set(r23, 2, 3);\n        result.set(r33, 3, 3);\n    }\n\n    export function projection(result : Matrix, nearZ : number, farZ : number, viewportWidth : number, viewportHeight : number, fovY : number) : void {\n        let aspectRatio = viewportWidth / viewportHeight;\n        let fieldOfViewY = this.math.degreesToRadians(fovY);\n        let fieldOfViewX = 2 * Math.atan(Math.tan(fieldOfViewY / 2) * aspectRatio);\n\n        // WE'LL USE THESE AS SHORTHAND FOR LOADING OUR MATRIX\n        let n = nearZ;\n        let f = farZ;\n        let r = Math.tan(fieldOfViewX / 2) * n;\n        let t = Math.tan(fieldOfViewY / 2) * n;\n\n        // 0-3\n        result.set(n / r, 0, 0);\n        result.set(0.0, 0, 1);\n        result.set(0.0, 0, 2);\n        result.set(0.0, 0, 3);\n        // 4-7\n        result.set(0.0, 1, 0);\n        result.set(n / t, 1, 1);\n        result.set(0.0, 1, 2);\n        result.set(0.0, 1, 3);\n        // 8-11\n        result.set(0.0, 2, 0);\n        result.set(0.0, 2, 1);\n        result.set((-(f + n)) / (f - n), 2, 2);\n        result.set((-2 * f * n) / (f - n), 2, 3);\n        // 12-15 \n        result.set(0.0, 3, 0);\n        result.set(0.0, 3, 1);\n        result.set(-1.0, 3, 2);\n        result.set(0.0, 3, 3);\n    }\n\n    export function rotate(result : Matrix, rotationVector : Vector3) : void {\n        // START WITH THE X-AXIS ROTATION\n        let xRotationMatrix = new Matrix(4, 4);\n        this.identity(xRotationMatrix);\n        let thetaX = rotationVector.getThetaX();\n        xRotationMatrix.set(Math.cos(thetaX), 1, 1);\n        xRotationMatrix.set(Math.sin(thetaX), 2, 1);\n        xRotationMatrix.set(-1 * Math.sin(thetaX), 1, 2);\n        xRotationMatrix.set(Math.cos(thetaX), 2, 2);\n\n        // START WITH THE Y-AXIS ROTATION\n        let yRotationMatrix = new Matrix(4, 4);\n        this.identity(yRotationMatrix);\n        let thetaY = rotationVector.getThetaY();\n        yRotationMatrix.set(Math.cos(thetaY), 0, 0);\n        yRotationMatrix.set(-1 * Math.sin(thetaY), 2, 0);\n        yRotationMatrix.set(Math.sin(thetaY), 0, 2);\n        yRotationMatrix.set(Math.cos(thetaY), 2, 2);\n\n        // START WITH THE Z-AXIS ROTATION\n        let zRotationMatrix = new Matrix(4, 4);\n        this.identity(zRotationMatrix);\n        let thetaZ = rotationVector.getThetaZ();\n        zRotationMatrix.set(Math.cos(thetaZ), 0, 0);\n        zRotationMatrix.set(Math.sin(thetaZ), 1, 0);\n        zRotationMatrix.set(-1 * Math.sin(thetaZ), 0, 1);\n        zRotationMatrix.set(Math.cos(thetaZ), 1, 1);\n\n        // START WITH THE X-AXIS ROTATION\n        let tempMatrix = new Matrix(4, 4);\n        this.identity(tempMatrix);\n        this.multiply(tempMatrix, xRotationMatrix, yRotationMatrix);\n        this.multiply(result, tempMatrix, zRotationMatrix);\n    }\n\n    export function scale(result : Matrix, scaleVector : Vector3) : void {\n        // START WITH THE IDENTITY MATRIX\n        this.identity(result, scaleVector);\n\n        // AND THEN LOAD IN THE TRANSLATION VALUES\n        result.set(scaleVector.getX(), 0, 0);\n        result.set(scaleVector.getY(), 1, 1);\n        result.set(scaleVector.getZ(), 2, 2);\n    }\n\n    export function transform(result : Vector3, mat : Matrix, vec : Vector3) : void {\n        result.setX((mat.get(0, 0) * vec.getX()) + (mat.get(0, 1) * vec.getY()) + (mat.get(0, 2) * vec.getZ()) + (mat.get(0, 3) * vec.getW()));\n        result.setY((mat.get(1, 0) * vec.getX()) + (mat.get(1, 1) * vec.getY()) + (mat.get(1, 2) * vec.getZ()) + (mat.get(1, 3) * vec.getW()));\n        result.setZ((mat.get(2, 0) * vec.getX()) + (mat.get(2, 1) * vec.getY()) + (mat.get(2, 2) * vec.getZ()) + (mat.get(2, 3) * vec.getW()));\n        result.setW((mat.get(3, 0) * vec.getX()) + (mat.get(3, 1) * vec.getY()) + (mat.get(3, 2) * vec.getZ()) + (mat.get(3, 3) * vec.getW()));\n    }\n\n    export function translate(result : Matrix, translationVector : Vector3) : void {\n        // START WITH THE IDENTITY MATRIX\n        this.identity(result);\n\n        // AND THEN LOAD IN THE TRANSLATION VALUES\n        result.set(translationVector.getX(), 0, 3);\n        result.set(translationVector.getY(), 1, 3);\n        result.set(translationVector.getZ(), 2, 3);\n    }\n\n    export function transpose(result : Matrix, mat : Matrix) : void {\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                let temp = mat.get(i, j);\n                result.set(temp, j, i);\n            }\n        }\n    }\n\n    export function view(result : Matrix, cameraPosition : Vector3, cameraOrientation : Vector3) : void {\n        let pitch = this.math.degreesToRadians(cameraOrientation.getThetaX());\n        let yaw = this.math.degreesToRadians(cameraOrientation.getThetaY());\n        let roll = this.math.degreesToRadians(cameraOrientation.getThetaZ());\n\n        // TO TRANSLATE\n        let translateVector = this.math.vectorMath.createPositionVector();\n        translateVector.set(-cameraPosition.getX(), -cameraPosition.getY(), -cameraPosition.getZ());\n        let translateMatrix = new Matrix(4, 4);\n        this.identity(translateMatrix);\n        this.translate(translateMatrix, translateVector);\n\n        // TO ROTATE\n        let rotateVector = this.math.vectorMath.createRotationVector();\n        rotateVector.set(-pitch, -yaw, -roll);\n        let rotateMatrix = new Matrix(4, 4);\n        this.rotate(rotateMatrix, rotateVector);\n\n        // NOW COMBINE THE 2 MATRICES\n        this.multiply(result, rotateMatrix, translateMatrix);\n    }\n\n    export function addVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        for (let i = 0; i < vec0.getSize(); i++) {\n            let total = vec0.getAt(i) + vec1.getAt(i);\n            result.setAt(i, total);\n        }\n    }\n\n    export function crossProduct(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        let result0 = (vec0.getY() * vec1.getZ())\n            - (vec1.getY() * vec0.getZ());\n        let result1 = (vec0.getZ() * vec1.getX())\n            - (vec1.getZ() * vec0.getX());\n        let result2 = (vec0.getX() * vec1.getY())\n            - (vec1.getX() * vec0.getY());\n        result.setX(result0);\n        result.setY(result1);\n        result.setZ(result2);\n    }\n\n    export function dotProduct(vec0 : Vector3, vec1 : Vector3) : number {\n        let resultX = vec0.getX() * vec1.getX();\n        let resultY = vec0.getY() * vec1.getY();\n        let resultZ = vec0.getZ() * vec1.getZ();\n        return resultX + resultY + resultZ;\n    }\n\n    export function multiplyVectors(result : Vector3, vec : Vector3, scalar : number) : void {\n        let vecX = vec.getX() * scalar;\n        let vecY = vec.getY() * scalar;\n        let vecZ = vec.getZ() * scalar;\n        result.setX(vecX);\n        result.setY(vecY);\n        result.setZ(vecZ);\n    }\n\n    export function normalize(result : Vector3, vec : Vector3) : void {\n        let xSquared = vec.getX() * vec.getX();\n        let ySquared = vec.getY() * vec.getY();\n        let zSquared = vec.getZ() * vec.getZ();\n        let distance = Math.sqrt(xSquared + ySquared + zSquared);\n        result.setX(vec.getX() / distance);\n        result.setY(vec.getY() / distance);\n        result.setZ(vec.getZ() / distance);\n    }\n\n    export function subtractVectors(result : Vector3, vec0 : Vector3, vec1 : Vector3) : void {\n        let resultX = vec0.getX() - vec1.getX();\n        let resultY = vec0.getY() - vec1.getY();\n        let resultZ = vec0.getZ() - vec1.getZ();\n        result.setX(resultX);\n        result.setY(resultY);\n        result.setZ(resultZ);\n    }\n}","/*\n * A Matrix is used for transforming points from local\n * coordinates to world coordinates.\n */\nexport class Matrix {\n    private mat : Float32Array;\n    private rows : number;\n    private columns : number;\n\n    public constructor(rows : number, columns : number) {\n        this.rows = rows;\n        this.columns = columns;\n        this.mat = new Float32Array(rows * columns);\n        for (let i = 0; i < (rows * columns); i++)\n            this.mat[i] = 0.0;\n    }\n\n    public getData() : Float32Array {\n        return this.mat;\n    }\n\n    public getRows() : number {\n        return this.rows;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getIndex (rows : number, columns : number) : number {\n        return (this.rows * columns) + rows;\n    }\n    \n    public get (row : number, column : number) : number {\n        let index = this.getIndex(row, column);\n        let valueToReturn = this.mat[index];\n        return valueToReturn;\n    }\n\n    public set (value : number, row : number, column : number) {\n        let index = this.getIndex(row, column);\n        this.mat[index] = value;\n    }\n    \n    public print () : void {\n        let maxWidth = 0;\n        for (let i = 0; i < 4; i++) {\n            for (let j = 0; j < 4; j++) {\n                let testNum = this.get(j, i) + \"\";\n                if (testNum.length > maxWidth) {\n                    maxWidth = testNum.length;\n                }\n            }\n        }\n        let text = \"[ \";\n        for (let i = 0; i < this.rows; i++) {\n            if (i > 0)\n                text += \"  \";\n            for (var j = 0; j < this.columns; j++) {\n                var numText = this.get(i, j) + \"\";\n                while (numText.length < maxWidth) {\n                    numText = \" \" + numText;\n                }\n                text += numText;\n                if (j < (this.columns - 1)) {\n                    text += \",\";\n                }\n                text += \" \";\n            }\n            if (i < (this.rows - 1)) {\n                text += \"\\n\";\n            }\n            text += \"]\";\n            console.log(text);\n        }\n    }\n}","/**\n * Vector3\n * \n * The Vector3 class can be used for any 2d or 3d point, vector, \n * or rotation (i.e. angles of orientation).\n */\nexport class Vector3 {\n    private vec : Float32Array;\n    private size : number;\n\n    public constructor() {\n        this.vec = new Float32Array(4);\n        for (let i = 0; i < 4; i++)\n            this.vec[i] = 0.0;\n        this.size = 4;\n    }\n\n    public getSize() : number {\n        return this.size;\n    }\n\n    public getAt(index : number) : number {\n        return this.vec[index];\n    }\n\n    public getX() : number {\n        return this.vec[0];\n    }\n\n    public getY() : number {\n        return this.vec[1];\n    }\n\n    public getZ() : number {\n        return this.vec[2];\n    }\n\n    public getW() : number {\n        return this.vec[3];\n    }\n\n    public getThetaX() : number {\n        return this.vec[0];\n    }\n\n    public getThetaY() : number {\n        return this.vec[1];\n    }\n\n    public getThetaZ() : number {\n        return this.vec[2];\n    }\n\n    public set(init0 : number, init1 : number, init2 : number, init3 : number) : void {\n        this.vec[0] = init0;\n        this.vec[1] = init1;\n        this.vec[2] = init2;\n        this.vec[3] = init3;\n    }\n\n    public setAt(index : number, value : number) : void {\n        this.vec[index] = value;\n    }\n\n    public setX(initX : number) : void {\n        this.vec[0] = initX;\n    }\n\n    public setY(initY : number) : void {\n        this.vec[1] = initY;\n    }\n\n    public setZ(initZ : number) : void {\n        this.vec[2] = initZ;\n    }\n\n    public setW(initW : number) : void {\n        this.vec[3] = initW;\n    }\n\n    public setThetaX(initThetaX : number) : void {\n        this.setX(initThetaX);\n    }\n\n    public setThetaY(initThetaY : number) : void {\n        this.setY(initThetaY);\n    }\n\n    public setThetaZ(initThetaZ : number) : void {\n        this.setZ(initThetaZ);\n    }\n\n    public print() : void {\n        let text = \"[\";\n        for (let i = 0; i < this.size; i++) {\n            text += this.vec[i];\n            if (i < (this.size - 1)) {\n                text += \", \";\n            }\n        }\n        text += \"]\";\n        console.log(text);\n    }\n}","import { Vector3 } from \"./Vector3\";\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\";\n\n/**\n * boudingCircle \n * \n * This class decorates the vector3 class using the fields to store x, y, and radius of a circle.\n * \n */\nexport class BoundingCircle {\n    private vec3: Vector3;\n\n    public constructor(sprite: AnimatedSprite) {\n        this.vec3 = new Vector3();\n\n        this.vec3.setX(sprite.getPosition().getX() + (sprite.getSpriteType().getSpriteWidth() / 2));\n        this.vec3.setY(sprite.getPosition().getY() - (sprite.getSpriteType().getSpriteHeight() / 2));\n\n        let spriteWidth: number = sprite.getSpriteType().getSpriteWidth();\n        let spriteHeight: number = sprite.getSpriteType().getSpriteHeight();\n\n        this.vec3.setZ(Math.sqrt((spriteWidth / 2 * spriteWidth / 2) + (spriteHeight / 2 * spriteHeight / 2)));\n    }\n\n    public getRadius(): number {\n        return this.vec3.getZ();\n    }\n\n    public getX(): number {\n        return this.vec3.getX();\n    }\n\n    public getY(): number {\n        return this.vec3.getY();\n    }\n\n    public setRadius(spriteWidth: number, spriteHeight: number): void {\n        this.vec3.setZ(Math.sqrt((spriteWidth / 2 * spriteWidth / 2) + (spriteHeight / 2 * spriteHeight / 2)));\n    }\n\n    public setX(x: number): void {\n        this.vec3.setX(x);\n    }\n\n    public setY(y: number): void {\n        this.vec3.setY(y);\n    }\n\n    public intersects(bv2: BoundingCircle): boolean {\n\n        let deltaX: number = this.getX() - bv2.getX();\n        let deltaY: number = this.getY() - bv2.getY();\n        let m: number = Math.sqrt((deltaX * deltaX) + (deltaY * deltaY));\n\n        if (m < this.getRadius() + bv2.getRadius()) {\n            return true;\n        }\n        return false;\n    }\n\n    public print(): void {\n        let text = \"[X_POSITION: \" + this.vec3.getX() + \", Y_POSITION: \" + this.vec3.getY() + \", RADIUS: \" + this.vec3.getZ() + \"]\";\n        console.log(text);\n    }\n}","import { SceneGraph } from '../scene/SceneGraph'\nimport { AnimatedSprite } from '../scene/sprite/AnimatedSprite'\nimport { SceneObject } from '../scene/SceneObject';\nimport { Vector3 } from '../math/Vector3';\nimport { BoundingCircle } from '../math/boundingCircle';\nimport { State } from '../AI/AIBehavior';\n\nexport class GamePhysics {\n    constructor() {\n\n    }\n\n    update(sceneGraph: SceneGraph): void {\n        // UPDATE ALL OBJECT POSITIONS ACCORDING TO THEIR VELOCITIES\n        // BUT MAKE SURE TO PERFORM COLLISION DETECTION AS WELL\n        // NOTE, FOR THIS YOU SHOULD MAKE SURE EACH SCENE OBJECT\n        // HAS A BOUNDING VOLUME LIKE EITHER AN AABB OR A CIRCLE\n\n        let nonPlayerSprites: AnimatedSprite[] = sceneGraph.spritesInRange(\n            sceneGraph.getPlayer().getPosition().getX(),\n            sceneGraph.getPlayer().getPosition().getY(),\n            sceneGraph.getPlayer().getSpriteType().getSpriteWidth());\n        nonPlayerSprites.splice(nonPlayerSprites.indexOf(sceneGraph.getPlayer()), 1);\n\n        let playerBoundingVolume: BoundingCircle = new BoundingCircle(sceneGraph.getPlayer());\n        let spriteBoundingCircle: BoundingCircle = new BoundingCircle(sceneGraph.getPlayer());\n\n        nonPlayerSprites.forEach(sprite => {\n            spriteBoundingCircle.setX(sprite.getPosition().getX() - sprite.getSpriteType().getSpriteWidth() / 2);\n            spriteBoundingCircle.setY(sprite.getPosition().getY() + sprite.getSpriteType().getSpriteHeight() / 2);\n            spriteBoundingCircle.setRadius(sprite.getSpriteType().getSpriteWidth() / 2, sprite.getSpriteType().getSpriteHeight() / 2);\n            // These bounding Circles are not being used becuase boundign boxes worked better since my sprites only rotate 90 degrees\n\n            if (sprite.getSpriteType().getSpriteSheetTexture().webGLTextureId == 4) {\n                if (sprite.getState() != \"DYING\" && sprite.getState() != \"DEAD\") {\n                    sprite.setState(\"DYING\");\n                    sprite.kill();\n                    if (sprite ? sprite.hasAI : false) {\n                        sprite.getAI().setBehavior([State.NONE]);\n                    }\n                }\n            } else if (sprite.getSpriteType().getSpriteSheetTexture().webGLTextureId == 5) {\n                switch (sprite.getDirection()) {\n                    case 0:\n                        sprite.getPosition().setY(sprite.getPosition().getY() - 40);\n                        break;\n                    case 90:\n                        sprite.getPosition().setX(sprite.getPosition().getX() - 40);\n                        break;\n                    case 180:\n                        sprite.getPosition().setY(sprite.getPosition().getY() + 40);\n                        break;\n                    case 270:\n                        sprite.getPosition().setX(sprite.getPosition().getX() + 40);\n                        break;\n                    default:\n                        // console.error(\"illegal sprite direction\", sprite.getDirection());\n                        break;\n                }\n            }\n\n\n        });\n\n\n    }\n}","/*\n * This class renders text to a canvas, updated each frame.\n */\nexport class TextToRender {\n    public id : string;\n    public text : string;\n    public x : number;\n    public y : number;\n    public update : Function;\n    public fontFamily : string;\n    public fontSize : number;\n    public fontColor : string;\n    public properties : Map<string, object>;\n\n    public constructor(initId : string, initText : string, initX : number, initY : number, initUpdate : Function) {\n        this.id = initId;\n        this.text = initText;\n        this.x = initX;\n        this.y = initY;\n        this.update = initUpdate;\n        this.fontFamily = \"\";\n        this.fontSize = 0;\n        this.fontColor = \"\";\n        this.properties = new Map();\n    }\n}\n\nexport class TextRenderer {\n    private textToRender : Array<TextToRender>;\n    private textCanvas : HTMLCanvasElement;\n    private textCanvasWidth : number;\n    private textCanvasHeight : number;\n    private textCtx : CanvasRenderingContext2D;\n    private defaultFontFamily : string;\n    private defaultFontSize : number;\n    private defaultFontColor : string;\n\n    public constructor(textCanvasId : string, initFontFamily : string, initFontSize : number, initFontColor : string) {\n        this.textToRender = new Array();\n        this.textCanvas = <HTMLCanvasElement>document.getElementById(textCanvasId);\n        this.textCanvas.width = window.innerWidth;\n        this.textCanvas.height = window.innerHeight;\n        this.textCanvasWidth = this.textCanvas.width;\n        this.textCanvasHeight = this.textCanvas.height;\n        this.textCtx = this.textCanvas.getContext(\"2d\");\n        this.defaultFontFamily = initFontFamily;\n        this.defaultFontSize = initFontSize;\n        this.defaultFontColor = initFontColor;\n    }\n    \n    public addTextToRender(textToAdd : TextToRender) : void {\n        textToAdd.fontFamily = this.defaultFontFamily;\n        textToAdd.fontSize = this.defaultFontSize;\n        textToAdd.fontColor = this.defaultFontColor;\n        this.textToRender.push(textToAdd);\n    }\n\n    public clear() : void {\n        this.textToRender = [];\n    }\n\n    public getCanvasWidth() : number {\n        return this.textCanvasWidth;\n    }\n\n    public getCanvasHeight() : number {\n        return this.textCanvasHeight;\n    }\n\n    public render() : void {\n        this.textCtx.clearRect(0, 0, this.textCanvas.width, this.textCanvas.height);\n        for (var i = 0; i < this.textToRender.length; i++) {\n            var textToRender = this.textToRender[i];\n            textToRender.update();\n            this.textCtx.font = \"\" + textToRender.fontSize + \"px \" + textToRender.fontFamily;\n            this.textCtx.fillStyle = textToRender.fontColor;\n            this.textCtx.fillText(textToRender.text, textToRender.x, textToRender.y);\n        }\n    }\n}","import { WebGLGameShader } from './WebGLGameShader'\nimport { Matrix } from '../math/Matrix'\nimport { Vector3 } from '../math/Vector3'\n\nexport abstract class WebGLGameRenderingComponent {\n    protected readonly A_POSITION = \"a_Position\";\n    protected readonly A_TEX_COORD = \"a_TexCoord\";\n    protected readonly U_MESH_TRANSFORM = \"u_MeshTransform\";\n    protected readonly U_TEX_COORD_FACTOR = \"u_TexCoordFactor\";\n    protected readonly U_TEX_COORD_SHIFT = \"u_TexCoordShift\";\n    protected readonly U_SAMPLER = \"u_Sampler\";\n    protected readonly NUM_VERTICES = 4;\n    protected readonly FLOATS_PER_VERTEX = 2;\n    protected readonly FLOATS_PER_TEXTURE_COORDINATE = 2;\n    protected readonly TOTAL_BYTES = 16;\n    protected readonly VERTEX_POSITION_OFFSET = 0;\n    protected readonly TEXTURE_COORDINATE_OFFSET = 8;\n    protected readonly INDEX_OF_FIRST_VERTEX = 0;\n\n    // THESE WILL BE PROVIDED CUSTOMLY AFTER CONSTRUCTION DURING init\n    protected shader: WebGLGameShader;\n    protected vertexDataBuffer: WebGLBuffer;\n    protected webGLAttributeLocations: Map<string, GLuint>;\n    protected webGLUniformLocations: Map<string, WebGLUniformLocation>;\n\n    // WE'LL USE THESE FOR TRANSOFMRING OBJECTS WHEN WE DRAW THEM\n    protected meshTransform: Matrix;\n    protected meshTranslate: Vector3;\n    protected meshRotate: Vector3;\n    protected meshScale: Vector3;\n\n    constructor() {\n        // WE'LL MANAGE THESE FOR OUR WebGL SHADERS\n        this.webGLAttributeLocations = new Map();\n        this.webGLUniformLocations = new Map();\n\n        // WE'LL USE THESE FOR TRANSLATING, ROTATING, AND SCALING THE MESH\n        this.meshTransform = new Matrix(4, 4);\n        this.meshTranslate = new Vector3();\n        this.meshRotate = new Vector3();\n        this.meshScale = new Vector3();\n    }\n\n    public init(webGL: WebGLRenderingContext,\n        vertexShaderSource: string,\n        fragmentShaderSource: string,\n        renderSetupData: object): void {\n        // FIRST WE NEED TO MAKE THE SHADER\n        this.shader = new WebGLGameShader();\n        this.shader.init(webGL, vertexShaderSource, fragmentShaderSource);\n\n        // CREATE THE BUFFER ON THE GPU\n        this.vertexDataBuffer = webGL.createBuffer();\n\n        // BIND THE BUFFER TO BE VERTEX DATA\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexDataBuffer);\n\n        // MAKE THE MESH DATA OURSELVES IN A CHILD CLASS\n        let meshVertexData: Float32Array = this.getVertexData(renderSetupData);\n\n        // AND SEND THE DATA TO THE BUFFER WE CREATED ON THE GPU\n        webGL.bufferData(webGL.ARRAY_BUFFER, meshVertexData, webGL.STATIC_DRAW);\n\n        // SETUP THE SHADER ATTRIBUTES AND UNIFORMS\n        this.loadAttributeLocations(webGL, this.getShaderAttributeNames());\n        this.loadUniformLocations(webGL, this.getShaderUniformNames());\n    }\n\n    public abstract getVertexData(renderData: object): Float32Array;\n    public abstract getShaderAttributeNames(): string[];\n    public abstract getShaderUniformNames(): string[];\n\n    /**\n     * This function loads all the attribute data values so that we can\n     * retrieve them later when it is time to render. Note that this function\n     * can only be called after the shader program has been created.\n     */\n    protected loadAttributeLocations(webGL: WebGLRenderingContext, attributeLocationNames: Array<string>) {\n        for (var i = 0; i < attributeLocationNames.length; i++) {\n            let locationName: string = attributeLocationNames[i];\n            let location: GLuint = webGL.getAttribLocation(this.shader.getProgram(), locationName);\n            this.webGLAttributeLocations.set(locationName, location);\n        }\n    }\n\n    /**\n     * This function loads all the uniform data values so that we can\n     * retrieve them later when it is time to render. Note that this function\n     * can only be called after the shader program has been created.\n     */\n    protected loadUniformLocations(webGL: WebGLRenderingContext, uniformLocationNames: Array<string>) {\n        for (let i: number = 0; i < uniformLocationNames.length; i++) {\n            let locationName: string = uniformLocationNames[i];\n            let location: WebGLUniformLocation = webGL.getUniformLocation(this.shader.getProgram(), locationName);\n            this.webGLUniformLocations.set(locationName, location);\n        }\n    }\n}","/*\n * This serves as the subsystem that manages all game rendering.\n */\nimport { TextRenderer } from './TextRenderer'\nimport { WebGLGameTiledLayerRenderer } from './WebGLGameTiledLayerRenderer'\nimport { WebGLGameSpriteRenderer } from './WebGLGameSpriteRenderer'\nimport { WebGLGameTexture } from './WebGLGameTexture';\nimport { AnimatedSprite } from '../scene/sprite/AnimatedSprite'\nimport { TiledLayer } from '../scene/tiles/TiledLayer'\nimport { Viewport } from '../scene/Viewport'\n\n\nexport class WebGLGameRenderingSystem {\n    private renderingCanvas: HTMLCanvasElement;\n    private webGL: WebGLRenderingContext;\n    private canvasWidth: number;\n    private canvasHeight: number;\n\n    // OUR GAMES RENDER THREE DIFFERENT TYPES OF THINGS\n    private tiledLayerRenderer: WebGLGameTiledLayerRenderer;\n    private spriteRenderer: WebGLGameSpriteRenderer;\n    private textRenderer: TextRenderer;\n\n    public constructor( renderingCanvasId: string,\n                        textCanvasId: string) {\n        // FIRST SETUP webGL\n        this.renderingCanvas = <HTMLCanvasElement>document.getElementById(renderingCanvasId);\n        this.renderingCanvas.width = window.innerWidth;\n        this.renderingCanvas.height = window.innerHeight;\n        this.canvasWidth = this.renderingCanvas.width;\n        this.canvasHeight = this.renderingCanvas.height;\n        this.webGL = this.renderingCanvas.getContext(\"webgl\");\n\n        // IF THE USER'S MACHINE/BROWSER DOESN'T SUPPORT\n        // WebGL THEN THERE'S NO POINT OF GOING ON\n        if (!this.webGL) {\n            // PROVIDE SOME FEEDBACK THAT WebGL WON'T WORK BECAUSE\n            // THE USER'S' GRAPHICS CARD IS FOR THE BIRDS\n            console.error(\"WebGL is not supported by this device\");\n\n            // AND END INITIALIZATION\n            return;\n        }\n\n        // WebGL IS SUPPORTED, SO INIT EVERYTHING THAT USES IT\n\n        // MAKE THE CLEAR COLOR BLACK\n        this.setClearColor(0.0, 0.0, 0.0, 1.0);\n\n        // ENABLE DEPTH TESTING\n        this.webGL.disable(this.webGL.DEPTH_TEST);\n        this.webGL.enable(this.webGL.BLEND);\n        this.webGL.blendFunc(this.webGL.SRC_ALPHA, this.webGL.ONE_MINUS_SRC_ALPHA);\n\n        // TURN ON BACKFACE CULLING\n        this.webGL.enable(this.webGL.CULL_FACE);\n\n        // THIS SPECIFIES THAT WE'RE USING THE ENTIRE CANVAS\n        this.webGL.viewport(0, 0, this.canvasWidth, this.canvasHeight);\n\n        // MAKE THE TILED LAYER RENDERER\n        this.tiledLayerRenderer = new WebGLGameTiledLayerRenderer();\n\n        // MAKE THE SPRITE RENDERER\n        this.spriteRenderer = new WebGLGameSpriteRenderer();\n\n        // THIS WILL STORE OUR TEXT\n        this.textRenderer = new TextRenderer(textCanvasId, \"serif\", 18, \"#FFFF00\");\n    }\n\n    public getTextureConstant(id: number): number {\n        // WE ONLY ALLOW FOR 10 TEXTURES TO BE PUT ON THE GPU\n        switch (id) {\n            case 0: return this.webGL.TEXTURE0;\n            case 1: return this.webGL.TEXTURE1;\n            case 2: return this.webGL.TEXTURE2;\n            case 3: return this.webGL.TEXTURE3;\n            case 4: return this.webGL.TEXTURE4;\n            case 5: return this.webGL.TEXTURE5;\n            case 6: return this.webGL.TEXTURE6;\n            case 7: return this.webGL.TEXTURE7;\n            case 8: return this.webGL.TEXTURE8;\n            default: return this.webGL.TEXTURE9;\n        }\n    }\n\n    public getWebGL(): WebGLRenderingContext {\n        return this.webGL;\n    }\n\n    public getTiledLayerRenderer(): WebGLGameTiledLayerRenderer {\n        return this.tiledLayerRenderer;\n    }\n\n    public getSpriteRenderer(): WebGLGameSpriteRenderer {\n        return this.spriteRenderer;\n    }\n\n    public getTextRenderer(): TextRenderer {\n        return this.textRenderer;\n    }\n\n    public initWebGLTexture(textureToInit: WebGLGameTexture, textureId: number, image: HTMLImageElement, callback: Function): void {\n        textureToInit.width = image.width;\n        textureToInit.height = image.height;\n\n        // CREATE A WebGL TEXTURE ON THE GPU\n        textureToInit.webGLTexture = this.webGL.createTexture();\n        textureToInit.webGLTextureId = textureId;\n\n        // FLIP THE IMAGE'S y-AXIS\n        //webGL.pixelStorei(webGL.UNPACK_FLIP_Y_WEBGL, 1);\n\n        // ACTIVATE THE WebGL TEXTURE ON THE GPU\n        //let textureNumName : string = \"TEXTURE\" + textureId;\n        let textureNameConstant: number = this.getTextureConstant(textureId);\n        this.webGL.activeTexture(textureNameConstant);\n\n        // BIND THE TEXTURE TO A 2D TYPE\n        this.webGL.bindTexture(this.webGL.TEXTURE_2D, textureToInit.webGLTexture);\n\n        // SPECIFY RENDERING SETTINGS\n        this.webGL.texParameteri(this.webGL.TEXTURE_2D, this.webGL.TEXTURE_MIN_FILTER, this.webGL.LINEAR);\n\n        // SET THE IMAGE FOR THE TEXTURE\n        this.webGL.texImage2D(this.webGL.TEXTURE_2D, 0, this.webGL.RGBA, this.webGL.RGBA, this.webGL.UNSIGNED_BYTE, image);\n\n        // KEEP IT FOR WHEN WE RENDER\n        callback();\n    }\n\n    public setClearColor(r: number, g: number, b: number, a: number): void {\n        this.webGL.clearColor(r, g, b, a);\n    }\n\n    public render(  viewport : Viewport,\n                    tiledLayers: Array<TiledLayer>,\n                    visibleSprites: Array<AnimatedSprite>): void {\n        // CLEAR THE CANVAS\n        this.webGL.clear(this.webGL.COLOR_BUFFER_BIT | this.webGL.DEPTH_BUFFER_BIT);\n\n        // RENDER THE TILED LAYER FIRST\n        this.tiledLayerRenderer.render(this.webGL, viewport, tiledLayers);\n\n        // RENDER THE SPRITES ON ONE CANVAS\n        this.spriteRenderer.render(this.webGL, viewport, visibleSprites);\n\n        // THEN THE TEXT ON ANOTHER OVERLAPPING CANVAS\n        this.textRenderer.render();\n    }\n}","/*\n * This is a wrapper class for a WebGLProgram, i.e. a shader for custom rendering\n * using WebGL's programmable pipeline.\n */\nexport class WebGLGameShader {\n    private program : WebGLProgram;\n    private vertexShader : WebGLShader;\n    private fragmentShader : WebGLShader;\n\n    public constructor() {}\n\n    public getProgram() : WebGLProgram {\n        return this.program;\n    }\n\n    public init(webGL : WebGLRenderingContext, vSource : string, fSource : string) : void {\n        this.vertexShader = <WebGLShader>this.createShader(webGL, webGL.VERTEX_SHADER, vSource);\n        this.fragmentShader = <WebGLShader>this.createShader(webGL, webGL.FRAGMENT_SHADER, fSource);\n        this.program = this.createShaderProgram(webGL, this.vertexShader, this.fragmentShader);\n    }\n\n    public createShader(webGL : WebGLRenderingContext, type : number, source : string) : WebGLShader {\n        // MAKE A NEW SHADER OBJECT, LOAD IT'S SOURCE, AND COMPILE IT\n        var shader = webGL.createShader(type);\n        webGL.shaderSource(shader, source);\n        webGL.compileShader(shader);\n\n        // DID IT COMPILE?\n        var success = webGL.getShaderParameter(shader, webGL.COMPILE_STATUS);\n        if (success) {\n            return shader;\n        }\n\n        // DISASTER\n        console.log(webGL.getShaderInfoLog(shader));\n        webGL.deleteShader(shader);\n        return null;\n    }\n\n    public createShaderProgram(webGL : WebGLRenderingContext, vShader : WebGLShader, fShader : WebGLShader) : WebGLProgram {\n        // MAKE THE GLSL SHADER PROGRAM\n        let programToCreate = webGL.createProgram();\n\n        // LINK THE VERT AND FRAG\n        webGL.attachShader(programToCreate, vShader);\n        webGL.attachShader(programToCreate, fShader);\n\n        // NOW WE CAN LINK THE SHADER PROGRAM\n        webGL.linkProgram(programToCreate);\n        let linked : boolean = webGL.getProgramParameter(programToCreate, webGL.LINK_STATUS);\n\n        // IS IT LINKED?\n        if (!linked) {\n            // DISASTER\n            let errorFeedback : string = webGL.getProgramInfoLog(programToCreate);\n            console.log(errorFeedback);\n\n            // DISASTER\n            console.log(webGL.getProgramInfoLog(programToCreate));\n            webGL.deleteProgram(programToCreate);\n        }\n        return programToCreate;\n    }\n}","import { WebGLGameRenderingComponent } from './WebGLGameRenderingComponent'\nimport { MathUtilities } from '../math/MathUtilities'\nimport { AnimatedSprite } from '../scene/sprite/AnimatedSprite'\nimport { AnimatedSpriteType } from '../scene/sprite/AnimatedSpriteType'\nimport { WebGLGameTexture } from './WebGLGameTexture'\nimport { Viewport } from '../scene/Viewport'\nimport { Vector3 } from '../math/Vector3'\n\nexport class WebGLGameSpriteRenderer extends WebGLGameRenderingComponent {\n\n    public constructor() {\n        super();\n    }\n\n    public getVertexData(): Float32Array {\n        return new Float32Array([\n            -0.5, 0.5, 0.0, 0.0,\n            -0.5, -0.5, 0.0, 1.0,\n            0.5, 0.5, 1.0, 0.0,\n            0.5, -0.5, 1.0, 1.0\n        ]);\n    }\n    public getShaderAttributeNames(): string[] {\n        return [this.A_POSITION, this.A_TEX_COORD];\n    }\n    public getShaderUniformNames(): string[] {\n        return [this.U_MESH_TRANSFORM, this.U_SAMPLER, this.U_TEX_COORD_FACTOR, this.U_TEX_COORD_SHIFT];\n    }\n\n    public render(webGL: WebGLRenderingContext,\n        viewport: Viewport,\n        visibleSprites: Array<AnimatedSprite>): void {\n        // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\n        let shaderProgramToUse = this.shader.getProgram();\n        webGL.useProgram(shaderProgramToUse);\n\n        // AND THEN RENDER EACH ONE\n        for (let sprite of visibleSprites) {\n            this.renderAnimatedSprite(webGL, viewport, sprite);\n        }\n    }\n\n    private renderAnimatedSprite(webGL: WebGLRenderingContext,\n        viewport: Viewport,\n        sprite: AnimatedSprite): void {\n        // YOU'LL NEED TO UPDATE THIS METHOD TO MAKE SURE SPRITES SCROLL AND ROTATE\n\n        let canvasWidth: number = webGL.canvas.width;\n        let canvasHeight: number = webGL.canvas.height;\n        let spriteType: AnimatedSpriteType = sprite.getSpriteType();\n        let texture: WebGLGameTexture = spriteType.getSpriteSheetTexture();\n\n        // CALCULATE HOW MUCH TO TRANSLATE THE QUAD PER THE SPRITE POSITION\n        let spriteWidth: number = spriteType.getSpriteWidth();\n        let spriteHeight: number = spriteType.getSpriteHeight();\n        let spriteXInPixels: number = sprite.getPosition().getX() + (spriteWidth / 2) - (viewport.getX());\n        let spriteYInPixels: number = sprite.getPosition().getY() + (spriteHeight / 2) + (viewport.getY());\n        // if(sprite.getIgnoreViewport() == false){\n        //     spriteXInPixels -= viewport.getX();\n        //     spriteYInPixels += viewport.getY();\n        // }\n        let spriteXTranslate: number = (spriteXInPixels - (canvasWidth / 2)) / (canvasWidth / 2);\n        let spriteYTranslate: number = (spriteYInPixels - (canvasHeight / 2)) / (canvasHeight / 2);\n        this.meshTranslate.setX(spriteXTranslate);\n        this.meshTranslate.setY(-spriteYTranslate);\n\n\n\n        var tempRotation: number = sprite.getDirection();\n        var rotationDegrees: number = tempRotation * (Math.PI / 180);\n        var rotationSin: number = Math.sin(rotationDegrees);\n        var rotationCos: number = Math.cos(rotationDegrees);\n\n\n        // CALCULATE HOW MUCH TO SCALE THE QUAD PER THE SPRITE SIZE\n        let defaultWidth: number = canvasWidth;\n        let defaultHeight: number = canvasHeight;\n        let scaleX: number = 2 * spriteWidth / defaultWidth;\n        let scaleY: number = 2 * spriteHeight / defaultHeight;\n        let flipAngleWidth = Math.atan(defaultWidth / defaultHeight) * (180 / Math.PI);\n        let filpAngleHeight = Math.atan(defaultHeight / defaultWidth) * (180 / Math.PI);\n        // console.log(flipAngle);\n        // console.log(filpAngle2);\n        // console.log(defaultHeight);\n        // console.log(defaultWidth);\n        // let scaleX: number;\n        // let scaleY: number;\n\n\n\n        // let otherRotation: number = tempRotation;\n        // // if (tempRotation > 180) {\n        // //     otherRotation -= 180;\n        // // }\n\n        // <testing>\n        // rotationDegrees %= 90;\n\n        // if (rotationDegrees <= flipAngleWidth) {\n        //     scaleX = 2 * spriteWidth / (2 * ((defaultWidth / 2) / Math.cos(rotationDegrees)));\n        // } else {\n        //     scaleX = 2 * spriteWidth / (2 * ((defaultHeight / 2) / Math.cos(90 - rotationDegrees)));\n        // }\n\n        // if (rotationDegrees <= filpAngleHeight) {\n        //     scaleY = 2 * spriteHeight / (2 * ((defaultHeight / 2) / Math.cos(rotationDegrees)));\n        // } else {\n        //     scaleY = 2 * spriteWidth / (2 * ((defaultWidth / 2) / Math.cos(90 - rotationDegrees)))\n        // }\n\n        // this.meshScale.set(scaleX, scaleY, 0.0, 0.0);\n        // </Testing>\n\n        // if (otherRotation >= 0 && otherRotation <= flipAngle) {\n        //     scaleX = 2 * spriteWidth / (2 * ((defaultWidth / 2) / Math.cos(rotationDegrees)));\n        //     scaleY = 2 * spriteHeight / (2 * ((defaultHeight / 2) / Math.cos(rotationDegrees)));\n        // } else if (otherRotation > flipAngle && otherRotation < 90) {\n        //     scaleY = 2 * spriteWidth / (2 * ((defaultHeight / 2) / Math.cos((Math.PI / 2) - rotationDegrees)));\n        //     scaleX = 2 * spriteHeight / (2 * ((defaultHeight / 2) / Math.cos(rotationDegrees)));\n        // } else if (otherRotation >= 90 && otherRotation <= filpAngle2 + 90) {\n        //     scaleY = 2 * spriteWidth / (2 * ((defaultHeight / 2) / Math.cos((Math.PI) - rotationDegrees)));\n        //     scaleX = 2 * spriteHeight / (2 * ((defaultHeight / 2) / Math.cos((Math.PI / 2) - (Math.PI) - rotationDegrees)));\n        // } else {\n        //     scaleX = 2 * spriteWidth / (2 * ((defaultWidth / 2) / Math.cos((Math.PI) - rotationDegrees)));\n        //     scaleY = 2 * spriteHeight / (2 * ((defaultHeight / 2) / Math.cos((Math.PI) - rotationDegrees)));\n        // }\n\n\n        this.meshScale.set(Math.abs(rotationCos * scaleX) + Math.abs(rotationSin * scaleY), Math.abs(rotationCos * scaleY) + Math.abs(rotationSin * scaleX), 0.0, 0.0);\n\n        this.meshRotate.set(0.0, 0.0, tempRotation * 0.0174533, 0.0); // rotate on z axis\n\n\n        // @todo - COMBINE THIS WITH THE ROTATE AND SCALE VALUES FROM THE SPRITE\n        MathUtilities.identity(this.meshTransform);\n        MathUtilities.model(this.meshTransform, this.meshTranslate, this.meshRotate, this.meshScale);\n\n        // FIGURE OUT THE TEXTURE COORDINATE FACTOR AND SHIFT\n        let texCoordFactorX: number = spriteWidth / texture.width;\n        let texCoordFactorY: number = spriteHeight / texture.height;\n        let spriteLeft: number = sprite.getLeft();\n        let spriteTop: number = sprite.getTop();\n        let texCoordShiftX: number = spriteLeft / texture.width;\n        let texCoordShiftY: number = spriteTop / texture.height;\n\n        // USE THE ATTRIBUTES\n        webGL.bindBuffer(webGL.ARRAY_BUFFER, this.vertexDataBuffer);\n        webGL.bindTexture(webGL.TEXTURE_2D, texture.webGLTexture);\n\n        // HOOK UP THE ATTRIBUTES\n        let a_PositionLocation: GLuint = this.webGLAttributeLocations.get(this.A_POSITION);\n        webGL.vertexAttribPointer(a_PositionLocation, this.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, this.TOTAL_BYTES, this.VERTEX_POSITION_OFFSET);\n        webGL.enableVertexAttribArray(a_PositionLocation);\n        let a_TexCoordLocation: GLuint = this.webGLAttributeLocations.get(this.A_TEX_COORD);\n        webGL.vertexAttribPointer(a_TexCoordLocation, this.FLOATS_PER_TEXTURE_COORDINATE, webGL.FLOAT, false, this.TOTAL_BYTES, this.TEXTURE_COORDINATE_OFFSET);\n        webGL.enableVertexAttribArray(a_TexCoordLocation);\n\n        // USE THE UNIFORMS\n        let u_MeshTransformLocation: WebGLUniformLocation = this.webGLUniformLocations.get(this.U_MESH_TRANSFORM);\n        webGL.uniformMatrix4fv(u_MeshTransformLocation, false, this.meshTransform.getData());\n\n        let u_SamplerLocation: WebGLUniformLocation = this.webGLUniformLocations.get(this.U_SAMPLER);\n        webGL.uniform1i(u_SamplerLocation, texture.webGLTextureId);\n\n        let u_TexCoordFactorLocation: WebGLUniformLocation = this.webGLUniformLocations.get(this.U_TEX_COORD_FACTOR);\n        webGL.uniform2f(u_TexCoordFactorLocation, texCoordFactorX, texCoordFactorY);\n\n        let u_TexCoordShiftLocation: WebGLUniformLocation = this.webGLUniformLocations.get(this.U_TEX_COORD_SHIFT);\n        webGL.uniform2f(u_TexCoordShiftLocation, texCoordShiftX, texCoordShiftY);\n\n        // Rotation\n        // let u_RotationLocation: WebGLUniformLocation = this.webGLAttributeLocations.get(this.U_ROTATION);\n        // webGL.uniform2fv(u_RotationLocation, rotation);\n\n\n        // DRAW THE SPRITE AS A TRIANGLE STRIP USING 4 VERTICES, STARTING AT THE START OF THE ARRAY (index 0)\n        webGL.drawArrays(webGL.TRIANGLE_STRIP, this.INDEX_OF_FIRST_VERTEX, this.NUM_VERTICES);\n    }\n}","export class WebGLGameTexture {\n    public webGLTextureId: number;\n    public webGLTexture: WebGLTexture;\n    public image: HTMLImageElement;\n    public width : number;\n    public height : number;\n}","import { MathUtilities } from \"../math/MathUtilities\"\nimport { TiledLayer } from \"../scene/tiles/TiledLayer\"\nimport { TileSet } from \"../scene/tiles/TileSet\"\nimport { WebGLGameRenderingComponent } from './WebGLGameRenderingComponent'\nimport { WebGLGameTexture } from './WebGLGameTexture'\nimport { Viewport } from '../scene/Viewport'\n\nexport class WebGLGameTiledLayerRenderer extends WebGLGameRenderingComponent {\n    public constructor() {\n        super();\n    }\n\n    /**\n     * This function generates the array of attribute data needed to \n     * render our TiledLayer and puts it in the tiled layer argument.\n     */\n    public generateVertexData(tiledLayer: TiledLayer): Float32Array {\n        let someNumberYouHaveToDetermine : number = 4;\n        let dataToFill = [someNumberYouHaveToDetermine];\n        let vertexData: Float32Array = new Float32Array(dataToFill);\n        return vertexData;\n    }\n\n    public getVertexData(renderSetupData: object): Float32Array {\n        // WE WILL NEED THIS TO KNOW HOW LARGE TO MAKE OUR VERTEX DATA BUFFER\n        let tiledLayers: Array<TiledLayer> = <Array<TiledLayer>>renderSetupData;\n        let tiledLayer: TiledLayer = tiledLayers[0];\n        return this.generateVertexData(tiledLayer);\n    }\n\n    public getShaderAttributeNames(): string[] {\n        // YOU'LL NEED TO DEFINE THIS METHOD\n        return [];\n    }\n\n    public getShaderUniformNames(): string[] {\n        // YOU'LL NEED TO DEFINE THIS METHOD\n        return [];\n    }\n\n    public render(  webGL: WebGLRenderingContext,\n                    viewport : Viewport,\n                    tiledLayers: Array<TiledLayer>): void {\n\n            // SELECT THE ANIMATED SPRITE RENDERING SHADER PROGRAM FOR USE\n        let shaderProgramToUse = this.shader.getProgram();\n        webGL.useProgram(shaderProgramToUse);\n\n        // AND THEN RENDER EACH LAYER\n        for (let tiledLayer of tiledLayers) {\n            this.renderTiledLayer(webGL, viewport, tiledLayer);\n        }\n    }\n\n    private renderTiledLayer(\n        webGL: WebGLRenderingContext,\n        viewport : Viewport,\n        tiledLayer: TiledLayer) {\n            // YOU'LL NEED TO DEFINE THIS METHOD\n    }\n}","import { SceneObject } from './SceneObject'\nimport { AnimatedSprite } from './sprite/AnimatedSprite'\nimport { TiledLayer } from './tiles/TiledLayer'\nimport { TileSet } from './tiles/TileSet'\nimport { Viewport } from './Viewport'\nimport { GamePhysics } from '../physics/GamePhysics';\n\nexport class SceneGraph {\n    // AND ALL OF THE ANIMATED SPRITES, WHICH ARE NOT STORED\n    // SORTED OR IN ANY PARTICULAR ORDER. NOTE THAT ANIMATED SPRITES\n    // ARE SCENE OBJECTS\n    private animatedSprites: Array<AnimatedSprite>;\n\n    // SET OF VISIBLE OBJECTS, NOTE THAT AT THE MOMENT OUR\n    // SCENE GRAPH IS QUITE SIMPLE, SO THIS IS THE SAME AS\n    // OUR LIST OF ANIMATED SPRITES\n    private visibleSet: Array<SceneObject>;\n\n    // WE ARE ALSO USING A TILING ENGINE FOR RENDERING OUR LEVEL\n    // NOTE THAT WE MANAGE THIS HERE BECAUSE WE MAY INVOLVE THE TILED\n    // LAYERS IN PHYSICS AND PATHFINDING AS WELL\n    private tiledLayers: Array<TiledLayer>;\n    private tileSets: Array<TileSet>;\n\n    // THE VIEWPORT IS USED TO FILTER OUT WHAT IS NOT VISIBLE\n    private viewport: Viewport;\n\n\n    private player: AnimatedSprite;\n\n    private mouse: number[] = [0, 0];\n\n\n    private physicsSystem: GamePhysics = new GamePhysics();\n\n\n    public constructor() {\n        // DEFAULT CONSTRUCTOR INITIALIZES OUR DATA STRUCTURES\n        this.clear();\n    }\n\n    public clear(): void {\n        this.animatedSprites = [];\n        this.visibleSet = [];\n        this.tiledLayers = [];\n        this.tileSets = [];\n    }\n\n    public setMouse(x: number, y: number): void {\n        this.mouse[0] = x;\n        this.mouse[1] = y\n    }\n\n    public getMouse(): number[] {\n        return this.mouse;\n    }\n\n    public setPlayer(sprite: AnimatedSprite): void {\n        this.player = sprite;\n    }\n\n    public getPlayer(): AnimatedSprite {\n        return this.player;\n    }\n\n    public addTileSet(tileSetToAdd: TileSet): number {\n        return this.tileSets.push(tileSetToAdd) - 1;\n    }\n\n    public getNumTileSets(): number {\n        return this.tileSets.length;\n    }\n\n    public getTileSet(index: number): TileSet {\n        return this.tileSets[index];\n    }\n\n    public addLayer(layerToAdd: TiledLayer): void {\n        this.tiledLayers.push(layerToAdd);\n    }\n\n    public getNumTiledLayers(): number {\n        return this.tiledLayers.length;\n    }\n\n    public getTiledLayers(): Array<TiledLayer> {\n        return this.tiledLayers;\n    }\n\n    public getTiledLayer(layerIndex: number): TiledLayer {\n        return this.tiledLayers[layerIndex];\n    }\n\n    public getNumSprites(): number {\n        return this.animatedSprites.length;\n    }\n\n    public setViewport(initViewport: Viewport): void {\n        this.viewport = initViewport;\n    }\n\n    public getViewport(): Viewport {\n        return this.viewport;\n    }\n\n    public addAnimatedSprite(sprite: AnimatedSprite): void {\n        this.animatedSprites.push(sprite);\n    }\n\n    public getSpriteAt(testX: number, testY: number): AnimatedSprite {\n        for (let sprite of this.animatedSprites) {\n            if (sprite.contains(testX, testY))\n                return sprite;\n        }\n        return null;\n    }\n\n    /**\n     * update\n     * \n     * Called once per frame, this function updates the state of all the objects\n     * in the scene.\n     * \n     * @param delta The time that has passed since the last time this update\n     * funcation was called.\n     */\n    public update(delta: number): void {\n        this.physicsSystem.update(this);\n        for (let sprite of this.animatedSprites) {\n            sprite.update(delta);\n        }\n    }\n\n    public scope(): Array<SceneObject> {\n        // CLEAR OUT THE OLD\n        this.visibleSet = [];\n\n        // PUT ALL THE SCENE OBJECTS INTO THE VISIBLE SET\n        for (let sprite of this.animatedSprites) {\n            // if (sprite.getPosition().getX() + sprite.getSpriteType().getSpriteWidth() >= this.viewport.getX() && sprite.getPosition().getX() <= this.viewport.getX() + this.viewport.getWidth()) {\n            //     if (sprite.getPosition().getY() - sprite.getSpriteType().getSpriteHeight() <= this.viewport.getY() && sprite.getPosition().getY() >= this.viewport.getY() - this.viewport.getHeight()) {\n\n            //     }\n            // }\n            this.visibleSet.push(sprite);\n        }\n\n        return this.visibleSet;\n    }\n\n    public spritesInRange(xPos: number, yPos: number, range: number): AnimatedSprite[] {\n        let spritesInRange: AnimatedSprite[] = [];\n\n        for (let sprite of this.animatedSprites) {\n            if (sprite.getPosition().getX() + sprite.getSpriteType().getSpriteWidth() >= xPos && sprite.getPosition().getX() <= xPos + range) {\n                if (sprite.getPosition().getY() - sprite.getSpriteType().getSpriteHeight() <= yPos && sprite.getPosition().getY() >= yPos - range) {\n                    spritesInRange.push(sprite);\n                }\n            }\n        }\n        return spritesInRange;\n    }\n\n    public numAlive(): number {\n        let count: number = 0;\n        for (let sprite of this.animatedSprites) {\n            if (!sprite.isDead()) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n\n}","import {Vector3} from '../math/Vector3'\n\n/**\n * SceneObject\n * \n * A SceneObject is something that can be placed into the scene graph. It has\n * a position, rotation, and scale in the game world. Note that its position\n * is typically its centered location, so if we're talking about a 2d box, \n * it would be the center of that box.\n */\nexport abstract class SceneObject {\n    private position : Vector3;\n    private rotation : Vector3;\n    private scale : Vector3;\n\n    public constructor() {\n        this.position = new Vector3();\n        this.rotation = new Vector3();\n        this.scale = new Vector3();\n\n        // CLEAR ALL VALUES\n        this.position.set(0.0, 0.0, 0.0, 1.0);\n        this.rotation.set(0.0, 0.0, 0.0, 1.0);\n        this.scale.set(1.0, 1.0, 1.0, 1.0);\n    }\n\n    public getPosition() : Vector3 {\n        return this.position;\n    }    \n\n    public getRotation() : Vector3 {\n        return this.rotation;\n    }\n\n    public getScale() : Vector3 {\n        return this.scale;\n    }\n\n    public abstract contains(testX : number, testY : number) : boolean;\n}","export class Viewport {\n    private width : number;\n    private height : number;\n    private x : number;\n    private y : number;\n\n    public constructor(initWidth : number, initHeight : number) {\n        this.width = initWidth;\n        this.height = initHeight;\n        this.x = 0;\n        this.y = 0;\n    }\n\n    public getWidth() : number {\n        return this.width;\n    }\n\n    public getHeight() : number {\n        return this.height;\n    }\n\n    public getX() : number {\n        return this.x;\n    }\n\n    public getY() : number {\n        return this.y;\n    }\n\n    public inc(incX : number, incY : number) : void {\n        this.x += incX;\n        this.y += incY;\n    }\n\n    public setPosition(initX : number, initY : number) : void {\n        this.x = initX;\n        this.y = initY;\n    }\n\n    \n\n}","import { SceneObject } from '../SceneObject'\nimport { AnimatedSpriteType } from './AnimatedSpriteType'\nimport { AIBehavior, State } from '../../AI/AIBehavior';\n\nexport class AnimatedSprite extends SceneObject {\n    private spriteType: AnimatedSpriteType;\n    private state: string;\n    private animationFrameIndex: number;\n    private frameCounter: number;\n    private direction: number;\n    private ai: AIBehavior;\n    public hasAI: boolean = false;\n    private dead: boolean = false;\n    private ignoreViewport: boolean = false;\n\n    public constructor(initSpriteType: AnimatedSpriteType, initState: string) {\n        super();\n        this.spriteType = initSpriteType;\n\n        // START RESET\n        this.state = initState;\n        this.animationFrameIndex = 0;\n        this.frameCounter = 0;\n        this.direction = 0;\n    }\n\n    public setAI(ai: AIBehavior): void {\n        this.ai = ai;\n        this.hasAI = true;\n    }\n\n    public getAI(): AIBehavior {\n        return this.ai;\n    }\n\n    public setIgnoreViewport(): void {\n        this.ignoreViewport = true;\n    }\n\n    public getIgnoreViewport(): boolean {\n        return this.ignoreViewport;\n    }\n\n    public getDirection(): number {\n        // this.direction += 1;\n        // if (this.direction == 360) {\n        //     this.direction = 0;\n        // }\n        return this.direction;\n\n    }\n\n    public setDirection(newDirection: number) {\n        this.direction = (newDirection % 360);\n\n    }\n\n\n\n    public getAnimationFrameIndex(): number {\n        return this.animationFrameIndex;\n    }\n\n    public getFrameCounter(): number {\n        return this.frameCounter;\n    }\n\n    public getSpriteType(): AnimatedSpriteType {\n        return this.spriteType;\n    }\n\n    public getState(): string {\n        return this.state;\n    }\n\n    public setState(initState: string): void {\n        this.state = initState;\n        this.animationFrameIndex = 0;\n        this.frameCounter = 0;\n    }\n\n    public kill(): void {\n        this.dead = true;\n    }\n\n    public isDead(): boolean {\n        return this.dead;\n    }\n\n    public update(delta: number): void {\n        this.frameCounter++;\n\n        // HAVE WE GONE PAST THE LAST FRAME IN THE ANIMATION?\n        var currentAnimation = this.spriteType.getAnimation(this.state);\n        var currentFrame = currentAnimation[this.animationFrameIndex];\n        if (this.frameCounter > (currentFrame.duration)) {\n            this.animationFrameIndex++;\n            if (this.animationFrameIndex >= currentAnimation.length) {\n                this.animationFrameIndex = 0;\n                this.setState(this.spriteType.getNext(this.state));\n            }\n            this.frameCounter = 0;\n        }\n\n\n        if (this.hasAI == true) {\n            this.ai.update();\n            this.ai.resolveState(this);\n        }\n    }\n\n    public contains(pointX: number, pointY: number): boolean {\n        let spriteWidth = this.getSpriteType().getSpriteWidth();\n        let spriteHeight = this.getSpriteType().getSpriteHeight();\n        let spriteLeft = this.getPosition().getX();\n        let spriteRight = this.getPosition().getX() + spriteWidth;\n        let spriteTop = this.getPosition().getY();\n        let spriteBottom = this.getPosition().getY() + spriteHeight;\n        if ((pointX < spriteLeft)\n            || (spriteRight < pointX)\n            || (pointY < spriteTop)\n            || (spriteBottom < pointY)) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n\n    /**RENAME THIS METHOD SO IT DENOTES PIXEL LOCATION IN TEXTURE */\n    public getLeft(): number {\n        return this.spriteType.getLeft(this.state, this.animationFrameIndex);\n    }\n\n    public getTop(): number {\n        return this.spriteType.getTop(this.state, this.animationFrameIndex);\n    }\n\n    public toString(): string {\n        let summary: string = \"{ position: (\"\n            + this.getPosition().getX() + \", \" + this.getPosition().getY() + \") \"\n            + \"(state: \" + this.getState() + \") \"\n            + \"(animationFrameIndex: \" + this.getAnimationFrameIndex() + \") \"\n            + \"(frameCounter: \" + this.getFrameCounter() + \") \";\n        return summary;\n    }\n\n\n\n}","import { WebGLGameTexture } from '../../rendering/WebGLGameTexture'\n\nexport class AnimationFrame {\n    public left: number;\n    public top: number;\n    public duration: number;\n\n    constructor(initLeft: number, initTop: number, initDuration: number) {\n        this.left = initLeft;\n        this.top = initTop;\n        this.duration = initDuration;\n    }\n}\n\nexport class AnimatedSpriteType {\n    private spriteSheetTexture: WebGLGameTexture;\n    private animations: Map<string, Array<AnimationFrame>>;\n    private nextAnimations: Map<string, string>;\n    private spriteWidth: number;\n    private spriteHeight: number;\n\n    public constructor(initSpriteSheetTexture: WebGLGameTexture,\n        initSpriteWidth: number, initSpriteHeight: number) {\n        this.spriteSheetTexture = initSpriteSheetTexture;\n        this.animations = new Map();\n        this.nextAnimations = new Map();\n        this.spriteWidth = initSpriteWidth;\n        this.spriteHeight = initSpriteHeight;\n    }\n\n    public addAnimation(state: string, next: string): void {\n        this.animations.set(state, new Array<AnimationFrame>());\n        this.nextAnimations.set(state, next);\n    }\n\n    public addAnimationFrame(state: string, index: number, frameDuration: number): void {\n        var columns = this.spriteSheetTexture.width / this.spriteWidth;\n        var rows = this.spriteSheetTexture.height / this.spriteHeight;\n        var col = index % columns;\n        var row = Math.floor(index / columns);\n        var left = col * this.spriteWidth;\n        var top = row * this.spriteHeight;\n        this.animations.get(state).push(new AnimationFrame(left, top, frameDuration));\n    }\n\n    public getSpriteWidth(): number {\n        return this.spriteWidth;\n    }\n\n    public getSpriteHeight(): number {\n        return this.spriteHeight;\n    }\n\n    public getSpriteSheetTexture(): WebGLGameTexture {\n        return this.spriteSheetTexture;\n    }\n\n    public getAnimation(state: string): Array<AnimationFrame> {\n        return this.animations.get(state);\n    }\n\n    public getLeft(state: string, frameIndex: number): number {\n        let animationFrame: AnimationFrame = this.animations.get(state)[frameIndex];\n        return animationFrame.left;\n    }\n\n    public getTop(state: string, frameIndex: number): number {\n        let animationFrame: AnimationFrame = this.animations.get(state)[frameIndex];\n        return animationFrame.top;\n    }\n\n    public getNext(state: string): string {\n        return this.nextAnimations.get(state);\n    }\n\n}","import { WebGLGameTexture } from \"../../rendering/WebGLGameTexture\";\n\nexport class TileSet {\n    private name : string;\n    private columns : number;\n    private rows : number;\n    private tileWidth : number;\n    private tileHeight : number;\n    private tileSpacing : number;\n    private tileSheetWidth : number;\n    private tileSheetHeight : number;\n    private firstIndex : number;\n    private texture : WebGLGameTexture;\n\n    constructor(initName : string, \n                initColumns : number,\n                initRows : number,\n                initTileWidth : number,\n                initTileHeight : number,\n                initTileSpacing : number,\n                initTileSheetWidth : number,\n                initTileSheetHeight : number,\n                initFirstIndex : number,\n                initTexture : WebGLGameTexture) {\n        this.name = initName;\n        this.columns = initColumns;\n        this.rows = initRows;\n        this.tileWidth = initTileWidth;\n        this.tileHeight = initTileHeight;\n        this.tileSpacing = initTileSpacing;\n        this.tileSheetWidth = initTileSheetWidth;\n        this.tileSheetHeight = initTileSheetHeight;\n        this.firstIndex = initFirstIndex;\n        this.texture = initTexture;\n    }\n\n    public getName() : string {\n        return this.name;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getRows() : number { \n        return this.rows;\n    }\n\n    public getTileWidth() : number {\n        return this.tileWidth;\n    }\n\n    public getTileHeight() : number {\n        return this.tileHeight;\n    }\n\n    public getTileSpacing() : number {\n        return this.tileSpacing;\n    }\n\n    public getTileSheetWidth() : number {\n        return this.tileSheetWidth;\n    }\n\n    public getTileSheetHeight() : number {\n        return this.tileSheetHeight;\n    }\n\n    public getFirstIndex() : number {\n        return this.firstIndex;\n    }\n\n    public getTexture() : WebGLGameTexture {\n        return this.texture;\n    }\n}","import { TileSet } from \"./TileSet\";\n\nexport class TiledLayer {\n    private collidable : boolean;\n    private tiles : Array<number>;\n    private columns : number;\n    private rows : number;\n    private tileSet : TileSet;\n    \n    // WE WILL STORE RENDERING-SPECIFIC DATA HERE\n    private renderData : object;\n\n    constructor(initColumns : number,\n                initRows : number,\n                initTileSet : TileSet) {\n        this.tiles = new Array();\n        this.columns = initColumns;\n        this.rows = initRows;\n        this.tileSet = initTileSet;\n    }\n\n    public setRenderData(initRenderData : object) : void {\n        this.renderData = initRenderData;\n    }\n\n    public getRenderData() : object {\n        return this.renderData;\n    }\n\n    public getMinimumVisibleColumn(viewportLeft : number) : number {\n        return (viewportLeft / this.tileSet.getTileWidth());\n    }\n\n    public getMaximumVisibleColumn(viewportRight : number) : number {\n        return (viewportRight / this.tileSet.getTileWidth());\n    }\n\n    public getMinimumVisibleRow(viewportTop : number) : number {\n        return (viewportTop / this.tileSet.getTileHeight());\n    }\n\n    public getMaximumVisibleRow(viewportBottom : number) : number {\n        return (viewportBottom / this.tileSet.getTileHeight());\n    }\n\n    public getNumCells() : number {\n        return this.columns * this.rows;\n    }\n\n    public getColumns() : number {\n        return this.columns;\n    }\n\n    public getRows() : number {\n        return this.rows;\n    }\n\n    public getTileSet() : TileSet {\n        return this.tileSet;\n    }\n\n    public isCollidable() : boolean {\n        return this.collidable;\n    }\n\n    public addTile(tileSetCellIndex : number) : void {\n        this.tiles.push(tileSetCellIndex);\n    }\n\n    public setTile(column : number, row : number, tileSetCellIndex : number) {\n        let tileIndex : number = this.getTileIndex(column, row);\n        this.tiles[tileIndex] = tileSetCellIndex;\n    }\n\n    public getTileIndex(column : number, row : number) : number {\n        return (row * this.columns) + column;\n    }\n\n    public getTileSetCellIndex(column : number, row : number) : number {\n        let tileIndex : number = this.getTileIndex(column, row);\n        return this.tiles[tileIndex];\n    }\n\n    public getTile(column : number, row : number) : number {\n        let index = this.getTileIndex(column, row);\n        return this.tiles[index];\n    }\n}","/*\n * This provides responses to UI input.\n */\nimport { AnimatedSprite } from \"../scene/sprite/AnimatedSprite\"\nimport { SceneGraph } from \"../scene/SceneGraph\"\nimport { State } from \"../AI/AIBehavior\";\n\nexport class UIController {\n    private spriteToDrag: AnimatedSprite;\n    private scene: SceneGraph;\n    private dragOffsetX: number;\n    private dragOffsetY: number;\n\n    private keys: string[];\n\n    public constructor(canvasId: string, initScene: SceneGraph) {\n        this.spriteToDrag = null;\n        this.scene = initScene;\n        this.dragOffsetX = -1;\n        this.dragOffsetY = -1;\n\n        this.keys = [];\n\n        let canvas: HTMLCanvasElement = <HTMLCanvasElement>document.getElementById(canvasId);\n        canvas.tabIndex = 1;\n        // canvas.addEventListener(\"mousedown\", this.mouseDownHandler);\n        canvas.addEventListener(\"mousemove\", this.mouseMoveHandler);\n        // canvas.addEventListener(\"mouseup\", this.mouseUpHandler);\n        // canvas.addEventListener(\"keydown\", this.keybaordPress);\n        canvas.addEventListener(\"keypress\", this.keybaordPressHeld);\n        canvas.addEventListener(\"keydown\", this.keybaordPressDown);\n        canvas.addEventListener(\"keyup\", this.keybaordPressUp);\n    }\n\n    // public mouseDownHandler = (event: MouseEvent): void => {\n    //     let mousePressX: number = event.clientX;\n    //     let mousePressY: number = event.clientY;\n    //     let sprite: AnimatedSprite = this.scene.getSpriteAt(mousePressX, mousePressY);\n    //     console.log(\"mousePressX: \" + mousePressX);\n    //     console.log(\"mousePressY: \" + mousePressY);\n    //     console.log(\"sprite: \" + sprite);\n    //     if (sprite != null) {\n    //         // START DRAGGING IT\n    //         this.spriteToDrag = sprite;\n    //         this.dragOffsetX = sprite.getPosition().getX() - mousePressX;\n    //         this.dragOffsetY = sprite.getPosition().getY() - mousePressY;\n    //     }\n    // }\n\n    public mouseMoveHandler = (event: MouseEvent): void => {\n        let player: AnimatedSprite = this.scene.getPlayer();\n\n        if (player ? player.hasAI : false) {\n            player.getAI().setBehavior([State.WALK]);\n        }\n        this.scene.setMouse(event.clientX + this.scene.getViewport().getX(), event.clientY - this.scene.getViewport().getY());\n    }\n\n    // public mouseUpHandler = (event: MouseEvent): void => {\n    //     this.spriteToDrag = null;\n    // }\n\n\n    public keybaordPressDown = (event: KeyboardEvent): void => {\n        if (event.code == \"KeyA\" || event.code == \"KeyS\" || event.code == \"KeyW\" || event.code == \"KeyD\") {\n            let code = event.code;\n            if (this.keys.indexOf(code) == -1) {\n                this.keys.push(code);\n            }\n        }\n    }\n\n\n    public keybaordPressHeld = (event: KeyboardEvent): void => {\n        if (event.code == \"KeyA\" || event.code == \"KeyS\" || event.code == \"KeyW\" || event.code == \"KeyD\") {\n            let viewport = this.scene.getViewport();\n            var xOffset = 0;\n            var yOffset = 0;\n            this.keys.forEach(letter => {\n\n                if (letter == 'KeyW') {\n                    console.log('KeyPress: W');\n                    yOffset += 10;\n                } else if (letter == 'KeyA') {\n                    console.log('KeyPress: A');\n                    xOffset -= 10;\n                } else if (letter == 'KeyS') {\n                    console.log('KeyPress: S');\n                    yOffset -= 10;\n                } else if (letter == 'KeyD') {\n                    console.log('KeyPress: D');\n                    xOffset += 10;\n                }\n            });\n\n            viewport.setPosition(viewport.getX() + xOffset, viewport.getY() + yOffset);\n        }\n    }\n\n    public keybaordPressUp = (event: KeyboardEvent): void => {\n        let code = event.code;\n        this.keys.splice(this.keys.indexOf(code), 1);\n    }\n\n\n}"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvdGlsZWRfc2Nyb2xsaW5nX2RlbW8vVGlsZWRTY3JvbGxpbmdEZW1vLnRzIiwic3JjL3dvbGZpZTJkL0FJL0FJQmVoYXZpb3IudHMiLCJzcmMvd29sZmllMmQvQUkvUGFjZVJ1bkFJLnRzIiwic3JjL3dvbGZpZTJkL0FJL1BsYXllckFJLnRzIiwic3JjL3dvbGZpZTJkL0FJL1JhbmRvbVdhbGtBSS50cyIsInNyYy93b2xmaWUyZC9HYW1lLnRzIiwic3JjL3dvbGZpZTJkL2ZpbGVzL1Jlc291cmNlTWFuYWdlci50cyIsInNyYy93b2xmaWUyZC9sb29wL0dhbWVMb29wVGVtcGxhdGUudHMiLCJzcmMvd29sZmllMmQvbWF0aC9NYXRoVXRpbGl0aWVzLnRzIiwic3JjL3dvbGZpZTJkL21hdGgvTWF0cml4LnRzIiwic3JjL3dvbGZpZTJkL21hdGgvVmVjdG9yMy50cyIsInNyYy93b2xmaWUyZC9tYXRoL2JvdW5kaW5nQ2lyY2xlLnRzIiwic3JjL3dvbGZpZTJkL3BoeXNpY3MvR2FtZVBoeXNpY3MudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1RleHRSZW5kZXJlci50cyIsInNyYy93b2xmaWUyZC9yZW5kZXJpbmcvV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50LnRzIiwic3JjL3dvbGZpZTJkL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0udHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVNoYWRlci50cyIsInNyYy93b2xmaWUyZC9yZW5kZXJpbmcvV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXIudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmUudHMiLCJzcmMvd29sZmllMmQvcmVuZGVyaW5nL1dlYkdMR2FtZVRpbGVkTGF5ZXJSZW5kZXJlci50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9TY2VuZUdyYXBoLnRzIiwic3JjL3dvbGZpZTJkL3NjZW5lL1NjZW5lT2JqZWN0LnRzIiwic3JjL3dvbGZpZTJkL3NjZW5lL1ZpZXdwb3J0LnRzIiwic3JjL3dvbGZpZTJkL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZS50cyIsInNyYy93b2xmaWUyZC9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVUeXBlLnRzIiwic3JjL3dvbGZpZTJkL3NjZW5lL3RpbGVzL1RpbGVTZXQudHMiLCJzcmMvd29sZmllMmQvc2NlbmUvdGlsZXMvVGlsZWRMYXllci50cyIsInNyYy93b2xmaWUyZC91aS9VSUNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUNBQTs7OztBQUlBLElBQUEsU0FBQSxRQUFBLGtCQUFBLENBQUE7QUFDQSxJQUFBLG1CQUFBLFFBQUEseUNBQUEsQ0FBQTtBQUtBLElBQUEsaUJBQUEsUUFBQSxvQ0FBQSxDQUFBO0FBRUEsSUFBQSxpQkFBQSxRQUFBLDZCQUFBLENBQUE7QUFDQSxJQUFBLGNBQUEsUUFBQSwwQkFBQSxDQUFBO0FBQ0EsSUFBQSxhQUFBLFFBQUEseUJBQUEsQ0FBQTtBQUVBO0FBQ0E7QUFDQSxJQUFJLE9BQU8sSUFBSSxPQUFBLElBQUosQ0FBUyxhQUFULEVBQXdCLGFBQXhCLENBQVg7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQU0sb0JBQW9CLHdDQUExQjtBQUNBLEtBQUssa0JBQUwsR0FBMEIsU0FBMUIsQ0FBb0MsaUJBQXBDLEVBQ0ksS0FBSyxhQUFMLEVBREosRUFFSSxLQUFLLGtCQUFMLEVBRkosRUFHSSxZQUFBO0FBSUk7QUFDQTtBQUNBLFFBQUksUUFBc0IsS0FBSyxhQUFMLEdBQXFCLGNBQXJCLEVBQTFCO0FBQ0EsUUFBSSxhQUFxQixNQUFNLENBQU4sRUFBUyxVQUFULEtBQXdCLE1BQU0sQ0FBTixFQUFTLFVBQVQsR0FBc0IsWUFBdEIsRUFBakQ7QUFDQSxRQUFJLGNBQXNCLE1BQU0sQ0FBTixFQUFTLE9BQVQsS0FBcUIsTUFBTSxDQUFOLEVBQVMs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U0FBQSxlQUFBLEdBQWtCLFVBQUMsS0FBRCxFQUErQjtBQUNwRCxZQUFJLE9BQU8sTUFBTSxJQUFqQjtBQUNBLGNBQUssSUFBTCxDQUFVLE1BQVYsQ0FBaUIsTUFBSyxJQUFMLENBQVUsT0FBVixDQUFrQixJQUFsQixDQUFqQixFQUEwQyxDQUExQztBQUNILEtBSE07QUFuRkgsU0FBSyxZQUFMLEdBQW9CLElBQXBCO0FBQ0EsU0FBSyxLQUFMLEdBQWEsU0FBYjtBQUNBLFNBQUssV0FBTCxHQUFtQixDQUFDLENBQXBCO0FBQ0EsU0FBSyxXQUFMLEdBQW1CLENBQUMsQ0FBcEI7QUFFQSxTQUFLLElBQUwsR0FBWSxFQUFaO0FBRUEsUUFBSSxTQUErQyxTQUFTLGNBQVQsQ0FBd0IsUUFBeEIsQ0FBbkQ7QUFDQSxXQUFPLFFBQVAsR0FBa0IsQ0FBbEI7QUFDQTtBQUNBLFdBQU8sZ0JBQVAsQ0FBd0IsV0FBeEIsRUFBcUMsS0FBSyxnQkFBMUM7QUFDQTtBQUNBO0FBQ0EsV0FBTyxnQkFBUCxDQUF3QixVQUF4QixFQUFvQyxLQUFLLGlCQUF6QztBQUNBLFdBQU8sZ0JBQVAsQ0FBd0IsU0FBeEIsRUFBbUMsS0FBSyxpQkFBeEM7QUFDQSxXQUFPLGdCQUFQLENBQXdCLE9BQXhCLEVBQWlDLEtBQUssZUFBdEM7QUFDSCxDOztBQXpCTCxRQUFBLFlBQUEsR0FBQSxZQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiLypcbiAqIFRpbGVkU2Nyb2xsaW5nRGVtby50cyAtIGRlbW9uc3RyYXRlcyBob3cgdGlsZWQgbGF5ZXJzIGNhbiBiZSByZW5kZXJlZFxuICogYW5kIHNjcm9sbGVkIHVzaW5nIGEgdmlld3BvcnQuIFxuICovXG5pbXBvcnQgeyBHYW1lIH0gZnJvbSAnLi4vd29sZmllMmQvR2FtZSdcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi4vd29sZmllMmQvc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGVUeXBlIH0gZnJvbSAnLi4vd29sZmllMmQvc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSdcbmltcG9ydCB7IFRpbGVkTGF5ZXIgfSBmcm9tICcuLi93b2xmaWUyZC9zY2VuZS90aWxlcy9UaWxlZExheWVyJ1xuaW1wb3J0IHsgU2NlbmVHcmFwaCB9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL1NjZW5lR3JhcGgnXG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4uL3dvbGZpZTJkL3NjZW5lL1ZpZXdwb3J0J1xuaW1wb3J0IHsgVGV4dFRvUmVuZGVyLCBUZXh0UmVuZGVyZXIgfSBmcm9tICcuLi93b2xmaWUyZC9yZW5kZXJpbmcvVGV4dFJlbmRlcmVyJ1xuaW1wb3J0IHsgQUlCZWhhdmlvciB9IGZyb20gJy4uL3dvbGZpZTJkL0FJL0FJQmVoYXZpb3InXG5pbXBvcnQgeyBSYW5kb21XYWxrQUkgfSBmcm9tICcuLi93b2xmaWUyZC9BSS9SYW5kb21XYWxrQUknXG5pbXBvcnQgeyBQYWNlUnVuQUkgfSBmcm9tICcuLi93b2xmaWUyZC9BSS9QYWNlUnVuQUknXG5pbXBvcnQgeyBQbGF5ZXJBSSB9IGZyb20gJy4uL3dvbGZpZTJkL0FJL1BsYXllckFJJ1xuXG4vLyBUSElTIElTIFRIRSBFTlRSWSBQT0lOVCBJTlRPIE9VUiBBUFBMSUNBVElPTiwgV0UgTUFLRVxuLy8gVEhFIEdhbWUgT0JKRUNUIEFORCBJTklUSUFMSVpFIElUIFdJVEggVEhFIENBTlZBU0VTXG5sZXQgZ2FtZSA9IG5ldyBHYW1lKFwiZ2FtZV9jYW52YXNcIiwgXCJ0ZXh0X2NhbnZhc1wiKTtcblxuLy8gV0UgVEhFTiBMT0FEIE9VUiBHQU1FIFNDRU5FLCBXSElDSCBXSUxMIEZJUlNUIExPQURcbi8vIEFMTCBHQU1FIFJFU09VUkNFUywgVEhFTiBDUkVBVEUgQUxMIFNIQURFUlMgRk9SXG4vLyBSRU5ERVJJTkcsIEFORCBUSEVOIFBMQUNFIEFMTCBHQU1FIE9CSkVDVFMgSU4gVEhFIFNDRU5FLlxuLy8gT05DRSBJVCBJUyBDT01QTEVURUQgV0UgQ0FOIFNUQVJUIFRIRSBHQU1FXG5jb25zdCBERVNFUlRfU0NFTkVfUEFUSCA9IFwicmVzb3VyY2VzL3NjZW5lcy9TY3JvbGxhYmxlRGVzZXJ0Lmpzb25cIjtcbmdhbWUuZ2V0UmVzb3VyY2VNYW5hZ2VyKCkubG9hZFNjZW5lKERFU0VSVF9TQ0VORV9QQVRILFxuICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLFxuICAgIGdhbWUuZ2V0UmVuZGVyaW5nU3lzdGVtKCksXG4gICAgZnVuY3Rpb24gKCkge1xuXG5cblxuICAgICAgICAvLyBBREQgQU5ZIENVU1RPTSBTVFVGRiBXRSBORUVEIEhFUkUsIExJS0UgVEVYVCBSRU5ERVJJTkdcbiAgICAgICAgLy8gTEVUJ1MgQUREIEEgQlVOQ0ggT0YgUkFORE9NIFNQUklURVNcbiAgICAgICAgbGV0IHdvcmxkOiBUaWxlZExheWVyW10gPSBnYW1lLmdldFNjZW5lR3JhcGgoKS5nZXRUaWxlZExheWVycygpO1xuICAgICAgICBsZXQgd29ybGRXaWR0aDogbnVtYmVyID0gd29ybGRbMF0uZ2V0Q29sdW1ucygpICogd29ybGRbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVXaWR0aCgpO1xuICAgICAgICBsZXQgd29ybGRIZWlnaHQ6IG51bWJlciA9IHdvcmxkWzBdLmdldFJvd3MoKSAqIHdvcmxkWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlSGVpZ2h0KCk7XG4gICAgICAgIC8vIGxldCByYW5kb21YOiBudW1iZXIgPSBNYXRoLnJhbmRvbSgpICogd29ybGRXaWR0aDtcbiAgICAgICAgLy8gbGV0IHJhbmRvbVk6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgKiB3b3JsZEhlaWdodDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1MDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdHlwZTogQW5pbWF0ZWRTcHJpdGVUeXBlID0gZ2FtZS5nZXRSZXNvdXJjZU1hbmFnZXIoKS5nZXRBbmltYXRlZFNwcml0ZVR5cGUoXCJDT0NLUk9BQ0hcIik7XG4gICAgICAgICAgICBsZXQgYWk6IEFJQmVoYXZpb3IgPSBuZXcgUmFuZG9tV2Fsa0FJKGdhbWUuZ2V0U2NlbmVHcmFwaCgpKTtcbiAgICAgICAgICAgIGxldCByYW5kb21TcHJpdGU6IEFuaW1hdGVkU3ByaXRlID0gbmV3IEFuaW1hdGVkU3ByaXRlKHR5cGUsIFwiSURMRVwiKTtcbiAgICAgICAgICAgIHJhbmRvbVNwcml0ZS5zZXRBSShhaSk7XG4gICAgICAgICAgICBsZXQgcmFuZG9tWDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkV2lkdGg7XG4gICAgICAgICAgICBsZXQgcmFuZG9tWTogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkSGVpZ2h0O1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0KHJhbmRvbVgsIHJhbmRvbVksIDAsIDEpO1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlLnNldERpcmVjdGlvbig5MCAqIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpKTtcbiAgICAgICAgICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLmFkZEFuaW1hdGVkU3ByaXRlKHJhbmRvbVNwcml0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1MDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgdHlwZTogQW5pbWF0ZWRTcHJpdGVUeXBlID0gZ2FtZS5nZXRSZXNvdXJjZU1hbmFnZXIoKS5nZXRBbmltYXRlZFNwcml0ZVR5cGUoXCJDQU1FTF9TUElERVJcIik7XG4gICAgICAgICAgICBsZXQgYWk6IEFJQmVoYXZpb3IgPSBuZXcgUGFjZVJ1bkFJKGdhbWUuZ2V0U2NlbmVHcmFwaCgpKTsgLy8gbWFrZSBvdGhlciBBSSBhbmQgY2hhbmdlIGNsYXNzXG4gICAgICAgICAgICBsZXQgcmFuZG9tU3ByaXRlOiBBbmltYXRlZFNwcml0ZSA9IG5ldyBBbmltYXRlZFNwcml0ZSh0eXBlLCBcIklETEVcIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhyYW5kb21TcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVNoZWV0VGV4dHVyZSgpLndlYkdMVGV4dHVyZUlkKTtcbiAgICAgICAgICAgIHJhbmRvbVNwcml0ZS5zZXRBSShhaSk7XG4gICAgICAgICAgICBsZXQgcmFuZG9tWDogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkV2lkdGg7XG4gICAgICAgICAgICBsZXQgcmFuZG9tWTogbnVtYmVyID0gTWF0aC5yYW5kb20oKSAqIHdvcmxkSGVpZ2h0O1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0KHJhbmRvbVgsIHJhbmRvbVksIDAsIDEpO1xuICAgICAgICAgICAgcmFuZG9tU3ByaXRlLnNldERpcmVjdGlvbig5MCAqIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDQpKTtcbiAgICAgICAgICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLmFkZEFuaW1hdGVkU3ByaXRlKHJhbmRvbVNwcml0ZSk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGxldCB0eXBlOiBBbmltYXRlZFNwcml0ZVR5cGUgPSBnYW1lLmdldFJlc291cmNlTWFuYWdlcigpLmdldEFuaW1hdGVkU3ByaXRlVHlwZShcIkZVTk5FTF9XRUJfU1BJREVSXCIpO1xuICAgICAgICBsZXQgYWk6IEFJQmVoYXZpb3IgPSBuZXcgUGxheWVyQUkoZ2FtZS5nZXRTY2VuZUdyYXBoKCkpO1xuICAgICAgICBsZXQgcGxheWVyOiBBbmltYXRlZFNwcml0ZSA9IG5ldyBBbmltYXRlZFNwcml0ZSh0eXBlLCBcIklETEVcIik7XG4gICAgICAgIHBsYXllci5zZXRBSShhaSk7XG4gICAgICAgIHBsYXllci5zZXRJZ25vcmVWaWV3cG9ydCgpO1xuICAgICAgICBwbGF5ZXIuZ2V0UG9zaXRpb24oKS5zZXQod29ybGRXaWR0aCAvIDUsIHdvcmxkSGVpZ2h0IC8gOCwgMCwgMSk7XG4gICAgICAgIHBsYXllci5zZXREaXJlY3Rpb24oOTAgKiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiA0KSk7XG4gICAgICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLmFkZEFuaW1hdGVkU3ByaXRlKHBsYXllcik7XG4gICAgICAgIGdhbWUuZ2V0U2NlbmVHcmFwaCgpLnNldFBsYXllcihwbGF5ZXIpXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHJhbmRvbVNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlU2hlZXRUZXh0dXJlKCkud2ViR0xUZXh0dXJlSWQpO1xuXG5cblxuICAgICAgICAvLyBOT1cgQUREIFRFWFQgUkVOREVSSU5HLiBXRSBBUkUgR09JTkcgVE8gUkVOREVSIDMgVEhJTkdTOlxuICAgICAgICAvLyBOVU1CRVIgT0YgU1BSSVRFUyBJTiBUSEUgU0NFTkVcbiAgICAgICAgLy8gTE9DQVRJT04gSU4gR0FNRSBXT1JMRCBPRiBWSUVXUE9SVFxuICAgICAgICAvLyBOVU1CRVIgT0YgU1BSSVRFUyBJTiBWSVNJQkxFIFNFVCAoaS5lLiBJTiBUSEUgVklFV1BPUlQpXG4gICAgICAgIGxldCBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoO1xuICAgICAgICBzY2VuZUdyYXBoID0gZ2FtZS5nZXRTY2VuZUdyYXBoKCk7XG4gICAgICAgIGxldCBzcHJpdGVzSW5TY2VuZVRleHQ6IFRleHRUb1JlbmRlciA9IG5ldyBUZXh0VG9SZW5kZXIoXCJTcHJpdGVzIGluIFNjZW5lXCIsIFwiXCIsIDIwLCA1MCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3ByaXRlc0luU2NlbmVUZXh0LnRleHQgPSBcIlNwcml0ZXMgaW4gU2NlbmU6IFwiICsgc2NlbmVHcmFwaC5nZXROdW1TcHJpdGVzKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgdmlld3BvcnRUZXh0OiBUZXh0VG9SZW5kZXIgPSBuZXcgVGV4dFRvUmVuZGVyKFwiVmlld3BvcnRcIiwgXCJcIiwgMjAsIDcwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBsZXQgdmlld3BvcnQ6IFZpZXdwb3J0ID0gc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAgICAgdmlld3BvcnRUZXh0LnRleHQgPSBcIlZpZXdwb3J0ICh3LCBoLCB4LCB5KTogKFwiICsgdmlld3BvcnQuZ2V0V2lkdGgoKSArIFwiLCBcIlxuICAgICAgICAgICAgICAgICsgdmlld3BvcnQuZ2V0SGVpZ2h0KCkgKyBcIiwgXCJcbiAgICAgICAgICAgICAgICArIHZpZXdwb3J0LmdldFgoKSArIFwiLCBcIlxuICAgICAgICAgICAgICAgICsgdmlld3BvcnQuZ2V0WSgpICsgXCIpXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc3ByaXRlc0luVmlld3BvcnRUZXh0OiBUZXh0VG9SZW5kZXIgPSBuZXcgVGV4dFRvUmVuZGVyKFwiU3ByaXRlcyBpbiBWaWV3cG9ydFwiLCBcIlwiLCAyMCwgOTAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNwcml0ZXNJblZpZXdwb3J0VGV4dC50ZXh0ID0gXCJTcHJpdGVzIGluIFZpZXdwb3J0OiBcIiArIHNjZW5lR3JhcGguc2NvcGUoKS5sZW5ndGg7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgd29ybGREaW1lbnNpb25zVGV4dDogVGV4dFRvUmVuZGVyID0gbmV3IFRleHRUb1JlbmRlcihcIldvcmxkIERpbWVuc2lvbnNcIiwgXCJcIiwgMjAsIDExMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd29ybGREaW1lbnNpb25zVGV4dC50ZXh0ID0gXCJXb3JsZCBEaW1lbnNpb25zICh3LCBoKTogKFwiICsgd29ybGRXaWR0aCArIFwiLCBcIiArIHdvcmxkSGVpZ2h0ICsgXCIpXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBsZXQgc3ByaXRlc0FsaXZlOiBUZXh0VG9SZW5kZXIgPSBuZXcgVGV4dFRvUmVuZGVyKFwiU3ByaXRlcyBBbGl2ZVwiLCBcIlwiLCAyMCwgMTMwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzcHJpdGVzQWxpdmUudGV4dCA9IFwiU3ByaXRlcyBBbGl2ZTogXCIgKyAoc2NlbmVHcmFwaC5udW1BbGl2ZSgpIC0gNTEpO1xuICAgICAgICB9KTtcblxuICAgICAgICBsZXQgd29uOiBUZXh0VG9SZW5kZXIgPSBuZXcgVGV4dFRvUmVuZGVyKFwiV29uXCIsIFwiXCIsIDEwMCwgc2NlbmVHcmFwaC5nZXRWaWV3cG9ydCgpLmdldEhlaWdodCgpIC8gMiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgd29uLnRleHQgPSAoKHNjZW5lR3JhcGgubnVtQWxpdmUoKSAtIDUxKSA9PSAwKSA/IFwiQ29uZ3JhdHVsYXRpb25zISEhISEgWW91IFdvbiEhISEhXCIgOiBcIlwiO1xuICAgICAgICAgICAgd29uLmZvbnRTaXplID0gNzI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCB0ZXh0UmVuZGVyZXIgPSBnYW1lLmdldFJlbmRlcmluZ1N5c3RlbSgpLmdldFRleHRSZW5kZXJlcigpO1xuICAgICAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKHNwcml0ZXNJblNjZW5lVGV4dCk7XG4gICAgICAgIHRleHRSZW5kZXJlci5hZGRUZXh0VG9SZW5kZXIodmlld3BvcnRUZXh0KTtcbiAgICAgICAgdGV4dFJlbmRlcmVyLmFkZFRleHRUb1JlbmRlcihzcHJpdGVzSW5WaWV3cG9ydFRleHQpO1xuICAgICAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKHdvcmxkRGltZW5zaW9uc1RleHQpO1xuICAgICAgICB0ZXh0UmVuZGVyZXIuYWRkVGV4dFRvUmVuZGVyKHNwcml0ZXNBbGl2ZSk7XG4gICAgICAgIHRleHRSZW5kZXJlci5hZGRUZXh0VG9SZW5kZXIod29uKTtcblxuICAgICAgICAvLyBBTkQgU1RBUlQgVEhFIEdBTUUgTE9PUFxuICAgICAgICBnYW1lLnN0YXJ0KCk7XG4gICAgfSk7IiwiaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tIFwiLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlXCI7XG5pbXBvcnQgeyBTY2VuZUdyYXBoIH0gZnJvbSBcIi4uL3NjZW5lL1NjZW5lR3JhcGhcIjtcblxuZXhwb3J0IGVudW0gU3RhdGUge1xuICAgIFdBTEsgPSBcIldBTEtcIixcbiAgICBSVU4gPSBcIlJVTlwiLFxuICAgIFRVUk5fTk9SVEggPSBcIlRVUk5fTk9SVEhcIixcbiAgICBUVVJOX1NPVVRIID0gXCJUVVJOX1NPVVRIXCIsXG4gICAgVFVSTl9FQVNUID0gXCJUVVJOX0VBU1RcIixcbiAgICBUVVJOX1dFU1QgPSBcIlRVUk5fV0VTVFwiLFxuICAgIFRVUk5fUkFORCA9IFwiVFVSTl9SQU5EXCIsXG4gICAgVFVSTl9BUk9VTkQgPSBcIlRVUk5fQVJPVU5EXCIsXG4gICAgTk9ORSA9IFwiTk9ORVwiLFxufVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQUlCZWhhdmlvciB7XG5cbiAgICBwcm90ZWN0ZWQgc3RhdGVJbmRleDogbnVtYmVyO1xuICAgIHByb3RlY3RlZCBwYXR0ZXJuOiBTdGF0ZVtdO1xuICAgIHByb3RlY3RlZCBzY2VuZTogU2NlbmVHcmFwaDtcblxuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lR3JhcGgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5wYXR0ZXJuID0gW107XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0QmVoYXZpb3IocGF0dGVybjogU3RhdGVbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLnBhdHRlcm4gPSBwYXR0ZXJuO1xuICAgICAgICB0aGlzLnN0YXRlSW5kZXggPSAwO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoKTogU3RhdGUge1xuICAgICAgICAvLyBjb25zb2xlLmdyb3VwKFwiQUlCZWhhdmlvci51cGRhdGUoKVwiKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImluaXRhbCBzdGF0ZUluZGV4XCIsIHRoaXMuc3RhdGVJbmRleCk7XG4gICAgICAgIGxldCBzdGF0ZSA9IHRoaXMucGF0dGVyblt0aGlzLnN0YXRlSW5kZXhdO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhcInN0YXRlXCIsIHN0YXRlKTtcbiAgICAgICAgdGhpcy5zdGF0ZUluZGV4Kys7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiaW5jcmVtZW50ZWQgc3RhdGVJbmRleFwiLCB0aGlzLnN0YXRlSW5kZXgpXG4gICAgICAgIGlmICh0aGlzLnN0YXRlSW5kZXggPj0gdGhpcy5wYXR0ZXJuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJubyBtb3JlIHN0YXRlc1wiKTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVJbmRleCA9IDA7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcInJlc2V0dGluZyBzdGF0ZUluZGV4XCIsIHRoaXMuc3RhdGVJbmRleClcbiAgICAgICAgfVxuICAgICAgICAvLyBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBhYnN0cmFjdCByZXNvbHZlU3RhdGUoc3ByaXRlOiBBbmltYXRlZFNwcml0ZSk6IHZvaWQ7XG5cbiAgICBhYnN0cmFjdCBnZW5lcmF0ZVBhdHRlcm4oKTogU3RhdGVbXTtcbn1cblxuIiwiaW1wb3J0IHsgQUlCZWhhdmlvciwgU3RhdGUgfSBmcm9tIFwiLi9BSUJlaGF2aW9yXCI7XG5pbXBvcnQgeyBTY2VuZUdyYXBoIH0gZnJvbSBcIi4uL3NjZW5lL1NjZW5lR3JhcGhcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuXG5cblxuXG5leHBvcnQgY2xhc3MgUGFjZVJ1bkFJIGV4dGVuZHMgQUlCZWhhdmlvciB7XG5cbiAgICBwcml2YXRlIHBhY2luZ0JlaGF2aW9yOiBTdGF0ZVtdID0gW1N0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLldBTEssIFN0YXRlLlRVUk5fQVJPVU5EXTtcblxuICAgIGNvbnN0cnVjdG9yKHNjZW5lOiBTY2VuZUdyYXBoKSB7XG4gICAgICAgIHN1cGVyKHNjZW5lKTtcbiAgICAgICAgdGhpcy5zZXRCZWhhdmlvcih0aGlzLnBhY2luZ0JlaGF2aW9yKTtcbiAgICB9XG5cblxuICAgIHB1YmxpYyBnZW5lcmF0ZVBhdHRlcm4oKTogU3RhdGVbXSB7XG4gICAgICAgIGxldCBwYXR0ZXJuOiBTdGF0ZVtdID0gW1N0YXRlLk5PTkVdO1xuICAgICAgICByZXR1cm4gcGF0dGVybjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZVN0YXRlKHNwcml0ZTogQW5pbWF0ZWRTcHJpdGUpOiB2b2lkIHtcbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5wYXR0ZXJuW3RoaXMuc3RhdGVJbmRleF07XG5cbiAgICAgICAgbGV0IHBsYXllcjogQW5pbWF0ZWRTcHJpdGU7XG4gICAgICAgIGxldCBwbGF5ZXJJblJhbmdlOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgIGxldCBuZWFyU3ByaXRlczogQW5pbWF0ZWRTcHJpdGVbXSA9IHRoaXMuc2NlbmUuc3ByaXRlc0luUmFuZ2Uoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gNTAsIHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIDUwLCAxMDAgKyBzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCkpO1xuICAgICAgICBmb3IgKGxldCB0ZW1wU3ByaXRlIG9mIG5lYXJTcHJpdGVzKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wU3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVTaGVldFRleHR1cmUoKS53ZWJHTFRleHR1cmVJZCk7XG4gICAgICAgICAgICBpZiAodGVtcFNwcml0ZSA9PSB0aGlzLnNjZW5lLmdldFBsYXllcigpKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyID0gdGVtcFNwcml0ZTtcbiAgICAgICAgICAgICAgICBwbGF5ZXJJblJhbmdlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHBsYXllckluUmFuZ2UpO1xuXG4gICAgICAgIGlmIChwbGF5ZXJJblJhbmdlID09IHRydWUpIHtcbiAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24ocGxheWVyLmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QmVoYXZpb3IoW1N0YXRlLlJVTiwgU3RhdGUuUlVOLCBTdGF0ZS5SVU4sIFN0YXRlLlJVTiwgU3RhdGUuTk9ORV0pO1xuICAgICAgICAgICAgc3RhdGUgPSB0aGlzLnBhdHRlcm5bdGhpcy5zdGF0ZUluZGV4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB3b3JsZFdpZHRoOiBudW1iZXIgPSB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0Q29sdW1ucygpICogdGhpcy5zY2VuZS5nZXRUaWxlZExheWVycygpWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlV2lkdGgoKTtcbiAgICAgICAgbGV0IHdvcmxkSGVpZ2h0OiBudW1iZXIgPSB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0Um93cygpICogdGhpcy5zY2VuZS5nZXRUaWxlZExheWVycygpWzBdLmdldFRpbGVTZXQoKS5nZXRUaWxlSGVpZ2h0KCk7XG5cblxuICAgICAgICBpZiAoc3RhdGUgPT0gU3RhdGUuV0FMSykge1xuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRTdGF0ZSgpICE9IFwiV0FMS0lOR1wiKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLnNldFN0YXRlKFwiV0FMS0lOR1wiKTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyBsZXQgbmV3WTogbnVtYmVyID0gMDtcbiAgICAgICAgICAgIC8vIGxldCBuZXdYOiBudW1iZXIgPSAwO1xuICAgICAgICAgICAgLy8gbGV0IHhTdG9wOiBib29sZWFuID0gZmFsc2U7XG4gICAgICAgICAgICAvLyBsZXQgeVN0b3A6IGJvb2xlYW4gPSBmYWxzZTtcblxuICAgICAgICAgICAgLy8gc3dpdGNoIChzcHJpdGUuZ2V0RGlyZWN0aW9uKCkpIHtcbiAgICAgICAgICAgIC8vICAgICBjYXNlIDA6XG4gICAgICAgICAgICAvLyAgICAgICAgIG5ld1kgPSAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gMSk7XG4gICAgICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gICAgIGNhc2UgOTA6XG4gICAgICAgICAgICAvLyAgICAgICAgIG5ld1ggPSAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gMSk7XG4gICAgICAgICAgICAvLyAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgLy8gICAgIGNhc2UgMTgwOlxuICAgICAgICAgICAgLy8gICAgICAgICBuZXdZID0gKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIDEpO1xuICAgICAgICAgICAgLy8gICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vICAgICBjYXNlIDI3MDpcbiAgICAgICAgICAgIC8vICAgICAgICAgbmV3WCA9IChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyAxKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAvLyAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIC8vICAgICAgICAgLy8gY29uc29sZS5lcnJvcihcImlsbGVnYWwgc3ByaXRlIGRpcmVjdGlvblwiLCBzcHJpdGUuZ2V0RGlyZWN0aW9uKCkpO1xuICAgICAgICAgICAgLy8gICAgICAgICBicmVhaztcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgLy8gaWYgKCEobmV3WCA8PSAwIHx8IG5ld1ggPj0gd29ybGRXaWR0aCkpIHtcbiAgICAgICAgICAgIC8vICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKG5ld1gpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgLy8gaWYgKCEobmV3WSA8PSAwIHx8IG5ld1kgPj0gd29ybGRIZWlnaHQpKSB7XG4gICAgICAgICAgICAvLyAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShuZXdZKTtcbiAgICAgICAgICAgIC8vIH1cblxuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgPj0gd29ybGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSA+PSB3b3JsZEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gMTApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAoc3ByaXRlLmdldERpcmVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDkwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4MDpcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzA6XG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoXCJpbGxlZ2FsIHNwcml0ZSBkaXJlY3Rpb25cIiwgc3ByaXRlLmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuVFVSTl9BUk9VTkQpIHtcbiAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24oc3ByaXRlLmdldERpcmVjdGlvbigpICsgMTgwKTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZSA9PSBTdGF0ZS5SVU4pIHtcbiAgICAgICAgICAgIHN3aXRjaCAoc3ByaXRlLmdldERpcmVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDkwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4MDpcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzA6XG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgMik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoXCJpbGxlZ2FsIHNwcml0ZSBkaXJlY3Rpb25cIiwgc3ByaXRlLmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPSBTdGF0ZS5OT05FKSB7XG4gICAgICAgICAgICBpZiAocGxheWVySW5SYW5nZSA9PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24oc3ByaXRlLmdldERpcmVjdGlvbigpICsgOTApO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0QmVoYXZpb3IodGhpcy5wYWNpbmdCZWhhdmlvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgQUlCZWhhdmlvciwgU3RhdGUgfSBmcm9tIFwiLi9BSUJlaGF2aW9yXCI7XG5pbXBvcnQgeyBTY2VuZUdyYXBoIH0gZnJvbSBcIi4uL3NjZW5lL1NjZW5lR3JhcGhcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuXG5cblxuXG5leHBvcnQgY2xhc3MgUGxheWVyQUkgZXh0ZW5kcyBBSUJlaGF2aW9yIHtcblxuICAgIC8vIHByaXZhdGUgZmxpcDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lR3JhcGgpIHtcbiAgICAgICAgc3VwZXIoc2NlbmUpO1xuICAgICAgICB0aGlzLnNldEJlaGF2aW9yKFtTdGF0ZS5XQUxLXSk7XG4gICAgfVxuXG5cbiAgICBwdWJsaWMgZ2VuZXJhdGVQYXR0ZXJuKCk6IFN0YXRlW10ge1xuICAgICAgICBsZXQgcGF0dGVybjogU3RhdGVbXSA9IFtTdGF0ZS5OT05FXTtcbiAgICAgICAgcmV0dXJuIHBhdHRlcm47XG4gICAgfVxuXG4gICAgcHVibGljIHJlc29sdmVTdGF0ZShzcHJpdGU6IEFuaW1hdGVkU3ByaXRlKTogdm9pZCB7XG4gICAgICAgIGxldCBzdGF0ZSA9IHRoaXMucGF0dGVyblt0aGlzLnN0YXRlSW5kZXhdO1xuXG4gICAgICAgIGxldCB0YXJnZXRYOiBudW1iZXIgPSB0aGlzLnNjZW5lLmdldE1vdXNlKClbMF0gLSAoc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVXaWR0aCgpIC8gMik7XG4gICAgICAgIGxldCB0YXJnZXRZOiBudW1iZXIgPSB0aGlzLnNjZW5lLmdldE1vdXNlKClbMV0gLSAoc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKSAvIDIpO1xuXG4gICAgICAgIGxldCBkZWx0YVg6IG51bWJlciA9IHRhcmdldFggLSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCk7XG4gICAgICAgIGxldCBkZWx0YVk6IG51bWJlciA9IHRhcmdldFkgLSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCk7XG5cbiAgICAgICAgbGV0IHdvcmxkV2lkdGg6IG51bWJlciA9IHRoaXMuc2NlbmUuZ2V0VGlsZWRMYXllcnMoKVswXS5nZXRDb2x1bW5zKCkgKiB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVXaWR0aCgpO1xuICAgICAgICBsZXQgd29ybGRIZWlnaHQ6IG51bWJlciA9IHRoaXMuc2NlbmUuZ2V0VGlsZWRMYXllcnMoKVswXS5nZXRSb3dzKCkgKiB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVIZWlnaHQoKTtcblxuICAgICAgICBpZiAoTWF0aC5hYnMoZGVsdGFYKSA8PSA2ICYmIE1hdGguYWJzKGRlbHRhWSkgPD0gNikge1xuICAgICAgICAgICAgc3RhdGUgPSBTdGF0ZS5OT05FO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlID09IFN0YXRlLldBTEspIHtcbiAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0U3RhdGUoKSAhPSBcIldBTEtJTkdcIikge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5zZXRTdGF0ZShcIldBTEtJTkdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSA+PSB3b3JsZFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgLSAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgPD0gMCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpID49IHdvcmxkSGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgLSAxMClcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGRlbHRhMTogbnVtYmVyID0gZGVsdGFYO1xuICAgICAgICAgICAgbGV0IGRlbHRhMjogbnVtYmVyID0gZGVsdGFZO1xuXG4gICAgICAgICAgICBpZiAoZGVsdGExID4gNikge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24oMjcwKTtcbiAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIDMpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkZWx0YTEgPCAtNikge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24oOTApO1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gMyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRlbHRhMiA+IDYpIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuc2V0RGlyZWN0aW9uKDE4MCk7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAzKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVsdGEyIDwgLTYpIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuc2V0RGlyZWN0aW9uKDApO1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gMyk7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuTk9ORSkge1xuICAgICAgICAgICAgdGhpcy5zZXRCZWhhdmlvcihbU3RhdGUuTk9ORV0pO1xuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRTdGF0ZSgpICE9IFwiSURMRVwiKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLnNldFN0YXRlKFwiSURMRVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHRoaXMuZmxpcCA9IChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAzKSA9PSAxKTtcbiAgICAgICAgfVxuICAgIH1cbn0iLCJpbXBvcnQgeyBBSUJlaGF2aW9yIH0gZnJvbSBcIi4vQUlCZWhhdmlvclwiO1xuaW1wb3J0IHsgU2NlbmVHcmFwaCB9IGZyb20gXCIuLi9zY2VuZS9TY2VuZUdyYXBoXCI7XG5pbXBvcnQgeyBTdGF0ZSB9IGZyb20gXCIuL0FJQmVoYXZpb3JcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuXG5cblxuZXhwb3J0IGNsYXNzIFJhbmRvbVdhbGtBSSBleHRlbmRzIEFJQmVoYXZpb3Ige1xuXG4gICAgY29uc3RydWN0b3Ioc2NlbmU6IFNjZW5lR3JhcGgpIHtcbiAgICAgICAgc3VwZXIoc2NlbmUpO1xuICAgICAgICB0aGlzLnNldEJlaGF2aW9yKHRoaXMuZ2VuZXJhdGVQYXR0ZXJuKCkpO1xuICAgIH1cblxuXG4gICAgcHVibGljIGdlbmVyYXRlUGF0dGVybigpOiBTdGF0ZVtdIHtcbiAgICAgICAgbGV0IHBhdHRlcm46IFN0YXRlW10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgeCA9IDA7IHggPCAyNSArIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE3NSk7IHgrKykge1xuICAgICAgICAgICAgcGF0dGVybi5wdXNoKFN0YXRlLldBTEspO1xuICAgICAgICB9XG4gICAgICAgIHBhdHRlcm4ucHVzaChTdGF0ZS5UVVJOX1JBTkQpO1xuICAgICAgICByZXR1cm4gcGF0dGVybjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVzb2x2ZVN0YXRlKHNwcml0ZTogQW5pbWF0ZWRTcHJpdGUpOiB2b2lkIHtcbiAgICAgICAgbGV0IHN0YXRlID0gdGhpcy5wYXR0ZXJuW3RoaXMuc3RhdGVJbmRleF07XG5cbiAgICAgICAgbGV0IHdvcmxkV2lkdGg6IG51bWJlciA9IHRoaXMuc2NlbmUuZ2V0VGlsZWRMYXllcnMoKVswXS5nZXRDb2x1bW5zKCkgKiB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVXaWR0aCgpO1xuICAgICAgICBsZXQgd29ybGRIZWlnaHQ6IG51bWJlciA9IHRoaXMuc2NlbmUuZ2V0VGlsZWRMYXllcnMoKVswXS5nZXRSb3dzKCkgKiB0aGlzLnNjZW5lLmdldFRpbGVkTGF5ZXJzKClbMF0uZ2V0VGlsZVNldCgpLmdldFRpbGVIZWlnaHQoKTtcblxuXG4gICAgICAgIGlmIChzdGF0ZSA9PSBTdGF0ZS5XQUxLKSB7XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFN0YXRlKCkgIT0gXCJXQUxLSU5HXCIpIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuc2V0U3RhdGUoXCJXQUxLSU5HXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyAxMClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgPj0gd29ybGRXaWR0aCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gMTApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIDw9IDApIHtcbiAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIDEwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSA+PSB3b3JsZEhlaWdodCkge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gMTApXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHN3aXRjaCAoc3ByaXRlLmdldERpcmVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDkwOlxuICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDE4MDpcbiAgICAgICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WShzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyNzA6XG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoXCJpbGxlZ2FsIHNwcml0ZSBkaXJlY3Rpb25cIiwgc3ByaXRlLmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT0gU3RhdGUuVFVSTl9SQU5EKSB7XG4gICAgICAgICAgICBsZXQgdGVtcFJhbmROdW0gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKTtcbiAgICAgICAgICAgIGlmICh0ZW1wUmFuZE51bSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgc3ByaXRlLnNldERpcmVjdGlvbihzcHJpdGUuZ2V0RGlyZWN0aW9uKCkgKyA5MCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNwcml0ZS5zZXREaXJlY3Rpb24oc3ByaXRlLmdldERpcmVjdGlvbigpICsgMjcwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG59IiwiLypcbiAqIEdhbWUgaXMgdGhlIGZvY2FsIHBvaW50IG9mIHRoZSBhcHBsaWNhdGlvbiwgaXQgaGFzIDQgc3Vic3lzdGVtcyxcbiAqIHRoZSByZXNvdXJjZSBtYW5hZ2VyLCB0aGUgc2NlbmUgZ3JhcGgsIHRoZSByZW5kZXJpbmcgc3lzdGVtLCBhbmRcbiAqIHRoZSBVSSBjb250cm9sbGVyLiBJbiBhZGRpdGlvbiBpdCBzZXJ2ZXMgYXMgdGhlIGdhbWUgbG9vcCwgcHJvdmlkaW5nXG4gKiBib3RoIGFuIHVwZGF0ZSBhbmQgZHJhdyBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCBvbiBhIHNjaGVkdWxlLlxuICovXG5pbXBvcnQgeyBHYW1lTG9vcFRlbXBsYXRlIH0gZnJvbSAnLi9sb29wL0dhbWVMb29wVGVtcGxhdGUnXG5pbXBvcnQgeyBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0gfSBmcm9tICcuL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0nXG5pbXBvcnQgeyBTY2VuZUdyYXBoIH0gZnJvbSAnLi9zY2VuZS9TY2VuZUdyYXBoJ1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tICcuL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZSdcbmltcG9ydCB7IFRpbGVkTGF5ZXIgfSBmcm9tICcuL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXInXG5pbXBvcnQgeyBSZXNvdXJjZU1hbmFnZXIgfSBmcm9tICcuL2ZpbGVzL1Jlc291cmNlTWFuYWdlcidcbmltcG9ydCB7IFVJQ29udHJvbGxlciB9IGZyb20gJy4vdWkvVUlDb250cm9sbGVyJ1xuaW1wb3J0IHsgVmlld3BvcnQgfSBmcm9tICcuL3NjZW5lL1ZpZXdwb3J0J1xuXG5leHBvcnQgY2xhc3MgR2FtZSBleHRlbmRzIEdhbWVMb29wVGVtcGxhdGUge1xuICAgIHByaXZhdGUgcmVzb3VyY2VNYW5hZ2VyOiBSZXNvdXJjZU1hbmFnZXI7XG4gICAgcHJpdmF0ZSBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoO1xuICAgIHByaXZhdGUgcmVuZGVyaW5nU3lzdGVtOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW07XG4gICAgcHJpdmF0ZSB1aUNvbnRyb2xsZXI6IFVJQ29udHJvbGxlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihnYW1lQ2FudmFzSWQ6IHN0cmluZywgdGV4dENhbnZhc0lkOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5yZXNvdXJjZU1hbmFnZXIgPSBuZXcgUmVzb3VyY2VNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMuc2NlbmVHcmFwaCA9IG5ldyBTY2VuZUdyYXBoKCk7XG4gICAgICAgIHRoaXMucmVuZGVyaW5nU3lzdGVtID0gbmV3IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbShnYW1lQ2FudmFzSWQsIHRleHRDYW52YXNJZCk7XG4gICAgICAgIHRoaXMudWlDb250cm9sbGVyID0gbmV3IFVJQ29udHJvbGxlcihnYW1lQ2FudmFzSWQsIHRoaXMuc2NlbmVHcmFwaCk7XG5cbiAgICAgICAgLy8gTUFLRSBTVVJFIFRIRSBTQ0VORSBHUkFQSCcgUyBWSUVXUE9SVCBJUyBQUk9QRVJMWSBTRVRVUFxuICAgICAgICBsZXQgdmlld3BvcnRXaWR0aDogbnVtYmVyID0gKDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChnYW1lQ2FudmFzSWQpKS53aWR0aDtcbiAgICAgICAgbGV0IHZpZXdwb3J0SGVpZ2h0OiBudW1iZXIgPSAoPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGdhbWVDYW52YXNJZCkpLmhlaWdodDtcbiAgICAgICAgbGV0IHZpZXdwb3J0OiBWaWV3cG9ydCA9IG5ldyBWaWV3cG9ydCh2aWV3cG9ydFdpZHRoLCB2aWV3cG9ydEhlaWdodCk7XG4gICAgICAgIHRoaXMuc2NlbmVHcmFwaC5zZXRWaWV3cG9ydCh2aWV3cG9ydCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlbmRlcmluZ1N5c3RlbSgpOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0ge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJpbmdTeXN0ZW07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlc291cmNlTWFuYWdlcigpOiBSZXNvdXJjZU1hbmFnZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXNvdXJjZU1hbmFnZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNjZW5lR3JhcGgoKTogU2NlbmVHcmFwaCB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjZW5lR3JhcGg7XG4gICAgfVxuXG4gICAgcHVibGljIGJlZ2luKCk6IHZvaWQge1xuICAgIH1cblxuICAgIC8qXG4gICAgICogVGhpcyBkcmF3cyB0aGUgZ2FtZS4gTm90ZSB0aGF0IHdlIGFyZSBub3QgY3VycmVudGx5IHVzaW5nIHRoZSBcbiAgICAgKiBpbnRlcnBvbGF0aW9uIHZhbHVlLCBidXQgY291bGQgb25jZSBwaHlzaWNzIGlzIGludm9sdmVkLlxuICAgICAqL1xuICAgIHB1YmxpYyBkcmF3KGludGVycG9sYXRpb25QZXJjZW50YWdlOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgLy8gR0VUIFRIRSBUSUxFRCBMQVlFUlMgVE8gUkVOREVSIEZST00gVEhFIFNDRU5FIEdSQVBIXG4gICAgICAgIGxldCB2aXNpYmxlTGF5ZXJzOiBBcnJheTxUaWxlZExheWVyPjtcbiAgICAgICAgdmlzaWJsZUxheWVycyA9IHRoaXMuc2NlbmVHcmFwaC5nZXRUaWxlZExheWVycygpO1xuXG4gICAgICAgIC8vIEdFVCBUSEUgVklTSUJMRSBTRVQgRlJPTSBUSEUgU0NFTkUgR1JBUEhcbiAgICAgICAgbGV0IHZpc2libGVTcHJpdGVzOiBBcnJheTxBbmltYXRlZFNwcml0ZT47XG4gICAgICAgIHZpc2libGVTcHJpdGVzID0gPEFycmF5PEFuaW1hdGVkU3ByaXRlPj50aGlzLnNjZW5lR3JhcGguc2NvcGUoKTtcblxuICAgICAgICBsZXQgdmlld3BvcnQ6IFZpZXdwb3J0ID0gdGhpcy5zY2VuZUdyYXBoLmdldFZpZXdwb3J0KCk7XG5cbiAgICAgICAgLy8gUkVOREVSIFRIRSBWSVNJQkxFIFNFVCwgV0hJQ0ggU0hPVUxEIEFMTCBCRSBSRU5ERVJBQkxFXG4gICAgICAgIHRoaXMucmVuZGVyaW5nU3lzdGVtLnJlbmRlcih2aWV3cG9ydCwgdmlzaWJsZUxheWVycywgdmlzaWJsZVNwcml0ZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHNjZW5lLlxuICAgICAqL1xuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnNjZW5lR3JhcGgudXBkYXRlKGRlbHRhKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBGUFMgY291bnRlci5cbiAgICAgKi9cbiAgICBwdWJsaWMgZW5kKGZwczogbnVtYmVyLCBwYW5pYzogYm9vbGVhbik6IHZvaWQge1xuICAgICAgICBpZiAocGFuaWMpIHtcbiAgICAgICAgICAgIHZhciBkaXNjYXJkZWRUaW1lID0gTWF0aC5yb3VuZCh0aGlzLnJlc2V0RnJhbWVEZWx0YSgpKTtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignTWFpbiBsb29wIHBhbmlja2VkLCBwcm9iYWJseSBiZWNhdXNlIHRoZSBicm93c2VyIHRhYiB3YXMgcHV0IGluIHRoZSBiYWNrZ3JvdW5kLiBEaXNjYXJkaW5nICcgKyBkaXNjYXJkZWRUaW1lICsgJ21zJyk7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLypcbiAqIFJlc291cmNlTWFuYWdlci5qc1xuICpcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIG1hbmFnaW5nIGFsbCBzaGFyZWQgcmVzb3VyY2VzLiBUaGlzIG1lYW5zIHRoaW5nc1xuICogdGhhdCBtYXkgYmUgbmVlZGVkIGJ5IG11bHRpcGxlIGdhbWUgb2JqZWN0cy4gSW4gdGhpcyBhcHBsaWNhdGlvbiB0aGlzIG1lYW5zXG4gKiB0ZXh0dXJlcyBmb3IgdGhlIHB1cnBvc2Ugb2YgR1BVIHJlbmRlcmluZyBhbmQgYW5pbWF0ZWQgc3ByaXRlIHR5cGVzLlxuICovXG5pbXBvcnQgeyBTcHJpdGVUeXBlRGF0YSwgQW5pbWF0aW9uU3RhdGVEYXRhIH0gZnJvbSAnLi9TcHJpdGVUeXBlRGF0YSdcbmltcG9ydCB7IE1hcERhdGEsIFRpbGVkTGF5ZXJEYXRhLCBUaWxlZExheWVyUHJvcGVydHksIFRpbGVTZXREYXRhIH0gZnJvbSAnLi9NYXBEYXRhJ1xuaW1wb3J0IHsgU2NlbmVEYXRhLCBOYW1lZFBhdGggfSBmcm9tICcuL1NjZW5lRGF0YSdcbmltcG9ydCB7IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSB9IGZyb20gJy4uL3JlbmRlcmluZy9XZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0nXG5pbXBvcnQgeyBXZWJHTEdhbWVUZXh0dXJlIH0gZnJvbSAnLi4vcmVuZGVyaW5nL1dlYkdMR2FtZVRleHR1cmUnXG5pbXBvcnQgeyBBbmltYXRlZFNwcml0ZVR5cGUgfSBmcm9tICcuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGVUeXBlJ1xuaW1wb3J0IHsgU2NlbmVHcmFwaCB9IGZyb20gJy4uL3NjZW5lL1NjZW5lR3JhcGgnXG5pbXBvcnQgeyBUaWxlZExheWVyIH0gZnJvbSAnLi4vc2NlbmUvdGlsZXMvVGlsZWRMYXllcidcbmltcG9ydCB7IFRpbGVTZXQgfSBmcm9tICcuLi9zY2VuZS90aWxlcy9UaWxlU2V0J1xuXG5leHBvcnQgY2xhc3MgUmVzb3VyY2VNYW5hZ2VyIHtcbiAgICAvLyBHQU1FIFNIQURFUiBQUk9HUkFNIFNPVVJDRSBDT0RFIFdJTEwgQkUgTE9BREVEIEhFUkUuIE5PVEUgVEhBVFxuICAgIC8vIFdFIEhBVkUgT05FIE1BUCBGT1IgTUFQUElORyBUSEUgU0hBREVSIE5BTUUgVE8gVEhFIFNPVVJDRSBDT0RFXG4gICAgLy8gQU5EIEFOT1RIRVIgRk9SIE1BUFBJTkcgVEhFIFNIQURFUiBOQU1FIFRPIFRIRSBGSUxFIFBBVEhcbiAgICBwcml2YXRlIGdhbWVTaGFkZXJzU291cmNlOiBNYXA8c3RyaW5nLCBzdHJpbmc+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgZ2FtZVNoYWRlcnNTb3VyY2VQYXRoczogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIG51bVNoYWRlcnNUb0xvYWQ6IG51bWJlcjtcbiAgICBwcml2YXRlIG51bVNoYWRlcnNMb2FkZWQ6IG51bWJlcjtcblxuICAgIC8vIFNQUklURSBUWVBFU1xuICAgIHByaXZhdGUgZ2FtZVNwcml0ZVR5cGVzOiBNYXA8c3RyaW5nLCBBbmltYXRlZFNwcml0ZVR5cGU+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgZ2FtZVNwcml0ZVR5cGVQYXRoczogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIG51bVNwcml0ZVR5cGVzVG9Mb2FkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBudW1TcHJpdGVUeXBlc0xvYWRlZDogbnVtYmVyO1xuXG4gICAgLy8gVElMRSBTRVRTXG4gICAgcHJpdmF0ZSBnYW1lVGlsZVNldHM6IE1hcDxzdHJpbmcsIFRpbGVTZXQ+ID0gbmV3IE1hcCgpO1xuICAgIHByaXZhdGUgZ2FtZVRpbGVTZXRQYXRoczogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgICBwcml2YXRlIG51bVRpbGVTZXRzVG9Mb2FkOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBudW1UaWxlU2V0c0xvYWRlZDogbnVtYmVyO1xuXG4gICAgLy8gR0FNRSBURVhUVVJFUyBcbiAgICBwcml2YXRlIGdhbWVUZXh0dXJlczogTWFwPHN0cmluZywgV2ViR0xHYW1lVGV4dHVyZT4gPSBuZXcgTWFwKCk7XG4gICAgcHJpdmF0ZSBudW1UZXh0dXJlc1RvTG9hZDogbnVtYmVyO1xuICAgIHByaXZhdGUgbnVtVGV4dHVyZXNMb2FkZWQ6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsgfVxuXG4gICAgLy8gQUNDRVNTT1IgTUVUSE9EU1xuXG4gICAgcHVibGljIGdldFNoYWRlclNvdXJjZShzaGFkZXJOYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gdGhpcy5nYW1lU2hhZGVyc1NvdXJjZS5nZXQoc2hhZGVyTmFtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFuaW1hdGVkU3ByaXRlVHlwZShzcHJpdGVUeXBlTmFtZTogc3RyaW5nKTogQW5pbWF0ZWRTcHJpdGVUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2FtZVNwcml0ZVR5cGVzLmdldChzcHJpdGVUeXBlTmFtZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVTZXQodGlsZVNldE5hbWU6IHN0cmluZyk6IFRpbGVTZXQge1xuICAgICAgICByZXR1cm4gdGhpcy5nYW1lVGlsZVNldHMuZ2V0KHRpbGVTZXROYW1lKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGV4dHVyZSh0ZXh0dXJlUGF0aDogc3RyaW5nKTogV2ViR0xHYW1lVGV4dHVyZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdhbWVUZXh0dXJlcy5nZXQodGV4dHVyZVBhdGgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgLy8gQ0xFQVIgVEhFIFNIQURFUiBTT1VSQ0UgXG4gICAgICAgIHRoaXMuZ2FtZVNoYWRlcnNTb3VyY2UuY2xlYXIoKTtcbiAgICAgICAgdGhpcy5nYW1lU2hhZGVyc1NvdXJjZVBhdGhzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gQ0xFQVIgVEhFIFNQUklURSBUWVBFU1xuICAgICAgICB0aGlzLmdhbWVTcHJpdGVUeXBlcy5jbGVhcigpO1xuICAgICAgICB0aGlzLmdhbWVTcHJpdGVUeXBlUGF0aHMuY2xlYXIoKTtcblxuICAgICAgICAvLyBDTEVBUiBUSEUgVEVYVFVSRVNcbiAgICAgICAgdGhpcy5nYW1lVGV4dHVyZXMuY2xlYXIoKTtcblxuICAgICAgICAvLyBXRSBSRUFMTFkgU0hPVUxEIEFERCBGVU5DVElPTkFMSVRZIFRPIFJFTU9WRVxuICAgICAgICAvLyBBTEwgVEhFIFJFU09VUkNFUyBGUk9NIFRIRSBHUFUgT05FIEJZIE9ORVxuICAgICAgICAvLyBCVVQgVEhBVCdTIFNPTUVUSElORyBGT1IgVEhFIEZVVFVSRVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGxvYWRTY2VuZSBpcyByZXNwb25zaWJsZSBmb3IgbG9hZGluZyBhbGwgdGhlIGV4dGVybmFsIGZpbGVzIG5lZWRlZCBmb3JcbiAgICAgKiBwbGF5aW5nIHRoZSBnYW1lLiBUaGVzZSB3aWxsIGJlIHVzZWQgZm9yIGxvYWRpbmcgdGhlIHNjZW5lLCBtYXBzLFxuICAgICAqIGFuaW1hdGVkIHNwcml0ZXMsIHRleHR1cmVzLCBhbmQgc2hhZGVycy5cbiAgICAgKi9cbiAgICBwdWJsaWMgbG9hZFNjZW5lKHNjZW5lUGF0aDogc3RyaW5nLFxuICAgICAgICBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoLFxuICAgICAgICByZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vIENMRUFSIFRIRSBTQ0VORSBHUkFQSCBUTyBHRVQgUklEIE9GIEFMTCBUSEUgT0xEIFNUVUZGXG4gICAgICAgIC8vIFRIQVQgTUFZIEhBVkUgQkVFTiBMT0FERUQgRk9SIFNPTUUgT1RIRVIgTEVWRUxcbiAgICAgICAgc2NlbmVHcmFwaC5jbGVhcigpO1xuXG4gICAgICAgIC8vIENMRUFSIEFMTCBUSEUgU0NFTkUgUkVTT1VSQ0VTIFxuICAgICAgICB0aGlzLmNsZWFyKCk7XG5cbiAgICAgICAgLy8gV0UgSEFWRSBPVVIgT1dOIENVU1RPTSBKU09OIEZJTEUgRk9STUFUIFRPIFJFUFJFU0VOVCBPVVIgU0NFTkVcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9hZFRleHRGaWxlKHNjZW5lUGF0aCwgZnVuY3Rpb24gKGpzb25TY2VuZVRleHQ6IHN0cmluZykge1xuICAgICAgICAgICAgbGV0IHNjZW5lRGF0YTogU2NlbmVEYXRhID0gPFNjZW5lRGF0YT5KU09OLnBhcnNlKGpzb25TY2VuZVRleHQpO1xuICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkU2hhZGVyc1NvdXJjZShyZW5kZXJpbmdTeXN0ZW0sIHNjZW5lRGF0YS5zaGFkZXJTb3VyY2VQYXRocywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIE5FWFQgTE9BRCBUSEUgTUFQLCBXSElDSCBXSUxMIEZPUkNFIEEgTE9BRElORyBPRlxuICAgICAgICAgICAgICAgIC8vIEFOWSBVU0VEIFRJTEUgU0VUIFRFWFRVUkVTIEFTIFdFTEwgQVMgVEhFIENSRUFUSU9OXG4gICAgICAgICAgICAgICAgLy8gT0YgVElMRUQgTEFZRVJTIFRPIEJFIEFEREVEIFRPIFRIRSBTQ0VORVxuICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIubG9hZE1hcChzY2VuZURhdGEubWFwUGF0aCwgcmVuZGVyaW5nU3lzdGVtLCBzY2VuZUdyYXBoLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVyBUSEFUIFRIRSBNQVAgSEFTIEJFRU4gTE9BREVEIExPQUQgQUxMIFRIRSBTUFJJVEUgVFlQRVNcbiAgICAgICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkU3ByaXRlVHlwZXMocmVuZGVyaW5nU3lzdGVtLCBzY2VuZURhdGEuc3ByaXRlVHlwZVBhdGhzLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOT1cgV0UgQ0FOIElOSVQgQUxMIFNIQURFUlNcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuaW5pdEFsbFNoYWRlcnMocmVuZGVyaW5nU3lzdGVtLCBzY2VuZUdyYXBoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXRBbGxTaGFkZXJzKHJlbmRlcmluZ1N5c3RlbTogV2ViR0xHYW1lUmVuZGVyaW5nU3lzdGVtLFxuICAgICAgICBzY2VuZUdyYXBoOiBTY2VuZUdyYXBoKTogdm9pZCB7XG4gICAgICAgIC8vIFNFVFVQIFRIRSBTUFJJVEUgUkVOREVSRVIgRk9SIFVTRSBXSVRIIFRIRSBTUFJJVEUgU0hBREVSIFRIQVQnUyBCRUVOIExPQURFRFxuICAgICAgICBsZXQgc3ByaXRlUmVuZGVyZXJWZXJ0ZXhTaGFkZXJTb3VyY2U6IHN0cmluZyA9IHRoaXMuZ2V0U2hhZGVyU291cmNlKFwiU1BSSVRFX1ZFUlRFWF9TSEFERVJcIik7XG4gICAgICAgIGxldCBzcHJpdGVSZW5kZXJlckZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmcgPSB0aGlzLmdldFNoYWRlclNvdXJjZShcIlNQUklURV9GUkFHTUVOVF9TSEFERVJcIik7XG4gICAgICAgIHJlbmRlcmluZ1N5c3RlbS5nZXRTcHJpdGVSZW5kZXJlcigpLmluaXQocmVuZGVyaW5nU3lzdGVtLmdldFdlYkdMKCksIHNwcml0ZVJlbmRlcmVyVmVydGV4U2hhZGVyU291cmNlLCBzcHJpdGVSZW5kZXJlckZyYWdtZW50U2hhZGVyU291cmNlLCBudWxsKTtcblxuICAgICAgICAvLyBTRVRVUCBUSEUgVElMRUQgTEFZRVIgUkVOREVSRVIgRk9SIFVTRSBXSVRIIFRIRSBUSUxFRCBTSEFERVIgVEhBVCdTIEJFRU4gTE9BREVEXG4gICAgICAgIGxldCB0aWxlZExheWVyVmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmcgPSB0aGlzLmdldFNoYWRlclNvdXJjZShcIlRJTEVEX0xBWUVSX1ZFUlRFWF9TSEFERVJcIik7XG4gICAgICAgIGxldCB0aWxlZExheWVyRnJhZ21lbnRTaGFkZXJTb3VyY2U6IHN0cmluZyA9IHRoaXMuZ2V0U2hhZGVyU291cmNlKFwiVElMRURfTEFZRVJfRlJBR01FTlRfU0hBREVSXCIpO1xuICAgICAgICByZW5kZXJpbmdTeXN0ZW0uZ2V0VGlsZWRMYXllclJlbmRlcmVyKCkuaW5pdChyZW5kZXJpbmdTeXN0ZW0uZ2V0V2ViR0woKSwgdGlsZWRMYXllclZlcnRleFNoYWRlclNvdXJjZSwgdGlsZWRMYXllckZyYWdtZW50U2hhZGVyU291cmNlLCBzY2VuZUdyYXBoLmdldFRpbGVkTGF5ZXJzKCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBsb2FkU2hhZGVyc1NvdXJjZShyZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgbmFtZWRQYXRoczogQXJyYXk8TmFtZWRQYXRoPixcbiAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vIFNUQVJUIEJZIExPQURJTkcgQUxMIFRIRSBTSEFERVIgU09VUkNFIEZJTEVTIFRIRVNFIENBTiBUSEVOIEJFXG4gICAgICAgIC8vIFJFVFJJRVZFRCBMQVRFUiBCWSBUSEUgUkVOREVSRVJTIFdIRU4gSVRTIFRJTUUgVE8gQlVJTEQgVEhFIFxuICAgICAgICAvLyBTSEFERVIgUFJPR1JBTVNcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubnVtU2hhZGVyc0xvYWRlZCA9IDA7XG4gICAgICAgIHRoaXMubnVtU2hhZGVyc1RvTG9hZCA9IG5hbWVkUGF0aHMubGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgbmFtZWRQYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5hbWVkUGF0aDogTmFtZWRQYXRoID0gbmFtZWRQYXRoc1tpXTtcbiAgICAgICAgICAgIGxldCBzaGFkZXJOYW1lOiBzdHJpbmcgPSBuYW1lZFBhdGgubmFtZTtcbiAgICAgICAgICAgIGxldCBzaGFkZXJQYXRoOiBzdHJpbmcgPSBuYW1lZFBhdGgucGF0aDtcbiAgICAgICAgICAgIHRoaXMubG9hZFRleHRGaWxlKHNoYWRlclBhdGgsIGZ1bmN0aW9uIChzaGFkZXJTb3VyY2VDb2RlOiBzdHJpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTaGFkZXJzU291cmNlLnNldChzaGFkZXJOYW1lLCBzaGFkZXJTb3VyY2VDb2RlKTtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVTaGFkZXJzU291cmNlUGF0aHMuc2V0KHNoYWRlck5hbWUsIHNoYWRlclBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuY29tcGxldGVMb2FkaW5nU2hhZGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQUxMIFNPVVJDRSBDT0RFIElTIExPQURFRCBTTyBETyBXSEFUJ1MgTkVYVFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYnVpbGRQYXRoVG9GaWxlSW5TYW1lRGlyZWN0b3J5KGJhc2VGaWxlV2l0aFBhdGg6IHN0cmluZywgdGFyZ2V0RmlsZU5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgICAgIGxldCBsYXN0SW5kZXhPZlNsYXNoOiBudW1iZXIgPSBiYXNlRmlsZVdpdGhQYXRoLmxhc3RJbmRleE9mKCcvJyk7XG4gICAgICAgIGxldCB0YXJnZXRGaWxlUGF0aDogc3RyaW5nID0gXCIuL1wiO1xuICAgICAgICBpZiAobGFzdEluZGV4T2ZTbGFzaCA+IDApXG4gICAgICAgICAgICB0YXJnZXRGaWxlUGF0aCA9IGJhc2VGaWxlV2l0aFBhdGguc3Vic3RyaW5nKDAsIGxhc3RJbmRleE9mU2xhc2gpO1xuICAgICAgICB0YXJnZXRGaWxlUGF0aCArPSBcIi9cIiArIHRhcmdldEZpbGVOYW1lO1xuICAgICAgICByZXR1cm4gdGFyZ2V0RmlsZVBhdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGxvYWRNYXAobWFwUGF0aDogc3RyaW5nLFxuICAgICAgICByZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgc2NlbmVHcmFwaDogU2NlbmVHcmFwaCxcbiAgICAgICAgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCB0aGlzUmVzb3VyY2VNYW5hZ2VyOiBSZXNvdXJjZU1hbmFnZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLmxvYWRUZXh0RmlsZShtYXBQYXRoLCBmdW5jdGlvbiAoanNvbk1hcFRleHQ6IHN0cmluZykge1xuICAgICAgICAgICAgbGV0IG1hcERhdGE6IE1hcERhdGEgPSA8TWFwRGF0YT5KU09OLnBhcnNlKGpzb25NYXBUZXh0KTtcblxuICAgICAgICAgICAgLy8gV0UgT05MWSBVU0UgT05FIFRJTEUgU0VUXG4gICAgICAgICAgICBsZXQgdGlsZXNldEZpbGVOYW1lOiBzdHJpbmcgPSBtYXBEYXRhLnRpbGVzZXRzWzBdLmltYWdlO1xuICAgICAgICAgICAgbGV0IHRpbGVzZXRGaWxlUGF0aCA9IHRoaXNSZXNvdXJjZU1hbmFnZXIuYnVpbGRQYXRoVG9GaWxlSW5TYW1lRGlyZWN0b3J5KG1hcFBhdGgsIHRpbGVzZXRGaWxlTmFtZSk7XG5cbiAgICAgICAgICAgIC8vIFVTRSBUSEUgUEFUSFMgVE9MT0FEIFRIRSBUSUxFIFNFVCBURVhUVVJFU1xuICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5sb2FkVGV4dHVyZSh0aWxlc2V0RmlsZVBhdGgsIHJlbmRlcmluZ1N5c3RlbSwgZnVuY3Rpb24gKHRpbGVzZXRUZXh0dXJlOiBXZWJHTEdhbWVUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgLy8gTk9XIFRIQVQgVEhFIFRJTEUgU0VUIFRFWFRVUkVTIEhBVkUgQkVFTiBMT0FERUQsXG4gICAgICAgICAgICAgICAgLy8gTE9BRCBBTEwgVEhFSVIgQVNTT0NJQVRFRCBUSUxFU0VUIERBVEFcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1hcERhdGEudGlsZXNldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVTZXREYXRhOiBUaWxlU2V0RGF0YSA9IG1hcERhdGEudGlsZXNldHNbaV07XG4gICAgICAgICAgICAgICAgICAgIGxldCByb3dzOiBudW1iZXIgPSBNYXRoLmNlaWwodGlsZVNldERhdGEudGlsZWNvdW50IC8gdGlsZVNldERhdGEuY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0aWxlU2V0VG9BZGQ6IFRpbGVTZXQgPSBuZXcgVGlsZVNldChcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2V0RGF0YS5jb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLnRpbGV3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLnRpbGVoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWxlU2V0RGF0YS5zcGFjaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNldERhdGEuaW1hZ2V3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVTZXREYXRhLmltYWdlaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZVNldERhdGEuZmlyc3RnaWQgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGlsZXNldFRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVUaWxlU2V0cy5zZXQodGlsZVNldFRvQWRkLmdldE5hbWUoKSwgdGlsZVNldFRvQWRkKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBBTkQgTk9XIFRIQVQgVEhFIFRJTEUgU0VUUyBIQVZFIEJFRU4gTE9BREVEXG4gICAgICAgICAgICAgICAgLy8gV0UgQ0FOIExPQUQgVEhFIE1BUCdTIFRJTEVEIExBWUVSUywgVEhPVUdIIE5PVEVcbiAgICAgICAgICAgICAgICAvLyBJTiBUSElTIEVYQU1QTEUgV0UgQVJFIEdPSU5HIFRPIEtFRVAgSVQgU0lNUExFXG4gICAgICAgICAgICAgICAgLy8gQU5EIEFTU1VNRSBUSEVSRSBJUyBPTkxZIE9ORSBUSUxFIFNFVFxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWFwRGF0YS5sYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxheWVyRGF0YTogVGlsZWRMYXllckRhdGEgPSBtYXBEYXRhLmxheWVyc1tpXTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBUSElTIExJTkUgT0YgQ09ERSBJUyBGVU5LWSwgV0UgQ0FOIE9OTFkgRE8gVEhJUyBXSVRIIEEgU0lOR0xFIFRJTEUgU0VULFxuICAgICAgICAgICAgICAgICAgICAvLyBTTyBUTyBNQUtFIFRISVMgQSBSRUFMIEdBTUUgRU5HSU5FIFRISVMgV09VTEQgTkVFRCBUTyBCRSBGSVhFRFxuICAgICAgICAgICAgICAgICAgICBsZXQgbGF5ZXJUaWxlU2V0OiBUaWxlU2V0ID0gdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lVGlsZVNldHMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFdFIEFSRSBBU1NVTUlORyBFQUNIIExBWUVSIFVTRVMgSlVTVCBPTkUgVElMRSBTRVQsIFdISUNIIE1JR0hUIE5PVFxuICAgICAgICAgICAgICAgICAgICAvLyBORUNFU1NBUklMWSBCRSBUUlVFLiBCVVQgRk9SIE5PVywgTEVUJ1MgSlVTVCBNQUtFIFRIRSBMQVlFUlMgQUxMXG4gICAgICAgICAgICAgICAgICAgIC8vIFVTSU5HIFRIRSBTQU1FIFRJTEUgU0VULCBBREQgVEhFIFRJTEVTLCBBTkQgVEhFTiBBREQgVEhFTSBUTyBUSEUgU0NFTkUgR1JBUEhcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRpbGVkTGF5ZXI6IFRpbGVkTGF5ZXIgPSBuZXcgVGlsZWRMYXllcihsYXllckRhdGEud2lkdGgsIGxheWVyRGF0YS5oZWlnaHQsIGxheWVyVGlsZVNldCk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGF5ZXJEYXRhLmRhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0aWxlSW5kZXg6IG51bWJlciA9IGxheWVyRGF0YS5kYXRhW2pdIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbGVkTGF5ZXIuYWRkVGlsZSh0aWxlSW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNjZW5lR3JhcGguYWRkTGF5ZXIodGlsZWRMYXllcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIExvYWRzIHRoZSB0ZXh0dXJlUGF0aCBmaWxlIGFyZ3VtZW50IGFuZCBvbmNlXG4gICAgICogdGhhdCBpcyBkb25lIGl0IGNhbGxzIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbiAgICAgKi9cbiAgICBwdWJsaWMgbG9hZFRleHR1cmUodGV4dHVyZVBhdGg6IHN0cmluZyxcbiAgICAgICAgcmVuZGVyaW5nU3lzdGVtOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0sXG4gICAgICAgIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICBsZXQgdGhpc1Jlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIubG9hZEltYWdlKHRleHR1cmVQYXRoLCBmdW5jdGlvbiAocGF0aDogc3RyaW5nLCBpbWFnZTogSFRNTEltYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgbGV0IHRleHR1cmVUb0xvYWQ6IFdlYkdMR2FtZVRleHR1cmUgPSBuZXcgV2ViR0xHYW1lVGV4dHVyZSgpO1xuICAgICAgICAgICAgbGV0IGlkOiBudW1iZXIgPSB0aGlzUmVzb3VyY2VNYW5hZ2VyLmdhbWVUZXh0dXJlcy5zaXplO1xuICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lVGV4dHVyZXMuc2V0KHBhdGgsIHRleHR1cmVUb0xvYWQpO1xuICAgICAgICAgICAgcmVuZGVyaW5nU3lzdGVtLmluaXRXZWJHTFRleHR1cmUodGV4dHVyZVRvTG9hZCwgaWQsIGltYWdlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2FsbGJhY2sodGV4dHVyZVRvTG9hZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLypcbiAgICAgKiBMb2FkcyBhbGwgdGhlIHNwcml0ZSB0eXBlcyBsaXN0ZWQgaW4gdGhlIHNwcml0ZVR5cGVQYXRocyBhcmd1bWVudCBhbmQgb25jZVxuICAgICAqIHRoYXQgaXMgZG9uZSBpdCBjYWxscyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24uXG4gICAgICovXG4gICAgcHVibGljIGxvYWRTcHJpdGVUeXBlcyhyZW5kZXJpbmdTeXN0ZW06IFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSxcbiAgICAgICAgc3ByaXRlVHlwZVBhdGhzOiBBcnJheTxOYW1lZFBhdGg+LFxuICAgICAgICBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgLy8gVEhFTiBMT0FEIFRIRSBURVhUVVJFUyBXRSdMTCBCRSBVU0lOR1xuICAgICAgICB0aGlzLm51bVNwcml0ZVR5cGVzVG9Mb2FkID0gc3ByaXRlVHlwZVBhdGhzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5udW1TcHJpdGVUeXBlc0xvYWRlZCA9IDA7XG4gICAgICAgIGxldCB0aGlzUmVzb3VyY2VNYW5hZ2VyID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgbmFtZWRQYXRoIG9mIHNwcml0ZVR5cGVQYXRocykge1xuICAgICAgICAgICAgbGV0IG5hbWU6IHN0cmluZyA9IG5hbWVkUGF0aC5uYW1lO1xuICAgICAgICAgICAgbGV0IHBhdGg6IHN0cmluZyA9IG5hbWVkUGF0aC5wYXRoO1xuICAgICAgICAgICAgdGhpcy5sb2FkU3ByaXRlVHlwZShyZW5kZXJpbmdTeXN0ZW0sIG5hbWUsIHBhdGgsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGlzUmVzb3VyY2VNYW5hZ2VyLmNvbXBsZXRlTG9hZGluZ1Nwcml0ZVR5cGUoY2FsbGJhY2spO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQUklWQVRFIEhFTFBFUiBNRVRIT0RTXG5cbiAgICAvLyBMT0FEUyBBIE5FVyBKU09OIEZJTEUgQU5EIFVQT04gQ09NUExFVElPTiBDQUxMUyBUSEUgY2FsbGJhY2sgRlVOQ1RJT05cbiAgICBwcml2YXRlIGxvYWRUZXh0RmlsZSh0ZXh0RmlsZVBhdGg6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIGxldCB4b2JqOiBYTUxIdHRwUmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICB4b2JqLm92ZXJyaWRlTWltZVR5cGUoXCJhcHBsaWNhdGlvbi9qc29uXCIpO1xuICAgICAgICB4b2JqLm9wZW4oJ0dFVCcsIHRleHRGaWxlUGF0aCwgdHJ1ZSk7XG4gICAgICAgIHhvYmoub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCh4b2JqLnJlYWR5U3RhdGUgPT0gNCkgJiYgKHhvYmouc3RhdHVzID09IDIwMCkpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh4b2JqLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHhvYmouc2VuZChudWxsKTtcbiAgICB9XG5cbiAgICAvLyBDSEVDS1MgVE8gU0VFIElGIEFMTCBTSEFERVIgTE9BRElORyBJUyBDT01QTEVURSwgSUYgWUVTLCBjYWxsYmFjayBJUyBJTlZPS0VEXG4gICAgcHJpdmF0ZSBjb21wbGV0ZUxvYWRpbmdTaGFkZXIoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtU2hhZGVyc0xvYWRlZCsrO1xuICAgICAgICBpZiAodGhpcy5udW1TaGFkZXJzTG9hZGVkID09PSB0aGlzLm51bVNoYWRlcnNUb0xvYWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDSEVDS1MgVE8gU0VFIElGIEFMTCBTUFJJVEUgVFlQRSBMT0FESU5HIElTIENPTVBMRVRFLCBJRiBZRVMsIGNhbGxiYWNrIElTIElOVk9LRURcbiAgICBwcml2YXRlIGNvbXBsZXRlTG9hZGluZ1Nwcml0ZVR5cGUoY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIHRoaXMubnVtU3ByaXRlVHlwZXNMb2FkZWQrKztcbiAgICAgICAgaWYgKHRoaXMubnVtU3ByaXRlVHlwZXNMb2FkZWQgPT09IHRoaXMubnVtU3ByaXRlVHlwZXNUb0xvYWQpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDSEVDS1MgVE8gU0VFIElGIEFMTCBURVhUVVJFIExPQURJTkcgSVMgQ09NUExFVEUsIElGIFlFUywgY2FsbGJhY2sgSVMgSU5WT0tFRFxuICAgIHByaXZhdGUgY29tcGxldGVMb2FkaW5nVGV4dHVyZShjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgdGhpcy5udW1UZXh0dXJlc0xvYWRlZCsrO1xuICAgICAgICBpZiAodGhpcy5udW1UZXh0dXJlc0xvYWRlZCA9PT0gdGhpcy5udW1UZXh0dXJlc1RvTG9hZCkge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExvYWRzIGFuIEltYWdlIGludG8gUkFNIGFuZCBvbmNlIHRoYXQgcHJvY2VzcyBpcyBjb21wbGV0ZSBpdFxuICAgICAqIGNhbGxzIHRoZSBjYWxsYmFjayBtZXRob2QgYXJndW1lbnQsIHByZXN1bWFibHkgdG8gdGhlbiBsb2FkXG4gICAgICogaXQgaW50byBHUFUgbWVtb3J5LlxuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZEltYWdlKHBhdGg6IHN0cmluZywgY2FsbGJhY2s6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vIE1BS0UgVEhFIElNQUdFXG4gICAgICAgIHZhciBpbWFnZSA9IG5ldyBJbWFnZSgpO1xuXG4gICAgICAgIC8vIE9OQ0UgVEhFIElNQUdFIExPQURJTkcgSVMgQ09NUExFVEVELCBUSEUgQ0FMTEJBQ0sgV0lMTCBHRVQgQ0FMTEVEXG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKHBhdGgsIGltYWdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNUQVJUIElNQUdFIExPQURJTkdcbiAgICAgICAgaW1hZ2Uuc3JjID0gcGF0aDtcbiAgICB9XG5cbiAgICAvKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gbG9hZHMgYSBzaW5nbGUgc3ByaXRlIHR5cGUgcmVzb3VyY2UgZnJvbSBhIEpTT04gZmlsZSBhbmQgdXBvblxuICAgICAqIGNvbXBsZXRpb24gY2FsbHMgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICAgICAqL1xuICAgIHByaXZhdGUgbG9hZFNwcml0ZVR5cGUocmVuZGVyaW5nU3lzdGVtOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0sIHNwcml0ZVR5cGVOYW1lOiBzdHJpbmcsIGpzb25GaWxlUGF0aDogc3RyaW5nLCBjYWxsYmFjazogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9hZFRleHRGaWxlKGpzb25GaWxlUGF0aCwgZnVuY3Rpb24gKGpzb25UZXh0OiBzdHJpbmcpIHtcbiAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIubG9hZFNwcml0ZVR5cGVEYXRhKHJlbmRlcmluZ1N5c3RlbSwganNvbkZpbGVQYXRoLCBqc29uVGV4dCwgZnVuY3Rpb24gKHNwcml0ZVR5cGU6IEFuaW1hdGVkU3ByaXRlVHlwZSkge1xuICAgICAgICAgICAgICAgIHRoaXNSZXNvdXJjZU1hbmFnZXIuZ2FtZVNwcml0ZVR5cGVzLnNldChzcHJpdGVUeXBlTmFtZSwgc3ByaXRlVHlwZSk7XG4gICAgICAgICAgICAgICAgdGhpc1Jlc291cmNlTWFuYWdlci5nYW1lU3ByaXRlVHlwZVBhdGhzLnNldChzcHJpdGVUeXBlTmFtZSwganNvbkZpbGVQYXRoKTtcbiAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qXG4gICAgICogVGhpcyBoZWxwZXIgZnVuY3Rpb24gbG9hZHMgYWxsIHRoZSBqc29uIHRleHQgaW50byBhbiBBbmltYXRlZFNwcml0ZVR5cGVcbiAgICAgKiBvYmplY3QgYW5kIHJldHVybnMgaXQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBsb2FkU3ByaXRlVHlwZURhdGEgPSAocmVuZGVyaW5nU3lzdGVtOiBXZWJHTEdhbWVSZW5kZXJpbmdTeXN0ZW0sXG4gICAgICAgIHNwcml0ZUZpbGVQYXRoOiBzdHJpbmcsXG4gICAgICAgIGpzb25UZXh0OiBzdHJpbmcsXG4gICAgICAgIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQgPT4ge1xuICAgICAgICBsZXQganNvbkRhdGE6IFNwcml0ZVR5cGVEYXRhID0gPFNwcml0ZVR5cGVEYXRhPkpTT04ucGFyc2UoanNvblRleHQpO1xuICAgICAgICBsZXQgdGV4dHVyZVBhdGg6IHN0cmluZyA9IHRoaXMuYnVpbGRQYXRoVG9GaWxlSW5TYW1lRGlyZWN0b3J5KHNwcml0ZUZpbGVQYXRoLCBqc29uRGF0YS5zcHJpdGVTaGVldEltYWdlKTtcbiAgICAgICAgbGV0IHRoaXNSZXNvdXJjZU1hbmFnZXI6IFJlc291cmNlTWFuYWdlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubG9hZFRleHR1cmUodGV4dHVyZVBhdGgsIHJlbmRlcmluZ1N5c3RlbSwgZnVuY3Rpb24gKHNwcml0ZXNoZWV0VGV4dHVyZTogV2ViR0xHYW1lVGV4dHVyZSkge1xuICAgICAgICAgICAgbGV0IHNwcml0ZVdpZHRoOiBudW1iZXIgPSBqc29uRGF0YS5zcHJpdGVXaWR0aDtcbiAgICAgICAgICAgIGxldCBzcHJpdGVIZWlnaHQ6IG51bWJlciA9IGpzb25EYXRhLnNwcml0ZUhlaWdodDtcbiAgICAgICAgICAgIGxldCBhbmltYXRlZFNwcml0ZVR5cGUgPSBuZXcgQW5pbWF0ZWRTcHJpdGVUeXBlKHNwcml0ZXNoZWV0VGV4dHVyZSwgc3ByaXRlV2lkdGgsIHNwcml0ZUhlaWdodCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGpzb25EYXRhLmFuaW1hdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYW5pbWF0aW9uID0gPEFuaW1hdGlvblN0YXRlRGF0YT5qc29uRGF0YS5hbmltYXRpb25zW2ldO1xuICAgICAgICAgICAgICAgIGFuaW1hdGVkU3ByaXRlVHlwZS5hZGRBbmltYXRpb24oYW5pbWF0aW9uLm5hbWUsICghYW5pbWF0aW9uLnJlcGVhdCA/IGFuaW1hdGlvbi5uZXh0IDogYW5pbWF0aW9uLm5hbWUpKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGFuaW1hdGlvbi5mcmFtZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZyYW1lID0gYW5pbWF0aW9uLmZyYW1lc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZWRTcHJpdGVUeXBlLmFkZEFuaW1hdGlvbkZyYW1lKGFuaW1hdGlvbi5uYW1lLCBmcmFtZS5pbmRleCwgZnJhbWUuZHVyYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhbGxiYWNrKGFuaW1hdGVkU3ByaXRlVHlwZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iLCJleHBvcnQgYWJzdHJhY3QgY2xhc3MgR2FtZUxvb3BUZW1wbGF0ZSB7XG4gICAgLy8gQUxMIElOU1RBTkNFIFZBUklBQkxFUyBXSUxMIEJFIElOSVRJQUxJWkVEIFZJQSBUSEUgQ09OU1RSVUNUT1JcbiAgICBwcml2YXRlIGZwczogbnVtYmVyO1xuICAgIHByaXZhdGUgc2ltdWxhdGlvblRpbWVzdGVwOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmcmFtZURlbHRhOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBsYXN0RnJhbWVUaW1lTXM6IG51bWJlcjtcbiAgICBwcml2YXRlIGZwc0FscGhhOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBmcHNVcGRhdGVJbnRlcnZhbDogbnVtYmVyO1xuICAgIHByaXZhdGUgbGFzdEZwc1VwZGF0ZTogbnVtYmVyO1xuICAgIHByaXZhdGUgZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBudW1VcGRhdGVTdGVwczogbnVtYmVyO1xuICAgIHByaXZhdGUgbWluRnJhbWVEZWxheTogbnVtYmVyO1xuICAgIHByaXZhdGUgcnVubmluZzogYm9vbGVhbjtcbiAgICBwcml2YXRlIHN0YXJ0ZWQ6IGJvb2xlYW47XG4gICAgcHJpdmF0ZSBwYW5pYzogYm9vbGVhbjtcbiAgICBwcml2YXRlIHJhZjogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEFuIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBmcmFtZXMgcGVyIHNlY29uZC5cbiAgICAgICAgdGhpcy5mcHMgPSA2MDtcblxuICAgICAgICAvLyBUaGUgYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdG8gc2ltdWxhdGUgZWFjaCB0aW1lIHVwZGF0ZSgpIHJ1bnMuXG4gICAgICAgIC8vIFNlZSBgTWFpbkxvb3Auc2V0U2ltdWxhdGlvblRpbWVzdGVwKClgIGZvciBkZXRhaWxzLlxuICAgICAgICB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCA9IDEwMDAgLyB0aGlzLmZwcztcblxuICAgICAgICAvLyBUaGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgaW4tYXBwIHRpbWUgdGhhdCBoYXNuJ3QgYmVlbiBzaW11bGF0ZWQgeWV0LlxuICAgICAgICAvLyBTZWUgdGhlIGNvbW1lbnRzIGluc2lkZSBhbmltYXRlKCkgZm9yIGRldGFpbHMuXG4gICAgICAgIHRoaXMuZnJhbWVEZWx0YSA9IDA7XG5cbiAgICAgICAgLy8gVGhlIHRpbWVzdGFtcCBpbiBtaWxsaXNlY29uZHMgb2YgdGhlIGxhc3QgdGltZSB0aGUgbWFpbiBsb29wIHdhcyBydW4uXG4gICAgICAgIC8vIFVzZWQgdG8gY29tcHV0ZSB0aGUgdGltZSBlbGFwc2VkIGJldHdlZW4gZnJhbWVzLlxuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWVNcyA9IDA7XG5cbiAgICAgICAgLy8gQSBmYWN0b3IgdGhhdCBhZmZlY3RzIGhvdyBoZWF2aWx5IHRvIHdlaWdodCBtb3JlIHJlY2VudCBzZWNvbmRzJ1xuICAgICAgICAvLyBwZXJmb3JtYW5jZSB3aGVuIGNhbGN1bGF0aW5nIHRoZSBhdmVyYWdlIGZyYW1lcyBwZXIgc2Vjb25kLiBWYWxpZCB2YWx1ZXNcbiAgICAgICAgLy8gcmFuZ2UgZnJvbSB6ZXJvIHRvIG9uZSBpbmNsdXNpdmUuIEhpZ2hlciB2YWx1ZXMgcmVzdWx0IGluIHdlaWdodGluZyBtb3JlXG4gICAgICAgIC8vIHJlY2VudCBzZWNvbmRzIG1vcmUgaGVhdmlseS5cbiAgICAgICAgdGhpcy5mcHNBbHBoYSA9IDAuOTtcblxuICAgICAgICAvLyBUaGUgbWluaW11bSBkdXJhdGlvbiBiZXR3ZWVuIHVwZGF0ZXMgdG8gdGhlIGZyYW1lcy1wZXItc2Vjb25kIGVzdGltYXRlLlxuICAgICAgICAvLyBIaWdoZXIgdmFsdWVzIGluY3JlYXNlIGFjY3VyYWN5LCBidXQgcmVzdWx0IGluIHNsb3dlciB1cGRhdGVzLlxuICAgICAgICB0aGlzLmZwc1VwZGF0ZUludGVydmFsID0gMTAwMDtcblxuICAgICAgICAvLyBUaGUgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMpIG9mIHRoZSBsYXN0IHRpbWUgdGhlIGBmcHNgIG1vdmluZ1xuICAgICAgICAvLyBhdmVyYWdlIHdhcyB1cGRhdGVkLlxuICAgICAgICB0aGlzLmxhc3RGcHNVcGRhdGUgPSAwO1xuXG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgZnJhbWVzIGRlbGl2ZXJlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBgZnBzYCBtb3ZpbmdcbiAgICAgICAgLy8gYXZlcmFnZSB3YXMgdXBkYXRlZCAoaS5lLiBzaW5jZSBgbGFzdEZwc1VwZGF0ZWApLlxuICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSA9IDA7XG5cbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0aW1lcyB1cGRhdGUoKSBpcyBjYWxsZWQgaW4gYSBnaXZlbiBmcmFtZS4gVGhpcyBpcyBvbmx5XG4gICAgICAgIC8vIHJlbGV2YW50IGluc2lkZSBvZiBhbmltYXRlKCksIGJ1dCBhIHJlZmVyZW5jZSBpcyBoZWxkIGV4dGVybmFsbHkgc28gdGhhdFxuICAgICAgICAvLyB0aGlzIHZhcmlhYmxlIGlzIG5vdCBtYXJrZWQgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluXG4gICAgICAgIC8vIGxvb3AgcnVucy5cbiAgICAgICAgdGhpcy5udW1VcGRhdGVTdGVwcyA9IDA7XG5cbiAgICAgICAgLy8gVGhlIG1pbmltdW0gYW1vdW50IG9mIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRoYXQgbXVzdCBwYXNzIHNpbmNlIHRoZSBsYXN0XG4gICAgICAgIC8vIGZyYW1lIHdhcyBleGVjdXRlZCBiZWZvcmUgYW5vdGhlciBmcmFtZSBjYW4gYmUgZXhlY3V0ZWQuIFRoZVxuICAgICAgICAvLyBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIGNhcHMgdGhlIEZQUyAodGhlIGRlZmF1bHQgb2YgemVybyBtZWFucyB0aGVyZSBpc1xuICAgICAgICAvLyBubyBjYXApLlxuICAgICAgICB0aGlzLm1pbkZyYW1lRGVsYXkgPSAwO1xuXG4gICAgICAgIC8vIFdoZXRoZXIgdGhlIG1haW4gbG9vcCBpcyBydW5uaW5nLlxuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcblxuICAgICAgICAvLyBgdHJ1ZWAgaWYgYE1haW5Mb29wLnN0YXJ0KClgIGhhcyBiZWVuIGNhbGxlZCBhbmQgdGhlIG1vc3QgcmVjZW50IHRpbWUgaXRcbiAgICAgICAgLy8gd2FzIGNhbGxlZCBoYXMgbm90IGJlZW4gZm9sbG93ZWQgYnkgYSBjYWxsIHRvIGBNYWluTG9vcC5zdG9wKClgLiBUaGlzIGlzXG4gICAgICAgIC8vIGRpZmZlcmVudCB0aGFuIGBydW5uaW5nYCBiZWNhdXNlIHRoZXJlIGlzIGEgZGVsYXkgb2YgYSBmZXcgbWlsbGlzZWNvbmRzXG4gICAgICAgIC8vIGFmdGVyIGBNYWluTG9vcC5zdGFydCgpYCBpcyBjYWxsZWQgYmVmb3JlIHRoZSBhcHBsaWNhdGlvbiBpcyBjb25zaWRlcmVkXG4gICAgICAgIC8vIFwicnVubmluZy5cIiBUaGlzIGRlbGF5IGlzIGR1ZSB0byB3YWl0aW5nIGZvciB0aGUgbmV4dCBmcmFtZS5cbiAgICAgICAgdGhpcy5zdGFydGVkID0gZmFsc2U7XG5cbiAgICAgICAgLy8gV2hldGhlciB0aGUgc2ltdWxhdGlvbiBoYXMgZmFsbGVuIHRvbyBmYXIgYmVoaW5kIHJlYWwgdGltZS5cbiAgICAgICAgLy8gU3BlY2lmaWNhbGx5LCBgcGFuaWNgIHdpbGwgYmUgc2V0IHRvIGB0cnVlYCBpZiB0b28gbWFueSB1cGRhdGVzIG9jY3VyIGluXG4gICAgICAgIC8vIG9uZSBmcmFtZS4gVGhpcyBpcyBvbmx5IHJlbGV2YW50IGluc2lkZSBvZiBhbmltYXRlKCksIGJ1dCBhIHJlZmVyZW5jZSBpc1xuICAgICAgICAvLyBoZWxkIGV4dGVybmFsbHkgc28gdGhhdCB0aGlzIHZhcmlhYmxlIGlzIG5vdCBtYXJrZWQgZm9yIGdhcmJhZ2VcbiAgICAgICAgLy8gY29sbGVjdGlvbiBldmVyeSB0aW1lIHRoZSBtYWluIGxvb3AgcnVucy5cbiAgICAgICAgdGhpcy5wYW5pYyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgaG93IG1hbnkgbWlsbGlzZWNvbmRzIHNob3VsZCBiZSBzaW11bGF0ZWQgYnkgZXZlcnkgcnVuIG9mIHVwZGF0ZSgpLlxuICAgICAqXG4gICAgICogU2VlIGBNYWluTG9vcC5zZXRTaW11bGF0aW9uVGltZXN0ZXAoKWAgZm9yIGRldGFpbHMgb24gdGhpcyB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgc2hvdWxkIGJlIHNpbXVsYXRlZCBieSBldmVyeSBydW4gb2ZcbiAgICAgKiAgIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKS5cbiAgICAgKi9cbiAgICBnZXRTaW11bGF0aW9uVGltZXN0ZXAoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2ltdWxhdGlvblRpbWVzdGVwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgaG93IG1hbnkgbWlsbGlzZWNvbmRzIHNob3VsZCBiZSBzaW11bGF0ZWQgYnkgZXZlcnkgcnVuIG9mIHVwZGF0ZSgpLlxuICAgICAqXG4gICAgICogVGhlIHBlcmNlaXZlZCBmcmFtZXMgcGVyIHNlY29uZCAoRlBTKSBpcyBlZmZlY3RpdmVseSBjYXBwZWQgYXQgdGhlXG4gICAgICogbXVsdGlwbGljYXRpdmUgaW52ZXJzZSBvZiB0aGUgc2ltdWxhdGlvbiB0aW1lc3RlcC4gVGhhdCBpcywgaWYgdGhlXG4gICAgICogdGltZXN0ZXAgaXMgMTAwMCAvIDYwICh3aGljaCBpcyB0aGUgZGVmYXVsdCksIHRoZW4gdGhlIG1heGltdW0gcGVyY2VpdmVkXG4gICAgICogRlBTIGlzIGVmZmVjdGl2ZWx5IDYwLiBEZWNyZWFzaW5nIHRoZSB0aW1lc3RlcCBpbmNyZWFzZXMgdGhlIG1heGltdW1cbiAgICAgKiBwZXJjZWl2ZWQgRlBTIGF0IHRoZSBjb3N0IG9mIHJ1bm5pbmcge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpIG1vcmVcbiAgICAgKiB0aW1lcyBwZXIgZnJhbWUgYXQgbG93ZXIgZnJhbWUgcmF0ZXMuIFNpbmNlIHJ1bm5pbmcgdXBkYXRlKCkgbW9yZSB0aW1lc1xuICAgICAqIHRha2VzIG1vcmUgdGltZSB0byBwcm9jZXNzLCB0aGlzIGNhbiBhY3R1YWxseSBzbG93IGRvd24gdGhlIGZyYW1lIHJhdGUuXG4gICAgICogQWRkaXRpb25hbGx5LCBpZiB0aGUgYW1vdW50IG9mIHRpbWUgaXQgdGFrZXMgdG8gcnVuIHVwZGF0ZSgpIGV4Y2VlZHMgb3JcbiAgICAgKiB2ZXJ5IG5lYXJseSBleGNlZWRzIHRoZSB0aW1lc3RlcCwgdGhlIGFwcGxpY2F0aW9uIHdpbGwgZnJlZXplIGFuZCBjcmFzaFxuICAgICAqIGluIGEgc3BpcmFsIG9mIGRlYXRoICh1bmxlc3MgaXQgaXMgcmVzY3VlZDsgc2VlIGBNYWluTG9vcC5zZXRFbmQoKWAgZm9yXG4gICAgICogYW4gZXhwbGFuYXRpb24gb2Ygd2hhdCBjYW4gYmUgZG9uZSBpZiBhIHNwaXJhbCBvZiBkZWF0aCBpcyBvY2N1cnJpbmcpLlxuICAgICAqXG4gICAgICogVGhlIGV4Y2VwdGlvbiB0byB0aGlzIGlzIHRoYXQgaW50ZXJwb2xhdGluZyBiZXR3ZWVuIHVwZGF0ZXMgZm9yIGVhY2hcbiAgICAgKiByZW5kZXIgY2FuIGluY3JlYXNlIHRoZSBwZXJjZWl2ZWQgZnJhbWUgcmF0ZSBhbmQgcmVkdWNlIHZpc3VhbFxuICAgICAqIHN0dXR0ZXJpbmcuIFNlZSBgTWFpbkxvb3Auc2V0RHJhdygpYCBmb3IgYW4gZXhwbGFuYXRpb24gb2YgaG93IHRvIGRvXG4gICAgICogdGhpcy5cbiAgICAgKlxuICAgICAqIElmIHlvdSBhcmUgY29uc2lkZXJpbmcgZGVjcmVhc2luZyB0aGUgc2ltdWxhdGlvbiB0aW1lc3RlcCBpbiBvcmRlciB0b1xuICAgICAqIHJhaXNlIHRoZSBtYXhpbXVtIHBlcmNlaXZlZCBGUFMsIGtlZXAgaW4gbWluZCB0aGF0IG1vc3QgbW9uaXRvcnMgY2FuJ3RcbiAgICAgKiBkaXNwbGF5IG1vcmUgdGhhbiA2MCBGUFMuIFdoZXRoZXIgaHVtYW5zIGNhbiB0ZWxsIHRoZSBkaWZmZXJlbmNlIGFtb25nXG4gICAgICogaGlnaCBmcmFtZSByYXRlcyBkZXBlbmRzIG9uIHRoZSBhcHBsaWNhdGlvbiwgYnV0IGZvciByZWZlcmVuY2UsIGZpbG0gaXNcbiAgICAgKiB1c3VhbGx5IGRpc3BsYXllZCBhdCAyNCBGUFMsIG90aGVyIHZpZGVvcyBhdCAzMCBGUFMsIG1vc3QgZ2FtZXMgYXJlXG4gICAgICogYWNjZXB0YWJsZSBhYm92ZSAzMCBGUFMsIGFuZCB2aXJ0dWFsIHJlYWxpdHkgbWlnaHQgcmVxdWlyZSA3NSBGUFMgdG9cbiAgICAgKiBmZWVsIG5hdHVyYWwuIFNvbWUgZ2FtaW5nIG1vbml0b3JzIGdvIHVwIHRvIDE0NCBGUFMuIFNldHRpbmcgdGhlXG4gICAgICogdGltZXN0ZXAgYmVsb3cgMTAwMCAvIDE0NCBpcyBkaXNjb3VyYWdlZCBhbmQgYmVsb3cgMTAwMCAvIDI0MCBpc1xuICAgICAqIHN0cm9uZ2x5IGRpc2NvdXJhZ2VkLiBUaGUgZGVmYXVsdCBvZiAxMDAwIC8gNjAgaXMgZ29vZCBpbiBtb3N0IGNhc2VzLlxuICAgICAqXG4gICAgICogVGhlIHNpbXVsYXRpb24gdGltZXN0ZXAgc2hvdWxkIHR5cGljYWxseSBvbmx5IGJlIGNoYW5nZWQgYXRcbiAgICAgKiBkZXRlcm1pbmlzdGljIHRpbWVzIChlLmcuIGJlZm9yZSB0aGUgbWFpbiBsb29wIHN0YXJ0cyBmb3IgdGhlIGZpcnN0XG4gICAgICogdGltZSwgYW5kIG5vdCBpbiByZXNwb25zZSB0byB1c2VyIGlucHV0IG9yIHNsb3cgZnJhbWUgcmF0ZXMpIHRvIGF2b2lkXG4gICAgICogaW50cm9kdWNpbmcgbm9uLWRldGVybWluaXN0aWMgYmVoYXZpb3IuIFRoZSB1cGRhdGUgdGltZXN0ZXAgc2hvdWxkIGJlXG4gICAgICogdGhlIHNhbWUgZm9yIGFsbCBwbGF5ZXJzL3VzZXJzIGluIG11bHRpcGxheWVyL211bHRpLXVzZXIgYXBwbGljYXRpb25zLlxuICAgICAqXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLmdldFNpbXVsYXRpb25UaW1lc3RlcCgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lc3RlcFxuICAgICAqICAgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBzaG91bGQgYmUgc2ltdWxhdGVkIGJ5IGV2ZXJ5IHJ1biBvZlxuICAgICAqICAge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpLlxuICAgICAqL1xuICAgIHNldFNpbXVsYXRpb25UaW1lc3RlcCh0aW1lc3RlcDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2ltdWxhdGlvblRpbWVzdGVwID0gdGltZXN0ZXA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZXhwb25lbnRpYWwgbW92aW5nIGF2ZXJhZ2Ugb2YgdGhlIGZyYW1lcyBwZXIgc2Vjb25kLlxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqICAgVGhlIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIHRoZSBmcmFtZXMgcGVyIHNlY29uZC5cbiAgICAgKi9cbiAgICBnZXRGUFMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnBzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG1heGltdW0gZnJhbWUgcmF0ZS5cbiAgICAgKlxuICAgICAqIE90aGVyIGZhY3RvcnMgYWxzbyBsaW1pdCB0aGUgRlBTOyBzZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcGBcbiAgICAgKiBmb3IgZGV0YWlscy5cbiAgICAgKlxuICAgICAqIFNlZSBhbHNvIGBNYWluTG9vcC5zZXRNYXhBbGxvd2VkRlBTKClgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqICAgVGhlIG1heGltdW0gbnVtYmVyIG9mIGZyYW1lcyBwZXIgc2Vjb25kIGFsbG93ZWQuXG4gICAgICovXG4gICAgZ2V0TWF4QWxsb3dlZEZQUygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gMTAwMCAvIHRoaXMubWluRnJhbWVEZWxheTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgbWF4aW11bSBmcmFtZSByYXRlLlxuICAgICAqXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLmdldE1heEFsbG93ZWRGUFMoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2Zwcz1JbmZpbml0eV1cbiAgICAgKiAgIFRoZSBtYXhpbXVtIG51bWJlciBvZiBmcmFtZXMgcGVyIHNlY29uZCB0byBleGVjdXRlLiBJZiBJbmZpbml0eSBvciBub3RcbiAgICAgKiAgIHBhc3NlZCwgdGhlcmUgd2lsbCBiZSBubyBGUFMgY2FwIChhbHRob3VnaCBvdGhlciBmYWN0b3JzIGRvIGxpbWl0IHRoZVxuICAgICAqICAgRlBTOyBzZWUgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcGAgZm9yIGRldGFpbHMpLiBJZiB6ZXJvLCB0aGlzXG4gICAgICogICB3aWxsIHN0b3AgdGhlIGxvb3AsIGFuZCB3aGVuIHRoZSBsb29wIGlzIG5leHQgc3RhcnRlZCwgaXQgd2lsbCByZXR1cm5cbiAgICAgKiAgIHRvIHRoZSBwcmV2aW91cyBtYXhpbXVtIGZyYW1lIHJhdGUuIFBhc3NpbmcgbmVnYXRpdmUgdmFsdWVzIHdpbGwgc3RhbGxcbiAgICAgKiAgIHRoZSBsb29wIHVudGlsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkIGFnYWluIHdpdGggYSBwb3NpdGl2ZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBzZXRNYXhBbGxvd2VkRlBTKGZwczogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGlmICh0eXBlb2YgZnBzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgZnBzID0gSW5maW5pdHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZwcyA9PT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBEaXZpZGluZyBieSBJbmZpbml0eSByZXR1cm5zIHplcm8uXG4gICAgICAgICAgICB0aGlzLm1pbkZyYW1lRGVsYXkgPSAxMDAwIC8gZnBzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXQgdGhlIGFtb3VudCBvZiB0aW1lIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzaW11bGF0ZWQgdG8gemVyby5cbiAgICAgKlxuICAgICAqIFRoaXMgaW50cm9kdWNlcyBub24tZGV0ZXJtaW5pc3RpYyBiZWhhdmlvciBpZiBjYWxsZWQgYWZ0ZXIgdGhlXG4gICAgICogYXBwbGljYXRpb24gaGFzIHN0YXJ0ZWQgcnVubmluZyAodW5sZXNzIGl0IGlzIGJlaW5nIHJlc2V0LCBpbiB3aGljaCBjYXNlXG4gICAgICogaXQgZG9lc24ndCBtYXR0ZXIpLiBIb3dldmVyLCB0aGlzIGNhbiBiZSB1c2VmdWwgaW4gY2FzZXMgd2hlcmUgdGhlXG4gICAgICogYW1vdW50IG9mIHRpbWUgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNpbXVsYXRlZCBoYXMgZ3Jvd24gdmVyeSBsYXJnZVxuICAgICAqIChmb3IgZXhhbXBsZSwgd2hlbiB0aGUgYXBwbGljYXRpb24ncyB0YWIgZ2V0cyBwdXQgaW4gdGhlIGJhY2tncm91bmQgYW5kXG4gICAgICogdGhlIGJyb3dzZXIgdGhyb3R0bGVzIHRoZSB0aW1lcnMgYXMgYSByZXN1bHQpLiBJbiBhcHBsaWNhdGlvbnMgd2l0aFxuICAgICAqIGxvY2tzdGVwIHRoZSBwbGF5ZXIgd291bGQgZ2V0IGRyb3BwZWQsIGJ1dCBpbiBvdGhlciBuZXR3b3JrZWRcbiAgICAgKiBhcHBsaWNhdGlvbnMgaXQgbWF5IGJlIG5lY2Vzc2FyeSB0byBzbmFwIG9yIGVhc2UgdGhlIHBsYXllci91c2VyIHRvIHRoZVxuICAgICAqIGF1dGhvcml0YXRpdmUgc3RhdGUgYW5kIGRpc2NhcmQgcGVuZGluZyB1cGRhdGVzIGluIHRoZSBwcm9jZXNzLiBJblxuICAgICAqIG5vbi1uZXR3b3JrZWQgYXBwbGljYXRpb25zIGl0IG1heSBhbHNvIGJlIGFjY2VwdGFibGUgdG8gc2ltcGx5IHJlc3VtZVxuICAgICAqIHRoZSBhcHBsaWNhdGlvbiB3aGVyZSBpdCBsYXN0IGxlZnQgb2ZmIGFuZCBpZ25vcmUgdGhlIGFjY3VtdWxhdGVkXG4gICAgICogdW5zaW11bGF0ZWQgdGltZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgIFRoZSBjdW11bGF0aXZlIGFtb3VudCBvZiBlbGFwc2VkIHRpbWUgaW4gbWlsbGlzZWNvbmRzIHRoYXQgaGFzIG5vdCB5ZXRcbiAgICAgKiAgIGJlZW4gc2ltdWxhdGVkLCBidXQgaXMgYmVpbmcgZGlzY2FyZGVkIGFzIGEgcmVzdWx0IG9mIGNhbGxpbmcgdGhpc1xuICAgICAqICAgZnVuY3Rpb24uXG4gICAgICovXG4gICAgcmVzZXRGcmFtZURlbHRhKCkgOiBudW1iZXIge1xuICAgICAgICB2YXIgb2xkRnJhbWVEZWx0YSA9IHRoaXMuZnJhbWVEZWx0YTtcbiAgICAgICAgdGhpcy5mcmFtZURlbHRhID0gMDtcbiAgICAgICAgcmV0dXJuIG9sZEZyYW1lRGVsdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBtYWluIGxvb3AuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlIGFwcGxpY2F0aW9uIGlzIG5vdCBjb25zaWRlcmVkIFwicnVubmluZ1wiIGltbWVkaWF0ZWx5IGFmdGVyXG4gICAgICogdGhpcyBmdW5jdGlvbiByZXR1cm5zOyByYXRoZXIsIGl0IGlzIGNvbnNpZGVyZWQgXCJydW5uaW5nXCIgYWZ0ZXIgdGhlXG4gICAgICogYXBwbGljYXRpb24gZHJhd3MgaXRzIGZpcnN0IGZyYW1lLiBUaGUgZGlzdGluY3Rpb24gaXMgdGhhdCBldmVudFxuICAgICAqIGhhbmRsZXJzIHNob3VsZCByZW1haW4gcGF1c2VkIHVudGlsIHRoZSBhcHBsaWNhdGlvbiBpcyBydW5uaW5nLCBldmVuXG4gICAgICogYWZ0ZXIgYE1haW5Mb29wLnN0YXJ0KClgIGlzIGNhbGxlZC4gQ2hlY2sgYE1haW5Mb29wLmlzUnVubmluZygpYCBmb3IgdGhlXG4gICAgICogY3VycmVudCBzdGF0dXMuIFRvIGFjdCBhZnRlciB0aGUgYXBwbGljYXRpb24gc3RhcnRzLCByZWdpc3RlciBhIGNhbGxiYWNrXG4gICAgICogd2l0aCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKSBhZnRlciBjYWxsaW5nIHRoaXMgZnVuY3Rpb24gYW5kIGV4ZWN1dGUgdGhlXG4gICAgICogYWN0aW9uIGluIHRoYXQgY2FsbGJhY2suIEl0IGlzIHNhZmUgdG8gY2FsbCBgTWFpbkxvb3Auc3RhcnQoKWAgbXVsdGlwbGVcbiAgICAgKiB0aW1lcyBldmVuIGJlZm9yZSB0aGUgYXBwbGljYXRpb24gc3RhcnRzIHJ1bm5pbmcgYW5kIHdpdGhvdXQgY2FsbGluZ1xuICAgICAqIGBNYWluTG9vcC5zdG9wKClgIGluIGJldHdlZW4sIGFsdGhvdWdoIHRoZXJlIGlzIG5vIHJlYXNvbiB0byBkbyB0aGlzO1xuICAgICAqIHRoZSBtYWluIGxvb3Agd2lsbCBvbmx5IHN0YXJ0IGlmIGl0IGlzIG5vdCBhbHJlYWR5IHN0YXJ0ZWQuXG4gICAgICpcbiAgICAgKiBTZWUgYWxzbyBgTWFpbkxvb3Auc3RvcCgpYC5cbiAgICAgKi9cbiAgICBzdGFydCgpOiB2b2lkIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoZSBhcHBsaWNhdGlvbiBkb2Vzbid0IHN0YXJ0IHJ1bm5pbmcgaW1tZWRpYXRlbHksIHRyYWNrXG4gICAgICAgICAgICAvLyB3aGV0aGVyIHRoaXMgZnVuY3Rpb24gd2FzIGNhbGxlZCBhbmQgdXNlIHRoYXQgdG8ga2VlcCBpdCBmcm9tXG4gICAgICAgICAgICAvLyBzdGFydGluZyB0aGUgbWFpbiBsb29wIG11bHRpcGxlIHRpbWVzLlxuICAgICAgICAgICAgdGhpcy5zdGFydGVkID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gSW4gdGhlIG1haW4gbG9vcCwgZHJhdygpIGlzIGNhbGxlZCBhZnRlciB1cGRhdGUoKSwgc28gaWYgd2VcbiAgICAgICAgICAgIC8vIGVudGVyZWQgdGhlIG1haW4gbG9vcCBpbW1lZGlhdGVseSwgd2Ugd291bGQgbmV2ZXIgcmVuZGVyIHRoZVxuICAgICAgICAgICAgLy8gaW5pdGlhbCBzdGF0ZSBiZWZvcmUgYW55IHVwZGF0ZXMgb2NjdXIuIEluc3RlYWQsIHdlIHJ1biBvbmVcbiAgICAgICAgICAgIC8vIGZyYW1lIHdoZXJlIGFsbCB3ZSBkbyBpcyBkcmF3LCBhbmQgdGhlbiBzdGFydCB0aGUgbWFpbiBsb29wIHdpdGhcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IGZyYW1lLlxuICAgICAgICAgICAgdGhpcy5yYWYgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5zdGFydExvb3AuYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzdGFydExvb3AodGltZXN0YW1wIDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIC8vIFJlbmRlciB0aGUgaW5pdGlhbCBzdGF0ZSBiZWZvcmUgYW55IHVwZGF0ZXMgb2NjdXIuXG4gICAgICAgIHRoaXMuZHJhdygxKTtcblxuICAgICAgICAvLyBUaGUgYXBwbGljYXRpb24gaXNuJ3QgY29uc2lkZXJlZCBcInJ1bm5pbmdcIiB1bnRpbCB0aGVcbiAgICAgICAgLy8gYXBwbGljYXRpb24gc3RhcnRzIGRyYXdpbmcuXG4gICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7XG5cbiAgICAgICAgLy8gUmVzZXQgdmFyaWFibGVzIHRoYXQgYXJlIHVzZWQgZm9yIHRyYWNraW5nIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgICAvLyBkb24ndCBzaW11bGF0ZSB0aW1lIHBhc3NlZCB3aGlsZSB0aGUgYXBwbGljYXRpb24gd2FzIHBhdXNlZC5cbiAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lTXMgPSB0aW1lc3RhbXA7XG4gICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgdGhpcy5mcmFtZXNTaW5jZUxhc3RGcHNVcGRhdGUgPSAwO1xuXG4gICAgICAgIC8vIFN0YXJ0IHRoZSBtYWluIGxvb3AuXG4gICAgICAgIHRoaXMucmFmID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGUuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBtYWluIGxvb3AgaXMgY3VycmVudGx5IHJ1bm5pbmcuXG4gICAgICpcbiAgICAgKiBTZWUgYWxzbyBgTWFpbkxvb3Auc3RhcnQoKWAgYW5kIGBNYWluTG9vcC5zdG9wKClgLlxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgIFdoZXRoZXIgdGhlIG1haW4gbG9vcCBpcyBjdXJyZW50bHkgcnVubmluZy5cbiAgICAgKi9cbiAgICBpc1J1bm5pbmcoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmc7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcHMgdGhlIG1haW4gbG9vcC5cbiAgICAgKlxuICAgICAqIEV2ZW50IGhhbmRsaW5nIGFuZCBvdGhlciBiYWNrZ3JvdW5kIHRhc2tzIHNob3VsZCBhbHNvIGJlIHBhdXNlZCB3aGVuIHRoZVxuICAgICAqIG1haW4gbG9vcCBpcyBwYXVzZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgcGF1c2luZyBpbiBtdWx0aXBsYXllci9tdWx0aS11c2VyIGFwcGxpY2F0aW9ucyB3aWxsIGNhdXNlIHRoZVxuICAgICAqIHBsYXllcidzL3VzZXIncyBjbGllbnQgdG8gYmVjb21lIG91dCBvZiBzeW5jLiBJbiB0aGlzIGNhc2UgdGhlXG4gICAgICogc2ltdWxhdGlvbiBzaG91bGQgZXhpdCwgb3IgdGhlIHBsYXllci91c2VyIG5lZWRzIHRvIGJlIHNuYXBwZWQgdG8gdGhlaXJcbiAgICAgKiB1cGRhdGVkIHBvc2l0aW9uIHdoZW4gdGhlIG1haW4gbG9vcCBpcyBzdGFydGVkIGFnYWluLlxuICAgICAqXG4gICAgICogU2VlIGFsc28gYE1haW5Mb29wLnN0YXJ0KClgIGFuZCBgTWFpbkxvb3AuaXNSdW5uaW5nKClgLlxuICAgICAqL1xuICAgIHN0b3AoKTogdm9pZCB7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKHRoaXMucmFmKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWFpbiBsb29wIHRoYXQgcnVucyB1cGRhdGVzIGFuZCByZW5kZXJpbmcuXG4gICAgICogXG4gICAgICogQHBhcmFtIHtET01IaWdoUmVzVGltZVN0YW1wfSB0aW1lc3RhbXBcbiAgICAgKiBUaGUgY3VycmVudCB0aW1lc3RhbXAuIEluIHByYWN0aWNlIHRoaXMgaXMgc3VwcGxpZWQgYnlcbiAgICAgKiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgYXQgdGhlIHRpbWUgdGhhdCBpdCBzdGFydHMgdG8gZmlyZSBjYWxsYmFja3MuIFRoaXNcbiAgICAgKiBzaG91bGQgb25seSBiZSB1c2VkIGZvciBjb21wYXJpc29uIHRvIG90aGVyIHRpbWVzdGFtcHMgYmVjYXVzZSB0aGUgZXBvY2hcbiAgICAgKiAoaS5lLiB0aGUgXCJ6ZXJvXCIgdGltZSkgZGVwZW5kcyBvbiB0aGUgZW5naW5lIHJ1bm5pbmcgdGhpcyBjb2RlLiBJbiBlbmdpbmVzXG4gICAgICogdGhhdCBzdXBwb3J0IGBET01IaWdoUmVzVGltZVN0YW1wYCAoYWxsIG1vZGVybiBicm93c2VycyBleGNlcHQgaU9TIFNhZmFyaVxuICAgICAqIDgpIHRoZSBlcG9jaCBpcyB0aGUgdGltZSB0aGUgcGFnZSBzdGFydGVkIGxvYWRpbmcsIHNwZWNpZmljYWxseVxuICAgICAqIGBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0YC4gRXZlcnl3aGVyZSBlbHNlLCBpbmNsdWRpbmcgbm9kZS5qcyxcbiAgICAgKiB0aGUgZXBvY2ggaXMgdGhlIFVuaXggZXBvY2ggKDE5NzAtMDEtMDFUMDA6MDA6MDBaKS5cbiAgICAgKiBcbiAgICAgKiBAaWdub3JlXG4gICAgICovXG4gICAgYW5pbWF0ZSh0aW1lc3RhbXAgOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgLy8gUnVuIHRoZSBsb29wIGFnYWluIHRoZSBuZXh0IHRpbWUgdGhlIGJyb3dzZXIgaXMgcmVhZHkgdG8gcmVuZGVyLlxuICAgICAgICAvLyBXZSBzZXQgcmFmSGFuZGxlIGltbWVkaWF0ZWx5IHNvIHRoYXQgdGhlIG5leHQgZnJhbWUgY2FuIGJlIGNhbmNlbGVkXG4gICAgICAgIC8vIGR1cmluZyB0aGUgY3VycmVudCBmcmFtZS5cbiAgICAgICAgdGhpcy5yYWYgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuYW5pbWF0ZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvLyBUaHJvdHRsZSB0aGUgZnJhbWUgcmF0ZSAoaWYgbWluRnJhbWVEZWxheSBpcyBzZXQgdG8gYSBub24temVybyB2YWx1ZSBieVxuICAgICAgICAvLyBgTWFpbkxvb3Auc2V0TWF4QWxsb3dlZEZQUygpYCkuXG4gICAgICAgIGlmICh0aW1lc3RhbXAgPCB0aGlzLmxhc3RGcmFtZVRpbWVNcyArIHRoaXMubWluRnJhbWVEZWxheSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZnJhbWVEZWx0YSBpcyB0aGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgaW4tYXBwIHRpbWUgdGhhdCBoYXNuJ3QgYmVlblxuICAgICAgICAvLyBzaW11bGF0ZWQgeWV0LiBBZGQgdGhlIHRpbWUgc2luY2UgdGhlIGxhc3QgZnJhbWUuIFdlIG5lZWQgdG8gdHJhY2sgdG90YWxcbiAgICAgICAgLy8gbm90LXlldC1zaW11bGF0ZWQgdGltZSAoYXMgb3Bwb3NlZCB0byBqdXN0IHRoZSB0aW1lIGVsYXBzZWQgc2luY2UgdGhlXG4gICAgICAgIC8vIGxhc3QgZnJhbWUpIGJlY2F1c2Ugbm90IGFsbCBhY3R1YWxseSBlbGFwc2VkIHRpbWUgaXMgZ3VhcmFudGVlZCB0byBiZVxuICAgICAgICAvLyBzaW11bGF0ZWQgZWFjaCBmcmFtZS4gU2VlIHRoZSBjb21tZW50cyBiZWxvdyBmb3IgZGV0YWlscy5cbiAgICAgICAgdGhpcy5mcmFtZURlbHRhICs9IHRpbWVzdGFtcCAtIHRoaXMubGFzdEZyYW1lVGltZU1zO1xuICAgICAgICB0aGlzLmxhc3RGcmFtZVRpbWVNcyA9IHRpbWVzdGFtcDtcblxuICAgICAgICAvLyBSdW4gYW55IHVwZGF0ZXMgdGhhdCBhcmUgbm90IGRlcGVuZGVudCBvbiB0aW1lIGluIHRoZSBzaW11bGF0aW9uLiBTZWVcbiAgICAgICAgLy8gYE1haW5Mb29wLnNldEJlZ2luKClgIGZvciBhZGRpdGlvbmFsIGRldGFpbHMgb24gaG93IHRvIHVzZSB0aGlzLlxuICAgICAgICB0aGlzLmJlZ2luKHRpbWVzdGFtcCwgdGhpcy5mcmFtZURlbHRhKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGhlIGVzdGltYXRlIG9mIHRoZSBmcmFtZSByYXRlLCBgZnBzYC4gQXBwcm94aW1hdGVseSBldmVyeVxuICAgICAgICAvLyBzZWNvbmQsIHRoZSBudW1iZXIgb2YgZnJhbWVzIHRoYXQgb2NjdXJyZWQgaW4gdGhhdCBzZWNvbmQgYXJlIGluY2x1ZGVkXG4gICAgICAgIC8vIGluIGFuIGV4cG9uZW50aWFsIG1vdmluZyBhdmVyYWdlIG9mIGFsbCBmcmFtZXMgcGVyIHNlY29uZC4gVGhpcyBtZWFuc1xuICAgICAgICAvLyB0aGF0IG1vcmUgcmVjZW50IHNlY29uZHMgYWZmZWN0IHRoZSBlc3RpbWF0ZWQgZnJhbWUgcmF0ZSBtb3JlIHRoYW4gb2xkZXJcbiAgICAgICAgLy8gc2Vjb25kcy5cbiAgICAgICAgaWYgKHRpbWVzdGFtcCA+IHRoaXMubGFzdEZwc1VwZGF0ZSArIHRoaXMuZnBzVXBkYXRlSW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5ldyBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZS5cbiAgICAgICAgICAgIHRoaXMuZnBzID1cbiAgICAgICAgICAgICAgICAvLyBEaXZpZGUgdGhlIG51bWJlciBvZiBmcmFtZXMgc2luY2UgdGhlIGxhc3QgRlBTIHVwZGF0ZSBieSB0aGVcbiAgICAgICAgICAgICAgICAvLyBhbW91bnQgb2YgdGltZSB0aGF0IGhhcyBwYXNzZWQgdG8gZ2V0IHRoZSBtZWFuIGZyYW1lcyBwZXIgc2Vjb25kXG4gICAgICAgICAgICAgICAgLy8gb3ZlciB0aGF0IHBlcmlvZC4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBzbGlnaHRseSBtb3JlIHRoYW4gYVxuICAgICAgICAgICAgICAgIC8vIHNlY29uZCBoYXMgbGlrZWx5IHBhc3NlZCBzaW5jZSB0aGUgbGFzdCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgdGhpcy5mcHNBbHBoYSAqIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlICogMTAwMCAvICh0aW1lc3RhbXAgLSB0aGlzLmxhc3RGcHNVcGRhdGUpICtcbiAgICAgICAgICAgICAgICAoMSAtIHRoaXMuZnBzQWxwaGEpICogdGhpcy5mcHM7XG5cbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBmcmFtZSBjb3VudGVyIGFuZCBsYXN0LXVwZGF0ZWQgdGltZXN0YW1wIHNpbmNlIHRoZWlyXG4gICAgICAgICAgICAvLyBsYXRlc3QgdmFsdWVzIGhhdmUgbm93IGJlZW4gaW5jb3Jwb3JhdGVkIGludG8gdGhlIEZQUyBlc3RpbWF0ZS5cbiAgICAgICAgICAgIHRoaXMubGFzdEZwc1VwZGF0ZSA9IHRpbWVzdGFtcDtcbiAgICAgICAgICAgIHRoaXMuZnJhbWVzU2luY2VMYXN0RnBzVXBkYXRlID0gMDtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb3VudCB0aGUgY3VycmVudCBmcmFtZSBpbiB0aGUgbmV4dCBmcmFtZXMtcGVyLXNlY29uZCB1cGRhdGUuIFRoaXNcbiAgICAgICAgLy8gaGFwcGVucyBhZnRlciB0aGUgcHJldmlvdXMgc2VjdGlvbiBiZWNhdXNlIHRoZSBwcmV2aW91cyBzZWN0aW9uXG4gICAgICAgIC8vIGNhbGN1bGF0ZXMgdGhlIGZyYW1lcyB0aGF0IG9jY3VyIHVwIHVudGlsIGB0aW1lc3RhbXBgLCBhbmQgYHRpbWVzdGFtcGBcbiAgICAgICAgLy8gcmVmZXJzIHRvIGEgdGltZSBqdXN0IGJlZm9yZSB0aGUgY3VycmVudCBmcmFtZSB3YXMgZGVsaXZlcmVkLlxuICAgICAgICB0aGlzLmZyYW1lc1NpbmNlTGFzdEZwc1VwZGF0ZSsrO1xuXG4gICAgICAgIC8qXG4gICAgICAgICAqIEEgbmFpdmUgd2F5IHRvIG1vdmUgYW4gb2JqZWN0IGFsb25nIGl0cyBYLWF4aXMgbWlnaHQgYmUgdG8gd3JpdGUgYSBtYWluXG4gICAgICAgICAqIGxvb3AgY29udGFpbmluZyB0aGUgc3RhdGVtZW50IGBvYmoueCArPSAxMDtgIHdoaWNoIHdvdWxkIG1vdmUgdGhlIG9iamVjdFxuICAgICAgICAgKiAxMCB1bml0cyBwZXIgZnJhbWUuIFRoaXMgYXBwcm9hY2ggc3VmZmVycyBmcm9tIHRoZSBpc3N1ZSB0aGF0IGl0IGlzXG4gICAgICAgICAqIGRlcGVuZGVudCBvbiB0aGUgZnJhbWUgcmF0ZS4gSW4gb3RoZXIgd29yZHMsIGlmIHlvdXIgYXBwbGljYXRpb24gaXNcbiAgICAgICAgICogcnVubmluZyBzbG93bHkgKHRoYXQgaXMsIGZld2VyIGZyYW1lcyBwZXIgc2Vjb25kKSwgeW91ciBvYmplY3Qgd2lsbCBhbHNvXG4gICAgICAgICAqIGFwcGVhciB0byBtb3ZlIHNsb3dseSwgd2hlcmVhcyBpZiB5b3VyIGFwcGxpY2F0aW9uIGlzIHJ1bm5pbmcgcXVpY2tseVxuICAgICAgICAgKiAodGhhdCBpcywgbW9yZSBmcmFtZXMgcGVyIHNlY29uZCksIHlvdXIgb2JqZWN0IHdpbGwgYXBwZWFyIHRvIG1vdmVcbiAgICAgICAgICogcXVpY2tseS4gVGhpcyBpcyB1bmRlc2lyYWJsZSwgZXNwZWNpYWxseSBpbiBtdWx0aXBsYXllci9tdWx0aS11c2VyXG4gICAgICAgICAqIGFwcGxpY2F0aW9ucy5cbiAgICAgICAgICpcbiAgICAgICAgICogT25lIHNvbHV0aW9uIGlzIHRvIG11bHRpcGx5IHRoZSBzcGVlZCBieSB0aGUgYW1vdW50IG9mIHRpbWUgdGhhdCBoYXNcbiAgICAgICAgICogcGFzc2VkIGJldHdlZW4gcmVuZGVyaW5nIGZyYW1lcy4gRm9yIGV4YW1wbGUsIGlmIHlvdSB3YW50IHlvdXIgb2JqZWN0IHRvXG4gICAgICAgICAqIG1vdmUgNjAwIHVuaXRzIHBlciBzZWNvbmQsIHlvdSBtaWdodCB3cml0ZSBgb2JqLnggKz0gNjAwICogZGVsdGFgLCB3aGVyZVxuICAgICAgICAgKiBgZGVsdGFgIGlzIHRoZSB0aW1lIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS4gKEZvciBjb252ZW5pZW5jZSwgbGV0J3NcbiAgICAgICAgICogbW92ZSB0aGlzIHN0YXRlbWVudCB0byBhbiB1cGRhdGUoKSBmdW5jdGlvbiB0aGF0IHRha2VzIGBkZWx0YWAgYXMgYVxuICAgICAgICAgKiBwYXJhbWV0ZXIuKSBUaGlzIHdheSwgeW91ciBvYmplY3Qgd2lsbCBtb3ZlIGEgY29uc3RhbnQgZGlzdGFuY2Ugb3ZlclxuICAgICAgICAgKiB0aW1lLiBIb3dldmVyLCBhdCBsb3cgZnJhbWUgcmF0ZXMgYW5kIGhpZ2ggc3BlZWRzLCB5b3VyIG9iamVjdCB3aWxsIG1vdmVcbiAgICAgICAgICogbGFyZ2UgZGlzdGFuY2VzIGV2ZXJ5IGZyYW1lLCB3aGljaCBjYW4gY2F1c2UgaXQgdG8gZG8gc3RyYW5nZSB0aGluZ3NcbiAgICAgICAgICogc3VjaCBhcyBtb3ZlIHRocm91Z2ggd2FsbHMuIEFkZGl0aW9uYWxseSwgd2Ugd291bGQgbGlrZSBvdXIgcHJvZ3JhbSB0b1xuICAgICAgICAgKiBiZSBkZXRlcm1pbmlzdGljLiBUaGF0IGlzLCBldmVyeSB0aW1lIHdlIHJ1biB0aGUgYXBwbGljYXRpb24gd2l0aCB0aGVcbiAgICAgICAgICogc2FtZSBpbnB1dCwgd2Ugd291bGQgbGlrZSBleGFjdGx5IHRoZSBzYW1lIG91dHB1dC4gSWYgdGhlIHRpbWUgYmV0d2VlblxuICAgICAgICAgKiBmcmFtZXMgKHRoZSBgZGVsdGFgKSB2YXJpZXMsIG91ciBvdXRwdXQgd2lsbCBkaXZlcmdlIHRoZSBsb25nZXIgdGhlXG4gICAgICAgICAqIHByb2dyYW0gcnVucyBkdWUgdG8gYWNjdW11bGF0ZWQgcm91bmRpbmcgZXJyb3JzLCBldmVuIGF0IG5vcm1hbCBmcmFtZVxuICAgICAgICAgKiByYXRlcy5cbiAgICAgICAgICpcbiAgICAgICAgICogQSBiZXR0ZXIgc29sdXRpb24gaXMgdG8gc2VwYXJhdGUgdGhlIGFtb3VudCBvZiB0aW1lIHNpbXVsYXRlZCBpbiBlYWNoXG4gICAgICAgICAqIHVwZGF0ZSgpIGZyb20gdGhlIGFtb3VudCBvZiB0aW1lIGJldHdlZW4gZnJhbWVzLiBPdXIgdXBkYXRlKCkgZnVuY3Rpb25cbiAgICAgICAgICogZG9lc24ndCBuZWVkIHRvIGNoYW5nZTsgd2UganVzdCBuZWVkIHRvIGNoYW5nZSB0aGUgZGVsdGEgd2UgcGFzcyB0byBpdFxuICAgICAgICAgKiBzbyB0aGF0IGVhY2ggdXBkYXRlKCkgc2ltdWxhdGVzIGEgZml4ZWQgYW1vdW50IG9mIHRpbWUgKHRoYXQgaXMsIGBkZWx0YWBcbiAgICAgICAgICogc2hvdWxkIGhhdmUgdGhlIHNhbWUgdmFsdWUgZWFjaCB0aW1lIHVwZGF0ZSgpIGlzIGNhbGxlZCkuIFRoZSB1cGRhdGUoKVxuICAgICAgICAgKiBmdW5jdGlvbiBjYW4gYmUgcnVuIG11bHRpcGxlIHRpbWVzIHBlciBmcmFtZSBpZiBuZWVkZWQgdG8gc2ltdWxhdGUgdGhlXG4gICAgICAgICAqIHRvdGFsIGFtb3VudCBvZiB0aW1lIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZS4gKElmIHRoZSB0aW1lIHRoYXQgaGFzXG4gICAgICAgICAqIHBhc3NlZCBzaW5jZSB0aGUgbGFzdCBmcmFtZSBpcyBsZXNzIHRoYW4gdGhlIGZpeGVkIHNpbXVsYXRpb24gdGltZSwgd2VcbiAgICAgICAgICoganVzdCB3b24ndCBydW4gYW4gdXBkYXRlKCkgdW50aWwgdGhlIHRoZSBuZXh0IGZyYW1lLiBJZiB0aGVyZSBpc1xuICAgICAgICAgKiB1bnNpbXVsYXRlZCB0aW1lIGxlZnQgb3ZlciB0aGF0IGlzIGxlc3MgdGhhbiBvdXIgdGltZXN0ZXAsIHdlJ2xsIGp1c3RcbiAgICAgICAgICogbGVhdmUgaXQgdG8gYmUgc2ltdWxhdGVkIGR1cmluZyB0aGUgbmV4dCBmcmFtZS4pIFRoaXMgYXBwcm9hY2ggYXZvaWRzXG4gICAgICAgICAqIGluY29uc2lzdGVudCByb3VuZGluZyBlcnJvcnMgYW5kIGVuc3VyZXMgdGhhdCB0aGVyZSBhcmUgbm8gZ2lhbnQgbGVhcHNcbiAgICAgICAgICogdGhyb3VnaCB3YWxscyBiZXR3ZWVuIGZyYW1lcy5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhhdCBpcyB3aGF0IGlzIGRvbmUgYmVsb3cuIEl0IGludHJvZHVjZXMgYSBuZXcgcHJvYmxlbSwgYnV0IGl0IGlzIGFcbiAgICAgICAgICogbWFuYWdlYWJsZSBvbmU6IGlmIHRoZSBhbW91bnQgb2YgdGltZSBzcGVudCBzaW11bGF0aW5nIGlzIGNvbnNpc3RlbnRseVxuICAgICAgICAgKiBsb25nZXIgdGhhbiB0aGUgYW1vdW50IG9mIHRpbWUgYmV0d2VlbiBmcmFtZXMsIHRoZSBhcHBsaWNhdGlvbiBjb3VsZFxuICAgICAgICAgKiBmcmVlemUgYW5kIGNyYXNoIGluIGEgc3BpcmFsIG9mIGRlYXRoLiBUaGlzIHdvbid0IGhhcHBlbiBhcyBsb25nIGFzIHRoZVxuICAgICAgICAgKiBmaXhlZCBzaW11bGF0aW9uIHRpbWUgaXMgc2V0IHRvIGEgdmFsdWUgdGhhdCBpcyBoaWdoIGVub3VnaCB0aGF0XG4gICAgICAgICAqIHVwZGF0ZSgpIGNhbGxzIHVzdWFsbHkgdGFrZSBsZXNzIHRpbWUgdGhhbiB0aGUgYW1vdW50IG9mIHRpbWUgdGhleSdyZVxuICAgICAgICAgKiBzaW11bGF0aW5nLiBJZiBpdCBkb2VzIHN0YXJ0IHRvIGhhcHBlbiBhbnl3YXksIHNlZSBgTWFpbkxvb3Auc2V0RW5kKClgXG4gICAgICAgICAqIGZvciBhIGRpc2N1c3Npb24gb2Ygd2F5cyB0byBzdG9wIGl0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBBZGRpdGlvbmFsbHksIHNlZSBgTWFpbkxvb3Auc2V0VXBkYXRlKClgIGZvciBhIGRpc2N1c3Npb24gb2YgcGVyZm9ybWFuY2VcbiAgICAgICAgICogY29uc2lkZXJhdGlvbnMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEZ1cnRoZXIgcmVhZGluZyBmb3IgdGhvc2UgaW50ZXJlc3RlZDpcbiAgICAgICAgICpcbiAgICAgICAgICogLSBodHRwOi8vZ2FtZXByb2dyYW1taW5ncGF0dGVybnMuY29tL2dhbWUtbG9vcC5odG1sXG4gICAgICAgICAqIC0gaHR0cDovL2dhZmZlcm9uZ2FtZXMuY29tL2dhbWUtcGh5c2ljcy9maXgteW91ci10aW1lc3RlcC9cbiAgICAgICAgICogLSBodHRwczovL2dhbWVhbGNoZW1pc3Qud29yZHByZXNzLmNvbS8yMDEzLzAzLzE2L3Rob3VnaHRzLW9uLXRoZS1qYXZhc2NyaXB0LWdhbWUtbG9vcC9cbiAgICAgICAgICogLSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0dhbWVzL0FuYXRvbXlcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubnVtVXBkYXRlU3RlcHMgPSAwO1xuICAgICAgICB3aGlsZSAodGhpcy5mcmFtZURlbHRhID49IHRoaXMuc2ltdWxhdGlvblRpbWVzdGVwKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCk7XG4gICAgICAgICAgICB0aGlzLmZyYW1lRGVsdGEgLT0gdGhpcy5zaW11bGF0aW9uVGltZXN0ZXA7XG5cbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgKiBTYW5pdHkgY2hlY2s6IGJhaWwgaWYgd2UgcnVuIHRoZSBsb29wIHRvbyBtYW55IHRpbWVzLlxuICAgICAgICAgICAgICpcbiAgICAgICAgICAgICAqIE9uZSB3YXkgdGhpcyBjb3VsZCBoYXBwZW4gaXMgaWYgdXBkYXRlKCkgdGFrZXMgbG9uZ2VyIHRvIHJ1biB0aGFuXG4gICAgICAgICAgICAgKiB0aGUgdGltZSBpdCBzaW11bGF0ZXMsIHRoZXJlYnkgY2F1c2luZyBhIHNwaXJhbCBvZiBkZWF0aC4gRm9yIHdheXNcbiAgICAgICAgICAgICAqIHRvIGF2b2lkIHRoaXMsIHNlZSBgTWFpbkxvb3Auc2V0RW5kKClgLiBBbm90aGVyIHdheSB0aGlzIGNvdWxkXG4gICAgICAgICAgICAgKiBoYXBwZW4gaXMgaWYgdGhlIGJyb3dzZXIgdGhyb3R0bGVzIHNlcnZpbmcgZnJhbWVzLCB3aGljaCB0eXBpY2FsbHlcbiAgICAgICAgICAgICAqIG9jY3VycyB3aGVuIHRoZSB0YWIgaXMgaW4gdGhlIGJhY2tncm91bmQgb3IgdGhlIGRldmljZSBiYXR0ZXJ5IGlzXG4gICAgICAgICAgICAgKiBsb3cuIEFuIGV2ZW50IG91dHNpZGUgb2YgdGhlIG1haW4gbG9vcCBzdWNoIGFzIGF1ZGlvIHByb2Nlc3Npbmcgb3JcbiAgICAgICAgICAgICAqIHN5bmNocm9ub3VzIHJlc291cmNlIHJlYWRzIGNvdWxkIGFsc28gY2F1c2UgdGhlIGFwcGxpY2F0aW9uIHRvIGhhbmdcbiAgICAgICAgICAgICAqIHRlbXBvcmFyaWx5IGFuZCBhY2N1bXVsYXRlIG5vdC15ZXQtc2ltdWxhdGVkIHRpbWUgYXMgYSByZXN1bHQuXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogMjQwIGlzIGNob3NlbiBiZWNhdXNlLCBmb3IgYW55IHNhbmUgdmFsdWUgb2Ygc2ltdWxhdGlvblRpbWVzdGVwLCAyNDBcbiAgICAgICAgICAgICAqIHVwZGF0ZXMgd2lsbCBzaW11bGF0ZSBhdCBsZWFzdCBvbmUgc2Vjb25kLCBhbmQgaXQgd2lsbCBzaW11bGF0ZSBmb3VyXG4gICAgICAgICAgICAgKiBzZWNvbmRzIHdpdGggdGhlIGRlZmF1bHQgdmFsdWUgb2Ygc2ltdWxhdGlvblRpbWVzdGVwLiAoU2FmYXJpXG4gICAgICAgICAgICAgKiBub3RpZmllcyB1c2VycyB0aGF0IHRoZSBzY3JpcHQgaXMgdGFraW5nIHRvbyBsb25nIHRvIHJ1biBpZiBpdCB0YWtlc1xuICAgICAgICAgICAgICogbW9yZSB0aGFuIGZpdmUgc2Vjb25kcy4pXG4gICAgICAgICAgICAgKlxuICAgICAgICAgICAgICogSWYgdGhlcmUgYXJlIG1vcmUgdXBkYXRlcyB0byBydW4gaW4gYSBmcmFtZSB0aGFuIHRoaXMsIHRoZVxuICAgICAgICAgICAgICogYXBwbGljYXRpb24gd2lsbCBhcHBlYXIgdG8gc2xvdyBkb3duIHRvIHRoZSB1c2VyIHVudGlsIGl0IGNhdGNoZXNcbiAgICAgICAgICAgICAqIGJhY2sgdXAuIEluIG5ldHdvcmtlZCBhcHBsaWNhdGlvbnMgdGhpcyB3aWxsIHVzdWFsbHkgY2F1c2UgdGhlIHVzZXJcbiAgICAgICAgICAgICAqIHRvIGdldCBvdXQgb2Ygc3luYyB3aXRoIHRoZWlyIHBlZXJzLCBidXQgaWYgdGhlIHVwZGF0ZXMgYXJlIHRha2luZ1xuICAgICAgICAgICAgICogdGhpcyBsb25nIGFscmVhZHksIHRoZXkncmUgcHJvYmFibHkgYWxyZWFkeSBvdXQgb2Ygc3luYy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgaWYgKCsrdGhpcy5udW1VcGRhdGVTdGVwcyA+PSAyNDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBhbmljID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qXG4gICAgICAgICAqIFJlbmRlciB0aGUgc2NyZWVuLiBXZSBkbyB0aGlzIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB1cGRhdGUoKSBoYXMgcnVuXG4gICAgICAgICAqIGR1cmluZyB0aGlzIGZyYW1lIGJlY2F1c2UgaXQgaXMgcG9zc2libGUgdG8gaW50ZXJwb2xhdGUgYmV0d2VlbiB1cGRhdGVzXG4gICAgICAgICAqIHRvIG1ha2UgdGhlIGZyYW1lIHJhdGUgYXBwZWFyIGZhc3RlciB0aGFuIHVwZGF0ZXMgYXJlIGFjdHVhbGx5XG4gICAgICAgICAqIGhhcHBlbmluZy4gU2VlIGBNYWluTG9vcC5zZXREcmF3KClgIGZvciBhbiBleHBsYW5hdGlvbiBvZiBob3cgdG8gZG9cbiAgICAgICAgICogdGhhdC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2UgZHJhdyBhZnRlciB1cGRhdGluZyBiZWNhdXNlIHdlIHdhbnQgdGhlIHNjcmVlbiB0byByZWZsZWN0IGEgc3RhdGUgb2ZcbiAgICAgICAgICogdGhlIGFwcGxpY2F0aW9uIHRoYXQgaXMgYXMgdXAtdG8tZGF0ZSBhcyBwb3NzaWJsZS4gKGBNYWluTG9vcC5zdGFydCgpYFxuICAgICAgICAgKiBkcmF3cyB0aGUgdmVyeSBmaXJzdCBmcmFtZSBpbiB0aGUgYXBwbGljYXRpb24ncyBpbml0aWFsIHN0YXRlLCBiZWZvcmVcbiAgICAgICAgICogYW55IHVwZGF0ZXMgaGF2ZSBvY2N1cnJlZC4pIFNvbWUgc291cmNlcyBzcGVjdWxhdGUgdGhhdCByZW5kZXJpbmdcbiAgICAgICAgICogZWFybGllciBpbiB0aGUgcmVxdWVzdEFuaW1hdGlvbkZyYW1lIGNhbGxiYWNrIGNhbiBnZXQgdGhlIHNjcmVlbiBwYWludGVkXG4gICAgICAgICAqIGZhc3RlcjsgdGhpcyBpcyBtb3N0bHkgbm90IHRydWUsIGFuZCBldmVuIHdoZW4gaXQgaXMsIGl0J3MgdXN1YWxseSBqdXN0XG4gICAgICAgICAqIGEgdHJhZGUtb2ZmIGJldHdlZW4gcmVuZGVyaW5nIHRoZSBjdXJyZW50IGZyYW1lIHNvb25lciBhbmQgcmVuZGVyaW5nIHRoZVxuICAgICAgICAgKiBuZXh0IGZyYW1lIGxhdGVyLlxuICAgICAgICAgKlxuICAgICAgICAgKiBTZWUgYE1haW5Mb29wLnNldERyYXcoKWAgZm9yIGRldGFpbHMgYWJvdXQgZHJhdygpIGl0c2VsZi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHJhdyh0aGlzLmZyYW1lRGVsdGEgLyB0aGlzLnNpbXVsYXRpb25UaW1lc3RlcCk7XG5cbiAgICAgICAgLy8gUnVuIGFueSB1cGRhdGVzIHRoYXQgYXJlIG5vdCBkZXBlbmRlbnQgb24gdGltZSBpbiB0aGUgc2ltdWxhdGlvbi4gU2VlXG4gICAgICAgIC8vIGBNYWluTG9vcC5zZXRFbmQoKWAgZm9yIGFkZGl0aW9uYWwgZGV0YWlscyBvbiBob3cgdG8gdXNlIHRoaXMuXG4gICAgICAgIHRoaXMuZW5kKHRoaXMuZnBzLCB0aGlzLnBhbmljKTtcblxuICAgICAgICB0aGlzLnBhbmljID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gU1VCQ0xBU1NFUyBNVVNUIE9WRVJSSURFIEZPVVIgUkVRVUlSRUQgTUVUSE9EUzpcbiAgICAgICAgLy8gYmVnaW5cbiAgICAgICAgLy8gdXBkYXRlXG4gICAgICAgIC8vIGRyYXdcbiAgICAgICAgLy8gZW5kXG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgcnVucyBhdCB0aGUgYmVnaW5uaW5nIG9mIHRoZSBtYWluIGxvb3AuXG4gICAgICpcbiAgICAgKiBUaGUgYmVnaW4oKSBmdW5jdGlvbiBpcyB0eXBpY2FsbHkgdXNlZCB0byBwcm9jZXNzIGlucHV0IGJlZm9yZSB0aGVcbiAgICAgKiB1cGRhdGVzIHJ1bi4gUHJvY2Vzc2luZyBpbnB1dCBoZXJlIChpbiBjaHVua3MpIGNhbiByZWR1Y2UgdGhlIHJ1bm5pbmdcbiAgICAgKiB0aW1lIG9mIGV2ZW50IGhhbmRsZXJzLCB3aGljaCBpcyB1c2VmdWwgYmVjYXVzZSBsb25nLXJ1bm5pbmcgZXZlbnRcbiAgICAgKiBoYW5kbGVycyBjYW4gc29tZXRpbWVzIGRlbGF5IGZyYW1lcy5cbiAgICAgKlxuICAgICAqIFVubGlrZSB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCksIHdoaWNoIGNhbiBydW4gemVybyBvciBtb3JlIHRpbWVzIHBlclxuICAgICAqIGZyYW1lLCBiZWdpbigpIGFsd2F5cyBydW5zIGV4YWN0bHkgb25jZSBwZXIgZnJhbWUuIFRoaXMgbWFrZXMgaXQgdXNlZnVsXG4gICAgICogZm9yIGFueSB1cGRhdGVzIHRoYXQgYXJlIG5vdCBkZXBlbmRlbnQgb24gdGltZSBpbiB0aGUgc2ltdWxhdGlvbi5cbiAgICAgKiBFeGFtcGxlcyBpbmNsdWRlIGFkanVzdGluZyBIVUQgY2FsY3VsYXRpb25zIG9yIHBlcmZvcm1pbmcgbG9uZy1ydW5uaW5nXG4gICAgICogdXBkYXRlcyBpbmNyZW1lbnRhbGx5LiBDb21wYXJlZCB0byB7QGxpbmsgI3NldEVuZCBlbmR9KCksIGdlbmVyYWxseVxuICAgICAqIGFjdGlvbnMgc2hvdWxkIG9jY3VyIGluIGJlZ2luKCkgaWYgdGhleSBhZmZlY3QgYW55dGhpbmcgdGhhdFxuICAgICAqIHtAbGluayAjc2V0VXBkYXRlIHVwZGF0ZX0oKSBvciB7QGxpbmsgI3NldERyYXcgZHJhd30oKSB1c2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBiZWdpblxuICAgICAqICAgVGhlIGJlZ2luKCkgZnVuY3Rpb24uXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtiZWdpbi50aW1lc3RhbXBdXG4gICAgICogICBUaGUgY3VycmVudCB0aW1lc3RhbXAgKHdoZW4gdGhlIGZyYW1lIHN0YXJ0ZWQpLCBpbiBtaWxsaXNlY29uZHMuIFRoaXNcbiAgICAgKiAgIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIGNvbXBhcmlzb24gdG8gb3RoZXIgdGltZXN0YW1wcyBiZWNhdXNlIHRoZVxuICAgICAqICAgZXBvY2ggKGkuZS4gdGhlIFwiemVyb1wiIHRpbWUpIGRlcGVuZHMgb24gdGhlIGVuZ2luZSBydW5uaW5nIHRoaXMgY29kZS5cbiAgICAgKiAgIEluIGVuZ2luZXMgdGhhdCBzdXBwb3J0IGBET01IaWdoUmVzVGltZVN0YW1wYCAoYWxsIG1vZGVybiBicm93c2Vyc1xuICAgICAqICAgZXhjZXB0IGlPUyBTYWZhcmkgOCkgdGhlIGVwb2NoIGlzIHRoZSB0aW1lIHRoZSBwYWdlIHN0YXJ0ZWQgbG9hZGluZyxcbiAgICAgKiAgIHNwZWNpZmljYWxseSBgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydGAuIEV2ZXJ5d2hlcmUgZWxzZSxcbiAgICAgKiAgIGluY2x1ZGluZyBub2RlLmpzLCB0aGUgZXBvY2ggaXMgdGhlIFVuaXggZXBvY2ggKDE5NzAtMDEtMDFUMDA6MDA6MDBaKS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2JlZ2luLmRlbHRhXVxuICAgICAqICAgVGhlIHRvdGFsIGVsYXBzZWQgdGltZSB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2ltdWxhdGVkLCBpblxuICAgICAqICAgbWlsbGlzZWNvbmRzLlxuICAgICAqL1xuICAgIGFic3RyYWN0IGJlZ2luKHRpbWVzdGFtcCA6IG51bWJlciwgZGVsdGEgOiBudW1iZXIpIDogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBydW5zIHVwZGF0ZXMgKGkuZS4gQUkgYW5kIHBoeXNpY3MpLlxuICAgICAqXG4gICAgICogVGhlIHVwZGF0ZSgpIGZ1bmN0aW9uIHNob3VsZCBzaW11bGF0ZSBhbnl0aGluZyB0aGF0IGlzIGFmZmVjdGVkIGJ5IHRpbWUuXG4gICAgICogSXQgY2FuIGJlIGNhbGxlZCB6ZXJvIG9yIG1vcmUgdGltZXMgcGVyIGZyYW1lIGRlcGVuZGluZyBvbiB0aGUgZnJhbWVcbiAgICAgKiByYXRlLlxuICAgICAqXG4gICAgICogQXMgd2l0aCBldmVyeXRoaW5nIGluIHRoZSBtYWluIGxvb3AsIHRoZSBydW5uaW5nIHRpbWUgb2YgdXBkYXRlKClcbiAgICAgKiBkaXJlY3RseSBhZmZlY3RzIHRoZSBmcmFtZSByYXRlLiBJZiB1cGRhdGUoKSB0YWtlcyBsb25nIGVub3VnaCB0aGF0IHRoZVxuICAgICAqIGZyYW1lIHJhdGUgZHJvcHMgYmVsb3cgdGhlIHRhcmdldCAoXCJidWRnZXRlZFwiKSBmcmFtZSByYXRlLCBwYXJ0cyBvZiB0aGVcbiAgICAgKiB1cGRhdGUoKSBmdW5jdGlvbiB0aGF0IGRvIG5vdCBuZWVkIHRvIGV4ZWN1dGUgYmV0d2VlbiBldmVyeSBmcmFtZSBjYW4gYmVcbiAgICAgKiBtb3ZlZCBpbnRvIFdlYiBXb3JrZXJzLiAoVmFyaW91cyBzb3VyY2VzIG9uIHRoZSBpbnRlcm5ldCBzb21ldGltZXNcbiAgICAgKiBzdWdnZXN0IG90aGVyIHNjaGVkdWxpbmcgcGF0dGVybnMgdXNpbmcgc2V0VGltZW91dCgpIG9yIHNldEludGVydmFsKCkuXG4gICAgICogVGhlc2UgYXBwcm9hY2hlcyBzb21ldGltZXMgb2ZmZXIgbW9kZXN0IGltcHJvdmVtZW50cyB3aXRoIG1pbmltYWxcbiAgICAgKiBjaGFuZ2VzIHRvIGV4aXN0aW5nIGNvZGUsIGJ1dCBiZWNhdXNlIEphdmFTY3JpcHQgaXMgc2luZ2xlLXRocmVhZGVkLCB0aGVcbiAgICAgKiB1cGRhdGVzIHdpbGwgc3RpbGwgYmxvY2sgcmVuZGVyaW5nIGFuZCBkcmFnIGRvd24gdGhlIGZyYW1lIHJhdGUuIFdlYlxuICAgICAqIFdvcmtlcnMgZXhlY3V0ZSBpbiBzZXBhcmF0ZSB0aHJlYWRzLCBzbyB0aGV5IGZyZWUgdXAgbW9yZSB0aW1lIGluIHRoZVxuICAgICAqIG1haW4gbG9vcC4pXG4gICAgICpcbiAgICAgKiBUaGlzIHNjcmlwdCBjYW4gYmUgaW1wb3J0ZWQgaW50byBhIFdlYiBXb3JrZXIgdXNpbmcgaW1wb3J0U2NyaXB0cygpIGFuZFxuICAgICAqIHVzZWQgdG8gcnVuIGEgc2Vjb25kIG1haW4gbG9vcCBpbiB0aGUgd29ya2VyLiBTb21lIGNvbnNpZGVyYXRpb25zOlxuICAgICAqXG4gICAgICogLSBQcm9maWxlIHlvdXIgY29kZSBiZWZvcmUgZG9pbmcgdGhlIHdvcmsgdG8gbW92ZSBpdCBpbnRvIFdlYiBXb3JrZXJzLlxuICAgICAqICAgSXQgY291bGQgYmUgdGhlIHJlbmRlcmluZyB0aGF0IGlzIHRoZSBib3R0bGVuZWNrLCBpbiB3aGljaCBjYXNlIHRoZVxuICAgICAqICAgc29sdXRpb24gaXMgdG8gZGVjcmVhc2UgdGhlIHZpc3VhbCBjb21wbGV4aXR5IG9mIHRoZSBzY2VuZS5cbiAgICAgKiAtIEl0IGRvZXNuJ3QgbWFrZSBzZW5zZSB0byBtb3ZlIHRoZSAqZW50aXJlKiBjb250ZW50cyBvZiB1cGRhdGUoKSBpbnRvXG4gICAgICogICB3b3JrZXJzIHVubGVzcyB7QGxpbmsgI3NldERyYXcgZHJhd30oKSBjYW4gaW50ZXJwb2xhdGUgYmV0d2VlbiBmcmFtZXMuXG4gICAgICogICBUaGUgbG93ZXN0LWhhbmdpbmcgZnJ1aXQgaXMgYmFja2dyb3VuZCB1cGRhdGVzIChsaWtlIGNhbGN1bGF0aW5nXG4gICAgICogICBjaXRpemVucycgaGFwcGluZXNzIGluIGEgY2l0eS1idWlsZGluZyBnYW1lKSwgcGh5c2ljcyB0aGF0IGRvZXNuJ3RcbiAgICAgKiAgIGFmZmVjdCB0aGUgc2NlbmUgKGxpa2UgZmxhZ3Mgd2F2aW5nIGluIHRoZSB3aW5kKSwgYW5kIGFueXRoaW5nIHRoYXQgaXNcbiAgICAgKiAgIG9jY2x1ZGVkIG9yIGhhcHBlbmluZyBmYXIgb2ZmIHNjcmVlbi5cbiAgICAgKiAtIElmIGRyYXcoKSBuZWVkcyB0byBpbnRlcnBvbGF0ZSBwaHlzaWNzIGJhc2VkIG9uIGFjdGl2aXR5IHRoYXQgb2NjdXJzXG4gICAgICogICBpbiBhIHdvcmtlciwgdGhlIHdvcmtlciBuZWVkcyB0byBwYXNzIHRoZSBpbnRlcnBvbGF0aW9uIHZhbHVlIGJhY2sgdG9cbiAgICAgKiAgIHRoZSBtYWluIHRocmVhZCBzbyB0aGF0IGlzIGlzIGF2YWlsYWJsZSB0byBkcmF3KCkuXG4gICAgICogLSBXZWIgV29ya2VycyBjYW4ndCBhY2Nlc3MgdGhlIHN0YXRlIG9mIHRoZSBtYWluIHRocmVhZCwgc28gdGhleSBjYW4ndFxuICAgICAqICAgZGlyZWN0bHkgbW9kaWZ5IG9iamVjdHMgaW4geW91ciBzY2VuZS4gTW92aW5nIGRhdGEgdG8gYW5kIGZyb20gV2ViXG4gICAgICogICBXb3JrZXJzIGlzIGEgcGFpbi4gVGhlIGZhc3Rlc3Qgd2F5IHRvIGRvIGl0IGlzIHdpdGggVHJhbnNmZXJhYmxlXG4gICAgICogICBPYmplY3RzOiBiYXNpY2FsbHksIHlvdSBjYW4gcGFzcyBhbiBBcnJheUJ1ZmZlciB0byBhIHdvcmtlcixcbiAgICAgKiAgIGRlc3Ryb3lpbmcgdGhlIG9yaWdpbmFsIHJlZmVyZW5jZSBpbiB0aGUgcHJvY2Vzcy5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gcmVhZCBtb3JlIGFib3V0IFdlYiBXb3JrZXJzIGFuZCBUcmFuc2ZlcmFibGUgT2JqZWN0cyBhdFxuICAgICAqIFtIVE1MNSBSb2Nrc10oaHR0cDovL3d3dy5odG1sNXJvY2tzLmNvbS9lbi90dXRvcmlhbHMvd29ya2Vycy9iYXNpY3MvKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHVwZGF0ZVxuICAgICAqICAgVGhlIHVwZGF0ZSgpIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbdXBkYXRlLmRlbHRhXVxuICAgICAqICAgVGhlIGFtb3VudCBvZiB0aW1lIGluIG1pbGxpc2Vjb25kcyB0byBzaW11bGF0ZSBpbiB0aGUgdXBkYXRlLiBJbiBtb3N0XG4gICAgICogICBjYXNlcyB0aGlzIHRpbWVzdGVwIG5ldmVyIGNoYW5nZXMgaW4gb3JkZXIgdG8gZW5zdXJlIGRldGVybWluaXN0aWNcbiAgICAgKiAgIHVwZGF0ZXMuIFRoZSB0aW1lc3RlcCBpcyB0aGUgc2FtZSBhcyB0aGF0IHJldHVybmVkIGJ5XG4gICAgICogICBgTWFpbkxvb3AuZ2V0U2ltdWxhdGlvblRpbWVzdGVwKClgLlxuICAgICAqL1xuICAgIGFic3RyYWN0IHVwZGF0ZSh0aW1lU3RlcCA6IG51bWJlcikgOiB2b2lkO1xuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0IGRyYXdzIHRoaW5ncyBvbiB0aGUgc2NyZWVuLlxuICAgICAqXG4gICAgICogVGhlIGRyYXcoKSBmdW5jdGlvbiBnZXRzIHBhc3NlZCB0aGUgcGVyY2VudCBvZiB0aW1lIHRoYXQgdGhlIG5leHQgcnVuIG9mXG4gICAgICoge0BsaW5rICNzZXRVcGRhdGUgdXBkYXRlfSgpIHdpbGwgc2ltdWxhdGUgdGhhdCBoYXMgYWN0dWFsbHkgZWxhcHNlZCwgYXNcbiAgICAgKiBhIGRlY2ltYWwuIEluIG90aGVyIHdvcmRzLCBkcmF3KCkgZ2V0cyBwYXNzZWQgaG93IGZhciBiZXR3ZWVuIHVwZGF0ZSgpXG4gICAgICogY2FsbHMgaXQgaXMuIFRoaXMgaXMgdXNlZnVsIGJlY2F1c2UgdGhlIHRpbWUgc2ltdWxhdGVkIGJ5IHVwZGF0ZSgpIGFuZFxuICAgICAqIHRoZSB0aW1lIGJldHdlZW4gZHJhdygpIGNhbGxzIGlzIHVzdWFsbHkgZGlmZmVyZW50LCBzbyB0aGUgcGFyYW1ldGVyIHRvXG4gICAgICogZHJhdygpIGNhbiBiZSB1c2VkIHRvIGludGVycG9sYXRlIG1vdGlvbiBiZXR3ZWVuIGZyYW1lcyB0byBtYWtlXG4gICAgICogcmVuZGVyaW5nIGFwcGVhciBzbW9vdGhlci4gVG8gaWxsdXN0cmF0ZSwgaWYgdXBkYXRlKCkgYWR2YW5jZXMgdGhlXG4gICAgICogc2ltdWxhdGlvbiBhdCBlYWNoIHZlcnRpY2FsIGJhciBpbiB0aGUgZmlyc3Qgcm93IGJlbG93LCBhbmQgZHJhdygpIGNhbGxzXG4gICAgICogaGFwcGVuIGF0IGVhY2ggdmVydGljYWwgYmFyIGluIHRoZSBzZWNvbmQgcm93IGJlbG93LCB0aGVuIHNvbWUgZnJhbWVzXG4gICAgICogd2lsbCBoYXZlIHRpbWUgbGVmdCBvdmVyIHRoYXQgaXMgbm90IHlldCBzaW11bGF0ZWQgYnkgdXBkYXRlKCkgd2hlblxuICAgICAqIHJlbmRlcmluZyBvY2N1cnMgaW4gZHJhdygpOlxuICAgICAqXG4gICAgICogICAgIHVwZGF0ZSgpIHRpbWVzdGVwczogIHwgIHwgIHwgIHwgIHwgIHwgIHwgIHwgIHxcbiAgICAgKiAgICAgZHJhdygpIGNhbGxzOiAgICAgICAgfCAgIHwgICB8ICAgfCAgIHwgICB8ICAgfFxuICAgICAqXG4gICAgICogVG8gaW50ZXJwb2xhdGUgbW90aW9uIGZvciByZW5kZXJpbmcgcHVycG9zZXMsIG9iamVjdHMnIHN0YXRlIGFmdGVyIHRoZVxuICAgICAqIGxhc3QgdXBkYXRlKCkgbXVzdCBiZSByZXRhaW5lZCBhbmQgdXNlZCB0byBjYWxjdWxhdGUgYW4gaW50ZXJtZWRpYXRlXG4gICAgICogc3RhdGUuIE5vdGUgdGhhdCB0aGlzIG1lYW5zIHJlbmRlcnMgd2lsbCBiZSB1cCB0byBvbmUgdXBkYXRlKCkgYmVoaW5kLlxuICAgICAqIFRoaXMgaXMgc3RpbGwgYmV0dGVyIHRoYW4gZXh0cmFwb2xhdGluZyAocHJvamVjdGluZyBvYmplY3RzJyBzdGF0ZSBhZnRlclxuICAgICAqIGEgZnV0dXJlIHVwZGF0ZSgpKSB3aGljaCBjYW4gcHJvZHVjZSBiaXphcnJlIHJlc3VsdHMuIFN0b3JpbmcgbXVsdGlwbGVcbiAgICAgKiBzdGF0ZXMgY2FuIGJlIGRpZmZpY3VsdCB0byBzZXQgdXAsIGFuZCBrZWVwIGluIG1pbmQgdGhhdCBydW5uaW5nIHRoaXNcbiAgICAgKiBwcm9jZXNzIHRha2VzIHRpbWUgdGhhdCBjb3VsZCBwdXNoIHRoZSBmcmFtZSByYXRlIGRvd24sIHNvIGl0J3Mgb2Z0ZW5cbiAgICAgKiBub3Qgd29ydGh3aGlsZSB1bmxlc3Mgc3R1dHRlcmluZyBpcyB2aXNpYmxlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZHJhd1xuICAgICAqICAgVGhlIGRyYXcoKSBmdW5jdGlvbi5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2RyYXcuaW50ZXJwb2xhdGlvblBlcmNlbnRhZ2VdXG4gICAgICogICBUaGUgY3VtdWxhdGl2ZSBhbW91bnQgb2YgdGltZSB0aGF0IGhhc24ndCBiZWVuIHNpbXVsYXRlZCB5ZXQsIGRpdmlkZWRcbiAgICAgKiAgIGJ5IHRoZSBhbW91bnQgb2YgdGltZSB0aGF0IHdpbGwgYmUgc2ltdWxhdGVkIHRoZSBuZXh0IHRpbWUgdXBkYXRlKClcbiAgICAgKiAgIHJ1bnMuIFVzZWZ1bCBmb3IgaW50ZXJwb2xhdGluZyBmcmFtZXMuXG4gICAgICovXG4gICAgcHVibGljIGFic3RyYWN0IGRyYXcoaW50ZXJwb2xhdGlvblBlcmNlbnRhZ2UgOiBudW1iZXIpIDogdm9pZDtcblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBydW5zIGF0IHRoZSBlbmQgb2YgdGhlIG1haW4gbG9vcC5cbiAgICAgKlxuICAgICAqIFVubGlrZSB7QGxpbmsgI3NldFVwZGF0ZSB1cGRhdGV9KCksIHdoaWNoIGNhbiBydW4gemVybyBvciBtb3JlIHRpbWVzIHBlclxuICAgICAqIGZyYW1lLCBlbmQoKSBhbHdheXMgcnVucyBleGFjdGx5IG9uY2UgcGVyIGZyYW1lLiBUaGlzIG1ha2VzIGl0IHVzZWZ1bFxuICAgICAqIGZvciBhbnkgdXBkYXRlcyB0aGF0IGFyZSBub3QgZGVwZW5kZW50IG9uIHRpbWUgaW4gdGhlIHNpbXVsYXRpb24uXG4gICAgICogRXhhbXBsZXMgaW5jbHVkZSBjbGVhbmluZyB1cCBhbnkgdGVtcG9yYXJ5IHN0YXRlIHNldCB1cCBieVxuICAgICAqIHtAbGluayAjc2V0QmVnaW4gYmVnaW59KCksIGxvd2VyaW5nIHRoZSB2aXN1YWwgcXVhbGl0eSBpZiB0aGUgZnJhbWUgcmF0ZVxuICAgICAqIGlzIHRvbyBsb3csIG9yIHBlcmZvcm1pbmcgbG9uZy1ydW5uaW5nIHVwZGF0ZXMgaW5jcmVtZW50YWxseS4gQ29tcGFyZWRcbiAgICAgKiB0byBiZWdpbigpLCBnZW5lcmFsbHkgYWN0aW9ucyBzaG91bGQgb2NjdXIgaW4gZW5kKCkgaWYgdGhleSB1c2UgYW55dGhpbmdcbiAgICAgKiB0aGF0IHVwZGF0ZSgpIG9yIHtAbGluayAjc2V0RHJhdyBkcmF3fSgpIGFmZmVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGVuZFxuICAgICAqICAgVGhlIGVuZCgpIGZ1bmN0aW9uLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbZW5kLmZwc11cbiAgICAgKiAgIFRoZSBleHBvbmVudGlhbCBtb3ZpbmcgYXZlcmFnZSBvZiB0aGUgZnJhbWVzIHBlciBzZWNvbmQuIFRoaXMgaXMgdGhlXG4gICAgICogICBzYW1lIHZhbHVlIHJldHVybmVkIGJ5IGBNYWluTG9vcC5nZXRGUFMoKWAuIEl0IGNhbiBiZSB1c2VkIHRvIHRha2VcbiAgICAgKiAgIGFjdGlvbiB3aGVuIHRoZSBGUFMgaXMgdG9vIGxvdyAob3IgdG8gcmVzdG9yZSB0byBub3JtYWxjeSBpZiB0aGUgRlBTXG4gICAgICogICBtb3ZlcyBiYWNrIHVwKS4gRXhhbXBsZXMgb2YgYWN0aW9ucyB0byB0YWtlIGlmIHRoZSBGUFMgaXMgdG9vIGxvd1xuICAgICAqICAgaW5jbHVkZSBleGl0aW5nIHRoZSBhcHBsaWNhdGlvbiwgbG93ZXJpbmcgdGhlIHZpc3VhbCBxdWFsaXR5LCBzdG9wcGluZ1xuICAgICAqICAgb3IgcmVkdWNpbmcgYWN0aXZpdGllcyBvdXRzaWRlIG9mIHRoZSBtYWluIGxvb3AgbGlrZSBldmVudCBoYW5kbGVycyBvclxuICAgICAqICAgYXVkaW8gcGxheWJhY2ssIHBlcmZvcm1pbmcgbm9uLWNyaXRpY2FsIHVwZGF0ZXMgbGVzcyBmcmVxdWVudGx5LCBvclxuICAgICAqICAgaW5jcmVhc2luZyB0aGUgc2ltdWxhdGlvbiB0aW1lc3RlcCAoYnkgY2FsbGluZ1xuICAgICAqICAgYE1haW5Mb29wLnNldFNpbXVsYXRpb25UaW1lc3RlcCgpYCkuIE5vdGUgdGhhdCB0aGlzIGxhc3Qgb3B0aW9uXG4gICAgICogICByZXN1bHRzIGluIG1vcmUgdGltZSBiZWluZyBzaW11bGF0ZWQgcGVyIHVwZGF0ZSgpIGNhbGwsIHdoaWNoIGNhdXNlc1xuICAgICAqICAgdGhlIGFwcGxpY2F0aW9uIHRvIGJlaGF2ZSBub24tZGV0ZXJtaW5pc3RpY2FsbHkuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZW5kLnBhbmljPWZhbHNlXVxuICAgICAqICAgSW5kaWNhdGVzIHdoZXRoZXIgdGhlIHNpbXVsYXRpb24gaGFzIGZhbGxlbiB0b28gZmFyIGJlaGluZCByZWFsIHRpbWUuXG4gICAgICogICBTcGVjaWZpY2FsbHksIGBwYW5pY2Agd2lsbCBiZSBgdHJ1ZWAgaWYgdG9vIG1hbnkgdXBkYXRlcyBvY2N1cnJlZCBpblxuICAgICAqICAgb25lIGZyYW1lLiBJbiBuZXR3b3JrZWQgbG9ja3N0ZXAgYXBwbGljYXRpb25zLCB0aGUgYXBwbGljYXRpb24gc2hvdWxkXG4gICAgICogICB3YWl0IGZvciBzb21lIGFtb3VudCBvZiB0aW1lIHRvIHNlZSBpZiB0aGUgdXNlciBjYW4gY2F0Y2ggdXAgYmVmb3JlXG4gICAgICogICBkcm9wcGluZyB0aGUgdXNlci4gSW4gbmV0d29ya2VkIGJ1dCBub24tbG9ja3N0ZXAgYXBwbGljYXRpb25zLCB0aGlzXG4gICAgICogICB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgdGhlIHVzZXIgbmVlZHMgdG8gYmUgc25hcHBlZCBvciBlYXNlZCB0byB0aGVcbiAgICAgKiAgIGN1cnJlbnQgYXV0aG9yaXRhdGl2ZSBzdGF0ZS4gV2hlbiB0aGlzIGhhcHBlbnMsIGl0IG1heSBiZSBjb252ZW5pZW50XG4gICAgICogICB0byBjYWxsIGBNYWluTG9vcC5yZXNldEZyYW1lRGVsdGEoKWAgdG8gZGlzY2FyZCBhY2N1bXVsYXRlZCBwZW5kaW5nXG4gICAgICogICB1cGRhdGVzLiBJbiBub24tbmV0d29ya2VkIGFwcGxpY2F0aW9ucywgaXQgbWF5IGJlIGFjY2VwdGFibGUgdG8gYWxsb3dcbiAgICAgKiAgIHRoZSBhcHBsaWNhdGlvbiB0byBrZWVwIHJ1bm5pbmcgZm9yIGF3aGlsZSB0byBzZWUgaWYgaXQgd2lsbCBjYXRjaCB1cC5cbiAgICAgKiAgIEhvd2V2ZXIsIHRoaXMgY291bGQgYWxzbyBjYXVzZSB0aGUgYXBwbGljYXRpb24gdG8gbG9vayBsaWtlIGl0IGlzXG4gICAgICogICBydW5uaW5nIHZlcnkgcXVpY2tseSBmb3IgYSBmZXcgZnJhbWVzIGFzIGl0IHRyYW5zaXRpb25zIHRocm91Z2ggdGhlXG4gICAgICogICBpbnRlcm1lZGlhdGUgc3RhdGVzLiBBbiBhbHRlcm5hdGl2ZSB0aGF0IG1heSBiZSBhY2NlcHRhYmxlIGlzIHRvXG4gICAgICogICBzaW1wbHkgaWdub3JlIHRoZSB1bnNpbXVsYXRlZCBlbGFwc2VkIHRpbWUgYnkgY2FsbGluZ1xuICAgICAqICAgYE1haW5Mb29wLnJlc2V0RnJhbWVEZWx0YSgpYCBldmVuIHRob3VnaCB0aGlzIGludHJvZHVjZXNcbiAgICAgKiAgIG5vbi1kZXRlcm1pbmlzdGljIGJlaGF2aW9yLiBJbiBhbGwgY2FzZXMsIGlmIHRoZSBhcHBsaWNhdGlvbiBwYW5pY3NcbiAgICAgKiAgIGZyZXF1ZW50bHksIHRoaXMgaXMgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSBtYWluIGxvb3AgaXMgcnVubmluZyB0b29cbiAgICAgKiAgIHNsb3dseS4gSG93ZXZlciwgbW9zdCBvZiB0aGUgdGltZSB0aGUgZHJvcCBpbiBmcmFtZSByYXRlIHdpbGwgcHJvYmFibHlcbiAgICAgKiAgIGJlIG5vdGljZWFibGUgYmVmb3JlIGEgcGFuaWMgb2NjdXJzLiBUbyBoZWxwIHRoZSBhcHBsaWNhdGlvbiBjYXRjaCB1cFxuICAgICAqICAgYWZ0ZXIgYSBwYW5pYyBjYXVzZWQgYnkgYSBzcGlyYWwgb2YgZGVhdGgsIHRoZSBzYW1lIHN0ZXBzIGNhbiBiZSB0YWtlblxuICAgICAqICAgdGhhdCBhcmUgc3VnZ2VzdGVkIGFib3ZlIGlmIHRoZSBGUFMgZHJvcHMgdG9vIGxvdy5cbiAgICAgKi9cbiAgICBhYnN0cmFjdCBlbmQoZnBzIDogbnVtYmVyLCBwYW5pYyA6IGJvb2xlYW4pIDogdm9pZDtcbn0iLCIvKlxuICogTWF0aFV0aWxpdGllcyBwcm92aWRlcyBhIG51bWJlciBvZiBzZXJ2aWNlcyBmb3IgcmVuZGVyaW5nIHVzaW5nIDR4NCBtYXRyaWNlcywgbGlrZVxuICogdHJhbnNmb3JtdGluZyAoaS5lLiB0cmFuc2xhdGlvbiwgcm90YXRpb24sIGFuZCBzY2FsaW5nKSAzZCBvciAyZCBwb2ludHMgZnJvbSB3b3JsZFxuICogY29vcmRpbmF0ZSBzeXN0ZW1zIHRvIHNjcmVlbiBjb29yZGluYXRlIHN5c3RlbXMuXG4gKi9cbmltcG9ydCB7TWF0cml4fSBmcm9tICcuL01hdHJpeCdcbmltcG9ydCB7VmVjdG9yM30gZnJvbSAnLi9WZWN0b3IzJ1xuXG5leHBvcnQgbmFtZXNwYWNlIE1hdGhVdGlsaXRpZXMge1xuICAgIGV4cG9ydCBmdW5jdGlvbiBkZXRlcm1pbmFudDR4NChyZXN1bHQgOiBNYXRyaXgpIDogbnVtYmVyIHtcbiAgICAgICAgbGV0IGRldDAgPSByZXN1bHQuZ2V0KDAsIDApICogKFxuICAgICAgICAgICAgKHJlc3VsdC5nZXQoMSwgMSkgKiAoKHJlc3VsdC5nZXQoMiwgMikgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDIsIDMpICogcmVzdWx0LmdldCgzLCAyKSkpKVxuICAgICAgICAgICAgLSAocmVzdWx0LmdldCgxLCAyKSAqICgocmVzdWx0LmdldCgyLCAxKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMiwgMykgKiByZXN1bHQuZ2V0KDMsIDEpKSkpXG4gICAgICAgICAgICArIChyZXN1bHQuZ2V0KDEsIDMpICogKChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAyKSkgLSAocmVzdWx0LmdldCgzLCAxKSAqIHJlc3VsdC5nZXQoMiwgMikpKSkpO1xuICAgICAgICBsZXQgZGV0MSA9IHJlc3VsdC5nZXQoMCwgMSkgKiAoXG4gICAgICAgICAgICAocmVzdWx0LmdldCgxLCAwKSAqICgocmVzdWx0LmdldCgyLCAyKSAqIHJlc3VsdC5nZXQoMywgMykpIC0gKHJlc3VsdC5nZXQoMiwgMykgKiByZXN1bHQuZ2V0KDMsIDIpKSkpXG4gICAgICAgICAgICAtIChyZXN1bHQuZ2V0KDEsIDIpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgzLCAwKSAqIHJlc3VsdC5nZXQoMiwgMykpKSlcbiAgICAgICAgICAgICsgKHJlc3VsdC5nZXQoMSwgMykgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDIpKSAtIChyZXN1bHQuZ2V0KDMsIDApICogcmVzdWx0LmdldCgyLCAyKSkpKSk7XG4gICAgICAgIGxldCBkZXQyID0gcmVzdWx0LmdldCgwLCAyKSAqIChcbiAgICAgICAgICAgIChyZXN1bHQuZ2V0KDEsIDApICogKChyZXN1bHQuZ2V0KDIsIDEpICogcmVzdWx0LmdldCgzLCAzKSkgLSAocmVzdWx0LmdldCgyLCAzKSAqIHJlc3VsdC5nZXQoMywgMSkpKSlcbiAgICAgICAgICAgIC0gKHJlc3VsdC5nZXQoMSwgMSkgKiAoKHJlc3VsdC5nZXQoMiwgMCkgKiByZXN1bHQuZ2V0KDMsIDMpKSAtIChyZXN1bHQuZ2V0KDIsIDMpICogcmVzdWx0LmdldCgzLCAwKSkpKVxuICAgICAgICAgICAgKyAocmVzdWx0LmdldCgxLCAzKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMSkpIC0gKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDApKSkpKTtcbiAgICAgICAgbGV0IGRldDMgPSByZXN1bHQuZ2V0KDAsIDMpICogKFxuICAgICAgICAgICAgKHJlc3VsdC5nZXQoMSwgMCkgKiAoKHJlc3VsdC5nZXQoMiwgMSkgKiByZXN1bHQuZ2V0KDMsIDIpKSAtIChyZXN1bHQuZ2V0KDIsIDIpICogcmVzdWx0LmdldCgzLCAxKSkpKVxuICAgICAgICAgICAgLSAocmVzdWx0LmdldCgxLCAxKSAqICgocmVzdWx0LmdldCgyLCAwKSAqIHJlc3VsdC5nZXQoMywgMikpIC0gKHJlc3VsdC5nZXQoMiwgMikgKiByZXN1bHQuZ2V0KDMsIDApKSkpXG4gICAgICAgICAgICArIChyZXN1bHQuZ2V0KDEsIDIpICogKChyZXN1bHQuZ2V0KDIsIDApICogcmVzdWx0LmdldCgzLCAxKSkgLSAocmVzdWx0LmdldCgyLCAxKSAqIHJlc3VsdC5nZXQoMywgMCkpKSkpO1xuICAgICAgICBsZXQgZGV0ID0gZGV0MCAtIGRldDEgKyBkZXQyIC0gZGV0MztcbiAgICAgICAgY29uc29sZS5sb2coXCJkZXQgPSBcIiArIGRldDAgKyBcIiArIFwiICsgZGV0MSArIFwiICsgXCIgKyBkZXQyICsgXCIgKyBcIiArIGRldDMpO1xuICAgICAgICByZXR1cm4gZGV0O1xuICAgIH1cbiAgICBleHBvcnQgZnVuY3Rpb24gaWRlbnRpdHkocmVzdWx0IDogTWF0cml4KSA6IHZvaWQge1xuICAgICAgICBpZiAocmVzdWx0LmdldFJvd3MoKSA9PT0gcmVzdWx0LmdldENvbHVtbnMoKSkge1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXN1bHQuZ2V0Um93cygpOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHJlc3VsdC5nZXRDb2x1bW5zKCk7IGorKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gailcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5zZXQoMS4wLCBpLCBqKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldCgwLjAsIGksIGopO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBleHBvcnQgZnVuY3Rpb24gaW52ZXJzZShyZXN1bHQgOiBNYXRyaXgsIG1hdCA6IE1hdHJpeCkgOiB2b2lkIHtcbiAgICAgICAgbGV0IGRldCA9IHRoaXMuZGV0ZXJtaW5hbnQobWF0KTtcbiAgICAgICAgbGV0IG0wMCA9IG1hdC5nZXQoMCwgMCk7IGxldCBtMDEgPSBtYXQuZ2V0KDAsIDEpOyBsZXQgbTAyID0gbWF0LmdldCgwLCAyKTsgbGV0IG0wMyA9IG1hdC5nZXQoMCwgMyk7XG4gICAgICAgIGxldCBtMTAgPSBtYXQuZ2V0KDEsIDApOyBsZXQgbTExID0gbWF0LmdldCgxLCAxKTsgbGV0IG0xMiA9IG1hdC5nZXQoMSwgMik7IGxldCBtMTMgPSBtYXQuZ2V0KDEsIDMpO1xuICAgICAgICBsZXQgbTIwID0gbWF0LmdldCgyLCAwKTsgbGV0IG0yMSA9IG1hdC5nZXQoMiwgMSk7IGxldCBtMjIgPSBtYXQuZ2V0KDIsIDIpOyBsZXQgbTIzID0gbWF0LmdldCgyLCAzKTtcbiAgICAgICAgbGV0IG0zMCA9IG1hdC5nZXQoMywgMCk7IGxldCBtMzEgPSBtYXQuZ2V0KDMsIDEpOyBsZXQgbTMyID0gbWF0LmdldCgzLCAyKTsgbGV0IG0zMyA9IG1hdC5nZXQoMywgMyk7XG4gICAgICAgIGxldCB0ZW1wID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGVtcC5zZXQoKG0xMiAqIG0yMyAqIG0zMSkgLSAobTEzICogbTIyICogbTMxKSArIChtMTMgKiBtMjEgKiBtMzIpIC0gKG0xMSAqIG0yMyAqIG0zMikgLSAobTEyICogbTIxICogbTMzKSArIChtMTEgKiBtMjIgKiBtMzMpLCAwLCAwKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0yMiAqIG0zMSkgLSAobTAyICogbTIzICogbTMxKSAtIChtMDMgKiBtMjEgKiBtMzIpICsgKG0wMSAqIG0yMyAqIG0zMikgKyAobTAyICogbTIxICogbTMzKSAtIChtMDEgKiBtMjIgKiBtMzMpLCAwLCAxKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0xMyAqIG0zMSkgLSAobTAzICogbTEyICogbTMxKSArIChtMDMgKiBtMTEgKiBtMzIpIC0gKG0wMSAqIG0xMyAqIG0zMikgLSAobTAyICogbTExICogbTMzKSArIChtMDEgKiBtMTIgKiBtMzMpLCAwLCAyKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0xMiAqIG0yMSkgLSAobTAyICogbTEzICogbTIxKSAtIChtMDMgKiBtMTEgKiBtMjIpICsgKG0wMSAqIG0xMyAqIG0yMikgKyAobTAyICogbTExICogbTIzKSAtIChtMDEgKiBtMTIgKiBtMjMpLCAwLCAzKTtcbiAgICAgICAgdGVtcC5zZXQoKG0xMyAqIG0yMiAqIG0zMCkgLSAobTEyICogbTIzICogbTMwKSAtIChtMTMgKiBtMjAgKiBtMzIpICsgKG0xMCAqIG0yMyAqIG0zMikgKyAobTEyICogbTIwICogbTMzKSAtIChtMTAgKiBtMjIgKiBtMzMpLCAxLCAwKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0yMyAqIG0zMCkgLSAobTAzICogbTIyICogbTMwKSArIChtMDMgKiBtMjAgKiBtMzIpIC0gKG0wMCAqIG0yMyAqIG0zMikgLSAobTAyICogbTIwICogbTMzKSArIChtMDAgKiBtMjIgKiBtMzMpLCAxLCAxKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0xMiAqIG0zMCkgLSAobTAyICogbTEzICogbTMwKSAtIChtMDMgKiBtMTAgKiBtMzIpICsgKG0wMCAqIG0xMyAqIG0zMikgKyAobTAyICogbTEwICogbTMzKSAtIChtMDAgKiBtMTIgKiBtMzMpLCAxLCAyKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0xMyAqIG0yMCkgLSAobTAzICogbTEyICogbTIwKSArIChtMDMgKiBtMTAgKiBtMjIpIC0gKG0wMCAqIG0xMyAqIG0yMikgLSAobTAyICogbTEwICogbTIzKSArIChtMDAgKiBtMTIgKiBtMjMpLCAxLCAzKTtcbiAgICAgICAgdGVtcC5zZXQoKG0xMSAqIG0yMyAqIG0zMCkgLSAobTEzICogbTIxICogbTMwKSArIChtMTMgKiBtMjAgKiBtMzEpIC0gKG0xMCAqIG0yMyAqIG0zMSkgLSAobTExICogbTIwICogbTMzKSArIChtMTAgKiBtMjEgKiBtMzMpLCAyLCAwKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0yMSAqIG0zMCkgLSAobTAxICogbTIzICogbTMwKSAtIChtMDMgKiBtMjAgKiBtMzEpICsgKG0wMCAqIG0yMyAqIG0zMSkgKyAobTAxICogbTIwICogbTMzKSAtIChtMDAgKiBtMjEgKiBtMzMpLCAyLCAxKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMSAqIG0xMyAqIG0zMCkgLSAobTAzICogbTExICogbTMwKSArIChtMDMgKiBtMTAgKiBtMzEpIC0gKG0wMCAqIG0xMyAqIG0zMSkgLSAobTAxICogbTEwICogbTMzKSArIChtMDAgKiBtMTEgKiBtMzMpLCAyLCAyKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMyAqIG0xMSAqIG0yMCkgLSAobTAxICogbTEzICogbTIwKSAtIChtMDMgKiBtMTAgKiBtMjEpICsgKG0wMCAqIG0xMyAqIG0yMSkgKyAobTAxICogbTEwICogbTIzKSAtIChtMDAgKiBtMTEgKiBtMjMpLCAyLCAzKTtcbiAgICAgICAgdGVtcC5zZXQoKG0xMiAqIG0yMSAqIG0zMCkgLSAobTExICogbTIyICogbTMwKSAtIChtMTIgKiBtMjAgKiBtMzEpICsgKG0xMCAqIG0yMiAqIG0zMSkgKyAobTExICogbTIwICogbTMyKSAtIChtMTAgKiBtMjEgKiBtMzIpLCAzLCAwKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMSAqIG0yMiAqIG0zMCkgLSAobTAyICogbTIxICogbTMwKSArIChtMDIgKiBtMjAgKiBtMzEpIC0gKG0wMCAqIG0yMiAqIG0zMSkgLSAobTAxICogbTIwICogbTMyKSArIChtMDAgKiBtMjEgKiBtMzIpLCAzLCAxKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMiAqIG0xMSAqIG0zMCkgLSAobTAxICogbTEyICogbTMwKSAtIChtMDIgKiBtMTAgKiBtMzEpICsgKG0wMCAqIG0xMiAqIG0zMSkgKyAobTAxICogbTEwICogbTMyKSAtIChtMDAgKiBtMTEgKiBtMzIpLCAzLCAyKTtcbiAgICAgICAgdGVtcC5zZXQoKG0wMSAqIG0xMiAqIG0yMCkgLSAobTAyICogbTExICogbTIwKSArIChtMDIgKiBtMTAgKiBtMjEpIC0gKG0wMCAqIG0xMiAqIG0yMSkgLSAobTAxICogbTEwICogbTIyKSArIChtMDAgKiBtMTEgKiBtMjIpLCAzLCAzKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNldCh0ZW1wLmdldChpLCBqKSAvIGRldCwgaSwgaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXhwb3J0IGZ1bmN0aW9uIG1vZGVsKHJlc3VsdCA6IE1hdHJpeCwgdHJhbnNsYXRpb24gOiBWZWN0b3IzLCByb3RhdGlvbiA6IFZlY3RvcjMsIHNjYWxlIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgLy8gVFJBTlNMQVRJT04gTUFUUklYXHRcbiAgICAgICAgbGV0IHRyYW5zbGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSh0cmFuc2xhdGlvbk1hdHJpeCk7XG4gICAgICAgIHRoaXMudHJhbnNsYXRlKHRyYW5zbGF0aW9uTWF0cml4LCB0cmFuc2xhdGlvbik7XG5cbiAgICAgICAgLy8gUk9UQVRJT04gTUFUUklYXG4gICAgICAgIGxldCByb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkocm90YXRpb25NYXRyaXgpO1xuICAgICAgICB0aGlzLnJvdGF0ZShyb3RhdGlvbk1hdHJpeCwgcm90YXRpb24pO1xuXG4gICAgICAgIC8vIFNDQUxJTkcgTUFUUklYXG4gICAgICAgIGxldCBzY2FsZU1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkoc2NhbGVNYXRyaXgpO1xuICAgICAgICB0aGlzLnNjYWxlKHNjYWxlTWF0cml4LCBzY2FsZSk7XG5cbiAgICAgICAgLy8gQU5EIE5PVyBNVUxUSVBMWSBUSEVNIFRPR0VUSEVSIElOIFRIRSBDT1JSRUNUIE9SREVSXG4gICAgICAgIGxldCB0ZW1wTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5tdWx0aXBseSh0ZW1wTWF0cml4LCB0cmFuc2xhdGlvbk1hdHJpeCwgcm90YXRpb25NYXRyaXgpO1xuICAgICAgICB0aGlzLm11bHRpcGx5KHJlc3VsdCwgdGVtcE1hdHJpeCwgc2NhbGVNYXRyaXgpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseShyZXN1bHQgOiBNYXRyaXgsIG1hdDAgOiBNYXRyaXgsIG1hdDEgOiBNYXRyaXgpIDogdm9pZCB7XG4gICAgICAgIC8vIHJlc3VsdCBNSUdIVCBCRSBtYXQwIE9SIG1hdDEgU08gSVQnUyBCRVNUIElGIFdFXG4gICAgICAgIC8vIENBTENVTEFURSBURU1QIFZBTFVFUyBGSVJTVCBCRUZPUkUgQVNTSUdOTUVOVFxuICAgICAgICBsZXQgcjAwID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAxKSAqIG1hdDEuZ2V0KDEsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMikgKiBtYXQxLmdldCgyLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMCkpO1xuICAgICAgICBsZXQgcjEwID0gKG1hdDAuZ2V0KDEsIDApICogbWF0MS5nZXQoMCwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAxKSAqIG1hdDEuZ2V0KDEsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDMpICogbWF0MS5nZXQoMywgMCkpO1xuICAgICAgICBsZXQgcjIwID0gKG1hdDAuZ2V0KDIsIDApICogbWF0MS5nZXQoMCwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMikgKiBtYXQxLmdldCgyLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDMpICogbWF0MS5nZXQoMywgMCkpO1xuICAgICAgICBsZXQgcjMwID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMCkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAxKSAqIG1hdDEuZ2V0KDEsIDApKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMikgKiBtYXQxLmdldCgyLCAwKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMCkpO1xuICAgICAgICBsZXQgcjAxID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAxKSAqIG1hdDEuZ2V0KDEsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMikgKiBtYXQxLmdldCgyLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMSkpO1xuICAgICAgICBsZXQgcjExID0gKG1hdDAuZ2V0KDEsIDApICogbWF0MS5nZXQoMCwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAxKSAqIG1hdDEuZ2V0KDEsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDMpICogbWF0MS5nZXQoMywgMSkpO1xuICAgICAgICBsZXQgcjIxID0gKG1hdDAuZ2V0KDIsIDApICogbWF0MS5nZXQoMCwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMikgKiBtYXQxLmdldCgyLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDMpICogbWF0MS5nZXQoMywgMSkpO1xuICAgICAgICBsZXQgcjMxID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMSkpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAxKSAqIG1hdDEuZ2V0KDEsIDEpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMikgKiBtYXQxLmdldCgyLCAxKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMSkpO1xuICAgICAgICBsZXQgcjAyID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMikgKiBtYXQxLmdldCgyLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMikpO1xuICAgICAgICBsZXQgcjEyID0gKG1hdDAuZ2V0KDEsIDApICogbWF0MS5nZXQoMCwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDMpICogbWF0MS5nZXQoMywgMikpO1xuICAgICAgICBsZXQgcjIyID0gKG1hdDAuZ2V0KDIsIDApICogbWF0MS5nZXQoMCwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMikgKiBtYXQxLmdldCgyLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDMpICogbWF0MS5nZXQoMywgMikpO1xuICAgICAgICBsZXQgcjMyID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMikpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAxKSAqIG1hdDEuZ2V0KDEsIDIpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMikgKiBtYXQxLmdldCgyLCAyKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMikpO1xuICAgICAgICBsZXQgcjAzID0gKG1hdDAuZ2V0KDAsIDApICogbWF0MS5nZXQoMCwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgwLCAxKSAqIG1hdDEuZ2V0KDEsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMCwgMikgKiBtYXQxLmdldCgyLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDAsIDMpICogbWF0MS5nZXQoMywgMykpO1xuICAgICAgICBsZXQgcjEzID0gKG1hdDAuZ2V0KDEsIDApICogbWF0MS5nZXQoMCwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgxLCAxKSAqIG1hdDEuZ2V0KDEsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMSwgMikgKiBtYXQxLmdldCgyLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDEsIDMpICogbWF0MS5nZXQoMywgMykpO1xuICAgICAgICBsZXQgcjIzID0gKG1hdDAuZ2V0KDIsIDApICogbWF0MS5nZXQoMCwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgyLCAxKSAqIG1hdDEuZ2V0KDEsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMiwgMikgKiBtYXQxLmdldCgyLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDIsIDMpICogbWF0MS5nZXQoMywgMykpO1xuICAgICAgICBsZXQgcjMzID0gKG1hdDAuZ2V0KDMsIDApICogbWF0MS5nZXQoMCwgMykpXG4gICAgICAgICAgICArIChtYXQwLmdldCgzLCAxKSAqIG1hdDEuZ2V0KDEsIDMpKVxuICAgICAgICAgICAgKyAobWF0MC5nZXQoMywgMikgKiBtYXQxLmdldCgyLCAzKSlcbiAgICAgICAgICAgICsgKG1hdDAuZ2V0KDMsIDMpICogbWF0MS5nZXQoMywgMykpO1xuXG4gICAgICAgIC8vIE5PVyBQVVQgQUxMIFRIRSBDQUxDVUxBVEVEIFZBTFVFUyBJTiBUSEUgcmVzdWx0IE1BVFJJWFxuICAgICAgICByZXN1bHQuc2V0KHIwMCwgMCwgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQocjEwLCAxLCAwKTtcbiAgICAgICAgcmVzdWx0LnNldChyMjAsIDIsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHIzMCwgMywgMCk7XG4gICAgICAgIHJlc3VsdC5zZXQocjAxLCAwLCAxKTtcbiAgICAgICAgcmVzdWx0LnNldChyMTEsIDEsIDEpO1xuICAgICAgICByZXN1bHQuc2V0KHIyMSwgMiwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQocjMxLCAzLCAxKTtcbiAgICAgICAgcmVzdWx0LnNldChyMDIsIDAsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KHIxMiwgMSwgMik7XG4gICAgICAgIHJlc3VsdC5zZXQocjIyLCAyLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldChyMzIsIDMsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KHIwMywgMCwgMyk7XG4gICAgICAgIHJlc3VsdC5zZXQocjEzLCAxLCAzKTtcbiAgICAgICAgcmVzdWx0LnNldChyMjMsIDIsIDMpO1xuICAgICAgICByZXN1bHQuc2V0KHIzMywgMywgMyk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHByb2plY3Rpb24ocmVzdWx0IDogTWF0cml4LCBuZWFyWiA6IG51bWJlciwgZmFyWiA6IG51bWJlciwgdmlld3BvcnRXaWR0aCA6IG51bWJlciwgdmlld3BvcnRIZWlnaHQgOiBudW1iZXIsIGZvdlkgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIGxldCBhc3BlY3RSYXRpbyA9IHZpZXdwb3J0V2lkdGggLyB2aWV3cG9ydEhlaWdodDtcbiAgICAgICAgbGV0IGZpZWxkT2ZWaWV3WSA9IHRoaXMubWF0aC5kZWdyZWVzVG9SYWRpYW5zKGZvdlkpO1xuICAgICAgICBsZXQgZmllbGRPZlZpZXdYID0gMiAqIE1hdGguYXRhbihNYXRoLnRhbihmaWVsZE9mVmlld1kgLyAyKSAqIGFzcGVjdFJhdGlvKTtcblxuICAgICAgICAvLyBXRSdMTCBVU0UgVEhFU0UgQVMgU0hPUlRIQU5EIEZPUiBMT0FESU5HIE9VUiBNQVRSSVhcbiAgICAgICAgbGV0IG4gPSBuZWFyWjtcbiAgICAgICAgbGV0IGYgPSBmYXJaO1xuICAgICAgICBsZXQgciA9IE1hdGgudGFuKGZpZWxkT2ZWaWV3WCAvIDIpICogbjtcbiAgICAgICAgbGV0IHQgPSBNYXRoLnRhbihmaWVsZE9mVmlld1kgLyAyKSAqIG47XG5cbiAgICAgICAgLy8gMC0zXG4gICAgICAgIHJlc3VsdC5zZXQobiAvIHIsIDAsIDApO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMCwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAwLCAyKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDAsIDMpO1xuICAgICAgICAvLyA0LTdcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDEsIDApO1xuICAgICAgICByZXN1bHQuc2V0KG4gLyB0LCAxLCAxKTtcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDEsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMSwgMyk7XG4gICAgICAgIC8vIDgtMTFcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDIsIDApO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMiwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQoKC0oZiArIG4pKSAvIChmIC0gbiksIDIsIDIpO1xuICAgICAgICByZXN1bHQuc2V0KCgtMiAqIGYgKiBuKSAvIChmIC0gbiksIDIsIDMpO1xuICAgICAgICAvLyAxMi0xNSBcbiAgICAgICAgcmVzdWx0LnNldCgwLjAsIDMsIDApO1xuICAgICAgICByZXN1bHQuc2V0KDAuMCwgMywgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQoLTEuMCwgMywgMik7XG4gICAgICAgIHJlc3VsdC5zZXQoMC4wLCAzLCAzKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gcm90YXRlKHJlc3VsdCA6IE1hdHJpeCwgcm90YXRpb25WZWN0b3IgOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBYLUFYSVMgUk9UQVRJT05cbiAgICAgICAgbGV0IHhSb3RhdGlvbk1hdHJpeCA9IG5ldyBNYXRyaXgoNCwgNCk7XG4gICAgICAgIHRoaXMuaWRlbnRpdHkoeFJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgbGV0IHRoZXRhWCA9IHJvdGF0aW9uVmVjdG9yLmdldFRoZXRhWCgpO1xuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWCksIDEsIDEpO1xuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KE1hdGguc2luKHRoZXRhWCksIDIsIDEpO1xuICAgICAgICB4Um90YXRpb25NYXRyaXguc2V0KC0xICogTWF0aC5zaW4odGhldGFYKSwgMSwgMik7XG4gICAgICAgIHhSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFYKSwgMiwgMik7XG5cbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgWS1BWElTIFJPVEFUSU9OXG4gICAgICAgIGxldCB5Um90YXRpb25NYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLmlkZW50aXR5KHlSb3RhdGlvbk1hdHJpeCk7XG4gICAgICAgIGxldCB0aGV0YVkgPSByb3RhdGlvblZlY3Rvci5nZXRUaGV0YVkoKTtcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVkpLCAwLCAwKTtcbiAgICAgICAgeVJvdGF0aW9uTWF0cml4LnNldCgtMSAqIE1hdGguc2luKHRoZXRhWSksIDIsIDApO1xuICAgICAgICB5Um90YXRpb25NYXRyaXguc2V0KE1hdGguc2luKHRoZXRhWSksIDAsIDIpO1xuICAgICAgICB5Um90YXRpb25NYXRyaXguc2V0KE1hdGguY29zKHRoZXRhWSksIDIsIDIpO1xuXG4gICAgICAgIC8vIFNUQVJUIFdJVEggVEhFIFotQVhJUyBST1RBVElPTlxuICAgICAgICBsZXQgelJvdGF0aW9uTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSh6Um90YXRpb25NYXRyaXgpO1xuICAgICAgICBsZXQgdGhldGFaID0gcm90YXRpb25WZWN0b3IuZ2V0VGhldGFaKCk7XG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5jb3ModGhldGFaKSwgMCwgMCk7XG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoTWF0aC5zaW4odGhldGFaKSwgMSwgMCk7XG4gICAgICAgIHpSb3RhdGlvbk1hdHJpeC5zZXQoLTEgKiBNYXRoLnNpbih0aGV0YVopLCAwLCAxKTtcbiAgICAgICAgelJvdGF0aW9uTWF0cml4LnNldChNYXRoLmNvcyh0aGV0YVopLCAxLCAxKTtcblxuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBYLUFYSVMgUk9UQVRJT05cbiAgICAgICAgbGV0IHRlbXBNYXRyaXggPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLmlkZW50aXR5KHRlbXBNYXRyaXgpO1xuICAgICAgICB0aGlzLm11bHRpcGx5KHRlbXBNYXRyaXgsIHhSb3RhdGlvbk1hdHJpeCwgeVJvdGF0aW9uTWF0cml4KTtcbiAgICAgICAgdGhpcy5tdWx0aXBseShyZXN1bHQsIHRlbXBNYXRyaXgsIHpSb3RhdGlvbk1hdHJpeCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHNjYWxlKHJlc3VsdCA6IE1hdHJpeCwgc2NhbGVWZWN0b3IgOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICAvLyBTVEFSVCBXSVRIIFRIRSBJREVOVElUWSBNQVRSSVhcbiAgICAgICAgdGhpcy5pZGVudGl0eShyZXN1bHQsIHNjYWxlVmVjdG9yKTtcblxuICAgICAgICAvLyBBTkQgVEhFTiBMT0FEIElOIFRIRSBUUkFOU0xBVElPTiBWQUxVRVNcbiAgICAgICAgcmVzdWx0LnNldChzY2FsZVZlY3Rvci5nZXRYKCksIDAsIDApO1xuICAgICAgICByZXN1bHQuc2V0KHNjYWxlVmVjdG9yLmdldFkoKSwgMSwgMSk7XG4gICAgICAgIHJlc3VsdC5zZXQoc2NhbGVWZWN0b3IuZ2V0WigpLCAyLCAyKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtKHJlc3VsdCA6IFZlY3RvcjMsIG1hdCA6IE1hdHJpeCwgdmVjIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgcmVzdWx0LnNldFgoKG1hdC5nZXQoMCwgMCkgKiB2ZWMuZ2V0WCgpKSArIChtYXQuZ2V0KDAsIDEpICogdmVjLmdldFkoKSkgKyAobWF0LmdldCgwLCAyKSAqIHZlYy5nZXRaKCkpICsgKG1hdC5nZXQoMCwgMykgKiB2ZWMuZ2V0VygpKSk7XG4gICAgICAgIHJlc3VsdC5zZXRZKChtYXQuZ2V0KDEsIDApICogdmVjLmdldFgoKSkgKyAobWF0LmdldCgxLCAxKSAqIHZlYy5nZXRZKCkpICsgKG1hdC5nZXQoMSwgMikgKiB2ZWMuZ2V0WigpKSArIChtYXQuZ2V0KDEsIDMpICogdmVjLmdldFcoKSkpO1xuICAgICAgICByZXN1bHQuc2V0WigobWF0LmdldCgyLCAwKSAqIHZlYy5nZXRYKCkpICsgKG1hdC5nZXQoMiwgMSkgKiB2ZWMuZ2V0WSgpKSArIChtYXQuZ2V0KDIsIDIpICogdmVjLmdldFooKSkgKyAobWF0LmdldCgyLCAzKSAqIHZlYy5nZXRXKCkpKTtcbiAgICAgICAgcmVzdWx0LnNldFcoKG1hdC5nZXQoMywgMCkgKiB2ZWMuZ2V0WCgpKSArIChtYXQuZ2V0KDMsIDEpICogdmVjLmdldFkoKSkgKyAobWF0LmdldCgzLCAyKSAqIHZlYy5nZXRaKCkpICsgKG1hdC5nZXQoMywgMykgKiB2ZWMuZ2V0VygpKSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShyZXN1bHQgOiBNYXRyaXgsIHRyYW5zbGF0aW9uVmVjdG9yIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgLy8gU1RBUlQgV0lUSCBUSEUgSURFTlRJVFkgTUFUUklYXG4gICAgICAgIHRoaXMuaWRlbnRpdHkocmVzdWx0KTtcblxuICAgICAgICAvLyBBTkQgVEhFTiBMT0FEIElOIFRIRSBUUkFOU0xBVElPTiBWQUxVRVNcbiAgICAgICAgcmVzdWx0LnNldCh0cmFuc2xhdGlvblZlY3Rvci5nZXRYKCksIDAsIDMpO1xuICAgICAgICByZXN1bHQuc2V0KHRyYW5zbGF0aW9uVmVjdG9yLmdldFkoKSwgMSwgMyk7XG4gICAgICAgIHJlc3VsdC5zZXQodHJhbnNsYXRpb25WZWN0b3IuZ2V0WigpLCAyLCAzKTtcbiAgICB9XG5cbiAgICBleHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKHJlc3VsdCA6IE1hdHJpeCwgbWF0IDogTWF0cml4KSA6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgdGVtcCA9IG1hdC5nZXQoaSwgaik7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnNldCh0ZW1wLCBqLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiB2aWV3KHJlc3VsdCA6IE1hdHJpeCwgY2FtZXJhUG9zaXRpb24gOiBWZWN0b3IzLCBjYW1lcmFPcmllbnRhdGlvbiA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIGxldCBwaXRjaCA9IHRoaXMubWF0aC5kZWdyZWVzVG9SYWRpYW5zKGNhbWVyYU9yaWVudGF0aW9uLmdldFRoZXRhWCgpKTtcbiAgICAgICAgbGV0IHlhdyA9IHRoaXMubWF0aC5kZWdyZWVzVG9SYWRpYW5zKGNhbWVyYU9yaWVudGF0aW9uLmdldFRoZXRhWSgpKTtcbiAgICAgICAgbGV0IHJvbGwgPSB0aGlzLm1hdGguZGVncmVlc1RvUmFkaWFucyhjYW1lcmFPcmllbnRhdGlvbi5nZXRUaGV0YVooKSk7XG5cbiAgICAgICAgLy8gVE8gVFJBTlNMQVRFXG4gICAgICAgIGxldCB0cmFuc2xhdGVWZWN0b3IgPSB0aGlzLm1hdGgudmVjdG9yTWF0aC5jcmVhdGVQb3NpdGlvblZlY3RvcigpO1xuICAgICAgICB0cmFuc2xhdGVWZWN0b3Iuc2V0KC1jYW1lcmFQb3NpdGlvbi5nZXRYKCksIC1jYW1lcmFQb3NpdGlvbi5nZXRZKCksIC1jYW1lcmFQb3NpdGlvbi5nZXRaKCkpO1xuICAgICAgICBsZXQgdHJhbnNsYXRlTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5pZGVudGl0eSh0cmFuc2xhdGVNYXRyaXgpO1xuICAgICAgICB0aGlzLnRyYW5zbGF0ZSh0cmFuc2xhdGVNYXRyaXgsIHRyYW5zbGF0ZVZlY3Rvcik7XG5cbiAgICAgICAgLy8gVE8gUk9UQVRFXG4gICAgICAgIGxldCByb3RhdGVWZWN0b3IgPSB0aGlzLm1hdGgudmVjdG9yTWF0aC5jcmVhdGVSb3RhdGlvblZlY3RvcigpO1xuICAgICAgICByb3RhdGVWZWN0b3Iuc2V0KC1waXRjaCwgLXlhdywgLXJvbGwpO1xuICAgICAgICBsZXQgcm90YXRlTWF0cml4ID0gbmV3IE1hdHJpeCg0LCA0KTtcbiAgICAgICAgdGhpcy5yb3RhdGUocm90YXRlTWF0cml4LCByb3RhdGVWZWN0b3IpO1xuXG4gICAgICAgIC8vIE5PVyBDT01CSU5FIFRIRSAyIE1BVFJJQ0VTXG4gICAgICAgIHRoaXMubXVsdGlwbHkocmVzdWx0LCByb3RhdGVNYXRyaXgsIHRyYW5zbGF0ZU1hdHJpeCk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIGFkZFZlY3RvcnMocmVzdWx0IDogVmVjdG9yMywgdmVjMCA6IFZlY3RvcjMsIHZlYzEgOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHZlYzAuZ2V0U2l6ZSgpOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IHZlYzAuZ2V0QXQoaSkgKyB2ZWMxLmdldEF0KGkpO1xuICAgICAgICAgICAgcmVzdWx0LnNldEF0KGksIHRvdGFsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBjcm9zc1Byb2R1Y3QocmVzdWx0IDogVmVjdG9yMywgdmVjMCA6IFZlY3RvcjMsIHZlYzEgOiBWZWN0b3IzKSA6IHZvaWQge1xuICAgICAgICBsZXQgcmVzdWx0MCA9ICh2ZWMwLmdldFkoKSAqIHZlYzEuZ2V0WigpKVxuICAgICAgICAgICAgLSAodmVjMS5nZXRZKCkgKiB2ZWMwLmdldFooKSk7XG4gICAgICAgIGxldCByZXN1bHQxID0gKHZlYzAuZ2V0WigpICogdmVjMS5nZXRYKCkpXG4gICAgICAgICAgICAtICh2ZWMxLmdldFooKSAqIHZlYzAuZ2V0WCgpKTtcbiAgICAgICAgbGV0IHJlc3VsdDIgPSAodmVjMC5nZXRYKCkgKiB2ZWMxLmdldFkoKSlcbiAgICAgICAgICAgIC0gKHZlYzEuZ2V0WCgpICogdmVjMC5nZXRZKCkpO1xuICAgICAgICByZXN1bHQuc2V0WChyZXN1bHQwKTtcbiAgICAgICAgcmVzdWx0LnNldFkocmVzdWx0MSk7XG4gICAgICAgIHJlc3VsdC5zZXRaKHJlc3VsdDIpO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBkb3RQcm9kdWN0KHZlYzAgOiBWZWN0b3IzLCB2ZWMxIDogVmVjdG9yMykgOiBudW1iZXIge1xuICAgICAgICBsZXQgcmVzdWx0WCA9IHZlYzAuZ2V0WCgpICogdmVjMS5nZXRYKCk7XG4gICAgICAgIGxldCByZXN1bHRZID0gdmVjMC5nZXRZKCkgKiB2ZWMxLmdldFkoKTtcbiAgICAgICAgbGV0IHJlc3VsdFogPSB2ZWMwLmdldFooKSAqIHZlYzEuZ2V0WigpO1xuICAgICAgICByZXR1cm4gcmVzdWx0WCArIHJlc3VsdFkgKyByZXN1bHRaO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBtdWx0aXBseVZlY3RvcnMocmVzdWx0IDogVmVjdG9yMywgdmVjIDogVmVjdG9yMywgc2NhbGFyIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICBsZXQgdmVjWCA9IHZlYy5nZXRYKCkgKiBzY2FsYXI7XG4gICAgICAgIGxldCB2ZWNZID0gdmVjLmdldFkoKSAqIHNjYWxhcjtcbiAgICAgICAgbGV0IHZlY1ogPSB2ZWMuZ2V0WigpICogc2NhbGFyO1xuICAgICAgICByZXN1bHQuc2V0WCh2ZWNYKTtcbiAgICAgICAgcmVzdWx0LnNldFkodmVjWSk7XG4gICAgICAgIHJlc3VsdC5zZXRaKHZlY1opO1xuICAgIH1cblxuICAgIGV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemUocmVzdWx0IDogVmVjdG9yMywgdmVjIDogVmVjdG9yMykgOiB2b2lkIHtcbiAgICAgICAgbGV0IHhTcXVhcmVkID0gdmVjLmdldFgoKSAqIHZlYy5nZXRYKCk7XG4gICAgICAgIGxldCB5U3F1YXJlZCA9IHZlYy5nZXRZKCkgKiB2ZWMuZ2V0WSgpO1xuICAgICAgICBsZXQgelNxdWFyZWQgPSB2ZWMuZ2V0WigpICogdmVjLmdldFooKTtcbiAgICAgICAgbGV0IGRpc3RhbmNlID0gTWF0aC5zcXJ0KHhTcXVhcmVkICsgeVNxdWFyZWQgKyB6U3F1YXJlZCk7XG4gICAgICAgIHJlc3VsdC5zZXRYKHZlYy5nZXRYKCkgLyBkaXN0YW5jZSk7XG4gICAgICAgIHJlc3VsdC5zZXRZKHZlYy5nZXRZKCkgLyBkaXN0YW5jZSk7XG4gICAgICAgIHJlc3VsdC5zZXRaKHZlYy5nZXRaKCkgLyBkaXN0YW5jZSk7XG4gICAgfVxuXG4gICAgZXhwb3J0IGZ1bmN0aW9uIHN1YnRyYWN0VmVjdG9ycyhyZXN1bHQgOiBWZWN0b3IzLCB2ZWMwIDogVmVjdG9yMywgdmVjMSA6IFZlY3RvcjMpIDogdm9pZCB7XG4gICAgICAgIGxldCByZXN1bHRYID0gdmVjMC5nZXRYKCkgLSB2ZWMxLmdldFgoKTtcbiAgICAgICAgbGV0IHJlc3VsdFkgPSB2ZWMwLmdldFkoKSAtIHZlYzEuZ2V0WSgpO1xuICAgICAgICBsZXQgcmVzdWx0WiA9IHZlYzAuZ2V0WigpIC0gdmVjMS5nZXRaKCk7XG4gICAgICAgIHJlc3VsdC5zZXRYKHJlc3VsdFgpO1xuICAgICAgICByZXN1bHQuc2V0WShyZXN1bHRZKTtcbiAgICAgICAgcmVzdWx0LnNldFoocmVzdWx0Wik7XG4gICAgfVxufSIsIi8qXG4gKiBBIE1hdHJpeCBpcyB1c2VkIGZvciB0cmFuc2Zvcm1pbmcgcG9pbnRzIGZyb20gbG9jYWxcbiAqIGNvb3JkaW5hdGVzIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxuICovXG5leHBvcnQgY2xhc3MgTWF0cml4IHtcbiAgICBwcml2YXRlIG1hdCA6IEZsb2F0MzJBcnJheTtcbiAgICBwcml2YXRlIHJvd3MgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjb2x1bW5zIDogbnVtYmVyO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHJvd3MgOiBudW1iZXIsIGNvbHVtbnMgOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5yb3dzID0gcm93cztcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gY29sdW1ucztcbiAgICAgICAgdGhpcy5tYXQgPSBuZXcgRmxvYXQzMkFycmF5KHJvd3MgKiBjb2x1bW5zKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAocm93cyAqIGNvbHVtbnMpOyBpKyspXG4gICAgICAgICAgICB0aGlzLm1hdFtpXSA9IDAuMDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RGF0YSgpIDogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSb3dzKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2x1bW5zKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJbmRleCAocm93cyA6IG51bWJlciwgY29sdW1ucyA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHRoaXMucm93cyAqIGNvbHVtbnMpICsgcm93cztcbiAgICB9XG4gICAgXG4gICAgcHVibGljIGdldCAocm93IDogbnVtYmVyLCBjb2x1bW4gOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJbmRleChyb3csIGNvbHVtbik7XG4gICAgICAgIGxldCB2YWx1ZVRvUmV0dXJuID0gdGhpcy5tYXRbaW5kZXhdO1xuICAgICAgICByZXR1cm4gdmFsdWVUb1JldHVybjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0ICh2YWx1ZSA6IG51bWJlciwgcm93IDogbnVtYmVyLCBjb2x1bW4gOiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5nZXRJbmRleChyb3csIGNvbHVtbik7XG4gICAgICAgIHRoaXMubWF0W2luZGV4XSA9IHZhbHVlO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgcHJpbnQgKCkgOiB2b2lkIHtcbiAgICAgICAgbGV0IG1heFdpZHRoID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRlc3ROdW0gPSB0aGlzLmdldChqLCBpKSArIFwiXCI7XG4gICAgICAgICAgICAgICAgaWYgKHRlc3ROdW0ubGVuZ3RoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGggPSB0ZXN0TnVtLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHRleHQgPSBcIlsgXCI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb3dzOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChpID4gMClcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiICBcIjtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdGhpcy5jb2x1bW5zOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbnVtVGV4dCA9IHRoaXMuZ2V0KGksIGopICsgXCJcIjtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVtVGV4dC5sZW5ndGggPCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgICAgICBudW1UZXh0ID0gXCIgXCIgKyBudW1UZXh0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZXh0ICs9IG51bVRleHQ7XG4gICAgICAgICAgICAgICAgaWYgKGogPCAodGhpcy5jb2x1bW5zIC0gMSkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIiBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpIDwgKHRoaXMucm93cyAtIDEpKSB7XG4gICAgICAgICAgICAgICAgdGV4dCArPSBcIlxcblwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGV4dCArPSBcIl1cIjtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHQpO1xuICAgICAgICB9XG4gICAgfVxufSIsIi8qKlxuICogVmVjdG9yM1xuICogXG4gKiBUaGUgVmVjdG9yMyBjbGFzcyBjYW4gYmUgdXNlZCBmb3IgYW55IDJkIG9yIDNkIHBvaW50LCB2ZWN0b3IsIFxuICogb3Igcm90YXRpb24gKGkuZS4gYW5nbGVzIG9mIG9yaWVudGF0aW9uKS5cbiAqL1xuZXhwb3J0IGNsYXNzIFZlY3RvcjMge1xuICAgIHByaXZhdGUgdmVjIDogRmxvYXQzMkFycmF5O1xuICAgIHByaXZhdGUgc2l6ZSA6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy52ZWMgPSBuZXcgRmxvYXQzMkFycmF5KDQpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKylcbiAgICAgICAgICAgIHRoaXMudmVjW2ldID0gMC4wO1xuICAgICAgICB0aGlzLnNpemUgPSA0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTaXplKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBdChpbmRleCA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbaW5kZXhdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRYKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbMF07XG4gICAgfVxuXG4gICAgcHVibGljIGdldFkoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlY1sxXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0WigpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzJdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRXKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbM107XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRoZXRhWCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjWzBdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaGV0YVkoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlY1sxXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGhldGFaKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy52ZWNbMl07XG4gICAgfVxuXG4gICAgcHVibGljIHNldChpbml0MCA6IG51bWJlciwgaW5pdDEgOiBudW1iZXIsIGluaXQyIDogbnVtYmVyLCBpbml0MyA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbMF0gPSBpbml0MDtcbiAgICAgICAgdGhpcy52ZWNbMV0gPSBpbml0MTtcbiAgICAgICAgdGhpcy52ZWNbMl0gPSBpbml0MjtcbiAgICAgICAgdGhpcy52ZWNbM10gPSBpbml0MztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0QXQoaW5kZXggOiBudW1iZXIsIHZhbHVlIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnZlY1tpbmRleF0gPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0WChpbml0WCA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbMF0gPSBpbml0WDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0WShpbml0WSA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbMV0gPSBpbml0WTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Wihpbml0WiA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbMl0gPSBpbml0WjtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Vyhpbml0VyA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy52ZWNbM10gPSBpbml0VztcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VGhldGFYKGluaXRUaGV0YVggOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0WChpbml0VGhldGFYKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VGhldGFZKGluaXRUaGV0YVkgOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0WShpbml0VGhldGFZKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0VGhldGFaKGluaXRUaGV0YVogOiBudW1iZXIpIDogdm9pZCB7XG4gICAgICAgIHRoaXMuc2V0Wihpbml0VGhldGFaKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcHJpbnQoKSA6IHZvaWQge1xuICAgICAgICBsZXQgdGV4dCA9IFwiW1wiO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB0ZXh0ICs9IHRoaXMudmVjW2ldO1xuICAgICAgICAgICAgaWYgKGkgPCAodGhpcy5zaXplIC0gMSkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0ICs9IFwiLCBcIjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0ZXh0ICs9IFwiXVwiO1xuICAgICAgICBjb25zb2xlLmxvZyh0ZXh0KTtcbiAgICB9XG59IiwiaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gXCIuL1ZlY3RvcjNcIjtcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiO1xuXG4vKipcbiAqIGJvdWRpbmdDaXJjbGUgXG4gKiBcbiAqIFRoaXMgY2xhc3MgZGVjb3JhdGVzIHRoZSB2ZWN0b3IzIGNsYXNzIHVzaW5nIHRoZSBmaWVsZHMgdG8gc3RvcmUgeCwgeSwgYW5kIHJhZGl1cyBvZiBhIGNpcmNsZS5cbiAqIFxuICovXG5leHBvcnQgY2xhc3MgQm91bmRpbmdDaXJjbGUge1xuICAgIHByaXZhdGUgdmVjMzogVmVjdG9yMztcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihzcHJpdGU6IEFuaW1hdGVkU3ByaXRlKSB7XG4gICAgICAgIHRoaXMudmVjMyA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgICAgICAgdGhpcy52ZWMzLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgKHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKSAvIDIpKTtcbiAgICAgICAgdGhpcy52ZWMzLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gKHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlSGVpZ2h0KCkgLyAyKSk7XG5cbiAgICAgICAgbGV0IHNwcml0ZVdpZHRoOiBudW1iZXIgPSBzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCk7XG4gICAgICAgIGxldCBzcHJpdGVIZWlnaHQ6IG51bWJlciA9IHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlSGVpZ2h0KCk7XG5cbiAgICAgICAgdGhpcy52ZWMzLnNldFooTWF0aC5zcXJ0KChzcHJpdGVXaWR0aCAvIDIgKiBzcHJpdGVXaWR0aCAvIDIpICsgKHNwcml0ZUhlaWdodCAvIDIgKiBzcHJpdGVIZWlnaHQgLyAyKSkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSYWRpdXMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjMy5nZXRaKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFgoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjMy5nZXRYKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFkoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVjMy5nZXRZKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFJhZGl1cyhzcHJpdGVXaWR0aDogbnVtYmVyLCBzcHJpdGVIZWlnaHQ6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnZlYzMuc2V0WihNYXRoLnNxcnQoKHNwcml0ZVdpZHRoIC8gMiAqIHNwcml0ZVdpZHRoIC8gMikgKyAoc3ByaXRlSGVpZ2h0IC8gMiAqIHNwcml0ZUhlaWdodCAvIDIpKSk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFgoeDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHRoaXMudmVjMy5zZXRYKHgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRZKHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLnZlYzMuc2V0WSh5KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW50ZXJzZWN0cyhidjI6IEJvdW5kaW5nQ2lyY2xlKTogYm9vbGVhbiB7XG5cbiAgICAgICAgbGV0IGRlbHRhWDogbnVtYmVyID0gdGhpcy5nZXRYKCkgLSBidjIuZ2V0WCgpO1xuICAgICAgICBsZXQgZGVsdGFZOiBudW1iZXIgPSB0aGlzLmdldFkoKSAtIGJ2Mi5nZXRZKCk7XG4gICAgICAgIGxldCBtOiBudW1iZXIgPSBNYXRoLnNxcnQoKGRlbHRhWCAqIGRlbHRhWCkgKyAoZGVsdGFZICogZGVsdGFZKSk7XG5cbiAgICAgICAgaWYgKG0gPCB0aGlzLmdldFJhZGl1cygpICsgYnYyLmdldFJhZGl1cygpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIHByaW50KCk6IHZvaWQge1xuICAgICAgICBsZXQgdGV4dCA9IFwiW1hfUE9TSVRJT046IFwiICsgdGhpcy52ZWMzLmdldFgoKSArIFwiLCBZX1BPU0lUSU9OOiBcIiArIHRoaXMudmVjMy5nZXRZKCkgKyBcIiwgUkFESVVTOiBcIiArIHRoaXMudmVjMy5nZXRaKCkgKyBcIl1cIjtcbiAgICAgICAgY29uc29sZS5sb2codGV4dCk7XG4gICAgfVxufSIsImltcG9ydCB7IFNjZW5lR3JhcGggfSBmcm9tICcuLi9zY2VuZS9TY2VuZUdyYXBoJ1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tICcuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUnXG5pbXBvcnQgeyBTY2VuZU9iamVjdCB9IGZyb20gJy4uL3NjZW5lL1NjZW5lT2JqZWN0JztcbmltcG9ydCB7IFZlY3RvcjMgfSBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IHsgQm91bmRpbmdDaXJjbGUgfSBmcm9tICcuLi9tYXRoL2JvdW5kaW5nQ2lyY2xlJztcbmltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi4vQUkvQUlCZWhhdmlvcic7XG5cbmV4cG9ydCBjbGFzcyBHYW1lUGh5c2ljcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICB9XG5cbiAgICB1cGRhdGUoc2NlbmVHcmFwaDogU2NlbmVHcmFwaCk6IHZvaWQge1xuICAgICAgICAvLyBVUERBVEUgQUxMIE9CSkVDVCBQT1NJVElPTlMgQUNDT1JESU5HIFRPIFRIRUlSIFZFTE9DSVRJRVNcbiAgICAgICAgLy8gQlVUIE1BS0UgU1VSRSBUTyBQRVJGT1JNIENPTExJU0lPTiBERVRFQ1RJT04gQVMgV0VMTFxuICAgICAgICAvLyBOT1RFLCBGT1IgVEhJUyBZT1UgU0hPVUxEIE1BS0UgU1VSRSBFQUNIIFNDRU5FIE9CSkVDVFxuICAgICAgICAvLyBIQVMgQSBCT1VORElORyBWT0xVTUUgTElLRSBFSVRIRVIgQU4gQUFCQiBPUiBBIENJUkNMRVxuXG4gICAgICAgIGxldCBub25QbGF5ZXJTcHJpdGVzOiBBbmltYXRlZFNwcml0ZVtdID0gc2NlbmVHcmFwaC5zcHJpdGVzSW5SYW5nZShcbiAgICAgICAgICAgIHNjZW5lR3JhcGguZ2V0UGxheWVyKCkuZ2V0UG9zaXRpb24oKS5nZXRYKCksXG4gICAgICAgICAgICBzY2VuZUdyYXBoLmdldFBsYXllcigpLmdldFBvc2l0aW9uKCkuZ2V0WSgpLFxuICAgICAgICAgICAgc2NlbmVHcmFwaC5nZXRQbGF5ZXIoKS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKSk7XG4gICAgICAgIG5vblBsYXllclNwcml0ZXMuc3BsaWNlKG5vblBsYXllclNwcml0ZXMuaW5kZXhPZihzY2VuZUdyYXBoLmdldFBsYXllcigpKSwgMSk7XG5cbiAgICAgICAgbGV0IHBsYXllckJvdW5kaW5nVm9sdW1lOiBCb3VuZGluZ0NpcmNsZSA9IG5ldyBCb3VuZGluZ0NpcmNsZShzY2VuZUdyYXBoLmdldFBsYXllcigpKTtcbiAgICAgICAgbGV0IHNwcml0ZUJvdW5kaW5nQ2lyY2xlOiBCb3VuZGluZ0NpcmNsZSA9IG5ldyBCb3VuZGluZ0NpcmNsZShzY2VuZUdyYXBoLmdldFBsYXllcigpKTtcblxuICAgICAgICBub25QbGF5ZXJTcHJpdGVzLmZvckVhY2goc3ByaXRlID0+IHtcbiAgICAgICAgICAgIHNwcml0ZUJvdW5kaW5nQ2lyY2xlLnNldFgoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIC0gc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVXaWR0aCgpIC8gMik7XG4gICAgICAgICAgICBzcHJpdGVCb3VuZGluZ0NpcmNsZS5zZXRZKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSArIHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlSGVpZ2h0KCkgLyAyKTtcbiAgICAgICAgICAgIHNwcml0ZUJvdW5kaW5nQ2lyY2xlLnNldFJhZGl1cyhzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVdpZHRoKCkgLyAyLCBzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZUhlaWdodCgpIC8gMik7XG4gICAgICAgICAgICAvLyBUaGVzZSBib3VuZGluZyBDaXJjbGVzIGFyZSBub3QgYmVpbmcgdXNlZCBiZWN1YXNlIGJvdW5kaWduIGJveGVzIHdvcmtlZCBiZXR0ZXIgc2luY2UgbXkgc3ByaXRlcyBvbmx5IHJvdGF0ZSA5MCBkZWdyZWVzXG5cbiAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZVNoZWV0VGV4dHVyZSgpLndlYkdMVGV4dHVyZUlkID09IDQpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3ByaXRlLmdldFN0YXRlKCkgIT0gXCJEWUlOR1wiICYmIHNwcml0ZS5nZXRTdGF0ZSgpICE9IFwiREVBRFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHNwcml0ZS5zZXRTdGF0ZShcIkRZSU5HXCIpO1xuICAgICAgICAgICAgICAgICAgICBzcHJpdGUua2lsbCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ByaXRlID8gc3ByaXRlLmhhc0FJIDogZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRBSSgpLnNldEJlaGF2aW9yKFtTdGF0ZS5OT05FXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlU2hlZXRUZXh0dXJlKCkud2ViR0xUZXh0dXJlSWQgPT0gNSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoc3ByaXRlLmdldERpcmVjdGlvbigpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gNDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgOTA6XG4gICAgICAgICAgICAgICAgICAgICAgICBzcHJpdGUuZ2V0UG9zaXRpb24oKS5zZXRYKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIDQwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE4MDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHNwcml0ZS5nZXRQb3NpdGlvbigpLnNldFkoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgNDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjcwOlxuICAgICAgICAgICAgICAgICAgICAgICAgc3ByaXRlLmdldFBvc2l0aW9uKCkuc2V0WChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyA0MCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUuZXJyb3IoXCJpbGxlZ2FsIHNwcml0ZSBkaXJlY3Rpb25cIiwgc3ByaXRlLmdldERpcmVjdGlvbigpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pO1xuXG5cbiAgICB9XG59IiwiLypcbiAqIFRoaXMgY2xhc3MgcmVuZGVycyB0ZXh0IHRvIGEgY2FudmFzLCB1cGRhdGVkIGVhY2ggZnJhbWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBUZXh0VG9SZW5kZXIge1xuICAgIHB1YmxpYyBpZCA6IHN0cmluZztcbiAgICBwdWJsaWMgdGV4dCA6IHN0cmluZztcbiAgICBwdWJsaWMgeCA6IG51bWJlcjtcbiAgICBwdWJsaWMgeSA6IG51bWJlcjtcbiAgICBwdWJsaWMgdXBkYXRlIDogRnVuY3Rpb247XG4gICAgcHVibGljIGZvbnRGYW1pbHkgOiBzdHJpbmc7XG4gICAgcHVibGljIGZvbnRTaXplIDogbnVtYmVyO1xuICAgIHB1YmxpYyBmb250Q29sb3IgOiBzdHJpbmc7XG4gICAgcHVibGljIHByb3BlcnRpZXMgOiBNYXA8c3RyaW5nLCBvYmplY3Q+O1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluaXRJZCA6IHN0cmluZywgaW5pdFRleHQgOiBzdHJpbmcsIGluaXRYIDogbnVtYmVyLCBpbml0WSA6IG51bWJlciwgaW5pdFVwZGF0ZSA6IEZ1bmN0aW9uKSB7XG4gICAgICAgIHRoaXMuaWQgPSBpbml0SWQ7XG4gICAgICAgIHRoaXMudGV4dCA9IGluaXRUZXh0O1xuICAgICAgICB0aGlzLnggPSBpbml0WDtcbiAgICAgICAgdGhpcy55ID0gaW5pdFk7XG4gICAgICAgIHRoaXMudXBkYXRlID0gaW5pdFVwZGF0ZTtcbiAgICAgICAgdGhpcy5mb250RmFtaWx5ID0gXCJcIjtcbiAgICAgICAgdGhpcy5mb250U2l6ZSA9IDA7XG4gICAgICAgIHRoaXMuZm9udENvbG9yID0gXCJcIjtcbiAgICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gbmV3IE1hcCgpO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIFRleHRSZW5kZXJlciB7XG4gICAgcHJpdmF0ZSB0ZXh0VG9SZW5kZXIgOiBBcnJheTxUZXh0VG9SZW5kZXI+O1xuICAgIHByaXZhdGUgdGV4dENhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHByaXZhdGUgdGV4dENhbnZhc1dpZHRoIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGV4dENhbnZhc0hlaWdodCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRleHRDdHggOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gICAgcHJpdmF0ZSBkZWZhdWx0Rm9udEZhbWlseSA6IHN0cmluZztcbiAgICBwcml2YXRlIGRlZmF1bHRGb250U2l6ZSA6IG51bWJlcjtcbiAgICBwcml2YXRlIGRlZmF1bHRGb250Q29sb3IgOiBzdHJpbmc7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IodGV4dENhbnZhc0lkIDogc3RyaW5nLCBpbml0Rm9udEZhbWlseSA6IHN0cmluZywgaW5pdEZvbnRTaXplIDogbnVtYmVyLCBpbml0Rm9udENvbG9yIDogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMudGV4dFRvUmVuZGVyID0gbmV3IEFycmF5KCk7XG4gICAgICAgIHRoaXMudGV4dENhbnZhcyA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZXh0Q2FudmFzSWQpO1xuICAgICAgICB0aGlzLnRleHRDYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdGhpcy50ZXh0Q2FudmFzV2lkdGggPSB0aGlzLnRleHRDYW52YXMud2lkdGg7XG4gICAgICAgIHRoaXMudGV4dENhbnZhc0hlaWdodCA9IHRoaXMudGV4dENhbnZhcy5oZWlnaHQ7XG4gICAgICAgIHRoaXMudGV4dEN0eCA9IHRoaXMudGV4dENhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICAgIHRoaXMuZGVmYXVsdEZvbnRGYW1pbHkgPSBpbml0Rm9udEZhbWlseTtcbiAgICAgICAgdGhpcy5kZWZhdWx0Rm9udFNpemUgPSBpbml0Rm9udFNpemU7XG4gICAgICAgIHRoaXMuZGVmYXVsdEZvbnRDb2xvciA9IGluaXRGb250Q29sb3I7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBhZGRUZXh0VG9SZW5kZXIodGV4dFRvQWRkIDogVGV4dFRvUmVuZGVyKSA6IHZvaWQge1xuICAgICAgICB0ZXh0VG9BZGQuZm9udEZhbWlseSA9IHRoaXMuZGVmYXVsdEZvbnRGYW1pbHk7XG4gICAgICAgIHRleHRUb0FkZC5mb250U2l6ZSA9IHRoaXMuZGVmYXVsdEZvbnRTaXplO1xuICAgICAgICB0ZXh0VG9BZGQuZm9udENvbG9yID0gdGhpcy5kZWZhdWx0Rm9udENvbG9yO1xuICAgICAgICB0aGlzLnRleHRUb1JlbmRlci5wdXNoKHRleHRUb0FkZCk7XG4gICAgfVxuXG4gICAgcHVibGljIGNsZWFyKCkgOiB2b2lkIHtcbiAgICAgICAgdGhpcy50ZXh0VG9SZW5kZXIgPSBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2FudmFzV2lkdGgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRDYW52YXNXaWR0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2FudmFzSGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0Q2FudmFzSGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnRleHRDdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMudGV4dENhbnZhcy53aWR0aCwgdGhpcy50ZXh0Q2FudmFzLmhlaWdodCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50ZXh0VG9SZW5kZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0ZXh0VG9SZW5kZXIgPSB0aGlzLnRleHRUb1JlbmRlcltpXTtcbiAgICAgICAgICAgIHRleHRUb1JlbmRlci51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMudGV4dEN0eC5mb250ID0gXCJcIiArIHRleHRUb1JlbmRlci5mb250U2l6ZSArIFwicHggXCIgKyB0ZXh0VG9SZW5kZXIuZm9udEZhbWlseTtcbiAgICAgICAgICAgIHRoaXMudGV4dEN0eC5maWxsU3R5bGUgPSB0ZXh0VG9SZW5kZXIuZm9udENvbG9yO1xuICAgICAgICAgICAgdGhpcy50ZXh0Q3R4LmZpbGxUZXh0KHRleHRUb1JlbmRlci50ZXh0LCB0ZXh0VG9SZW5kZXIueCwgdGV4dFRvUmVuZGVyLnkpO1xuICAgICAgICB9XG4gICAgfVxufSIsImltcG9ydCB7IFdlYkdMR2FtZVNoYWRlciB9IGZyb20gJy4vV2ViR0xHYW1lU2hhZGVyJ1xuaW1wb3J0IHsgTWF0cml4IH0gZnJvbSAnLi4vbWF0aC9NYXRyaXgnXG5pbXBvcnQgeyBWZWN0b3IzIH0gZnJvbSAnLi4vbWF0aC9WZWN0b3IzJ1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50IHtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgQV9QT1NJVElPTiA9IFwiYV9Qb3NpdGlvblwiO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBBX1RFWF9DT09SRCA9IFwiYV9UZXhDb29yZFwiO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBVX01FU0hfVFJBTlNGT1JNID0gXCJ1X01lc2hUcmFuc2Zvcm1cIjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgVV9URVhfQ09PUkRfRkFDVE9SID0gXCJ1X1RleENvb3JkRmFjdG9yXCI7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IFVfVEVYX0NPT1JEX1NISUZUID0gXCJ1X1RleENvb3JkU2hpZnRcIjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgVV9TQU1QTEVSID0gXCJ1X1NhbXBsZXJcIjtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgTlVNX1ZFUlRJQ0VTID0gNDtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgRkxPQVRTX1BFUl9WRVJURVggPSAyO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBGTE9BVFNfUEVSX1RFWFRVUkVfQ09PUkRJTkFURSA9IDI7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IFRPVEFMX0JZVEVTID0gMTY7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IFZFUlRFWF9QT1NJVElPTl9PRkZTRVQgPSAwO1xuICAgIHByb3RlY3RlZCByZWFkb25seSBURVhUVVJFX0NPT1JESU5BVEVfT0ZGU0VUID0gODtcbiAgICBwcm90ZWN0ZWQgcmVhZG9ubHkgSU5ERVhfT0ZfRklSU1RfVkVSVEVYID0gMDtcblxuICAgIC8vIFRIRVNFIFdJTEwgQkUgUFJPVklERUQgQ1VTVE9NTFkgQUZURVIgQ09OU1RSVUNUSU9OIERVUklORyBpbml0XG4gICAgcHJvdGVjdGVkIHNoYWRlcjogV2ViR0xHYW1lU2hhZGVyO1xuICAgIHByb3RlY3RlZCB2ZXJ0ZXhEYXRhQnVmZmVyOiBXZWJHTEJ1ZmZlcjtcbiAgICBwcm90ZWN0ZWQgd2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnM6IE1hcDxzdHJpbmcsIEdMdWludD47XG4gICAgcHJvdGVjdGVkIHdlYkdMVW5pZm9ybUxvY2F0aW9uczogTWFwPHN0cmluZywgV2ViR0xVbmlmb3JtTG9jYXRpb24+O1xuXG4gICAgLy8gV0UnTEwgVVNFIFRIRVNFIEZPUiBUUkFOU09GTVJJTkcgT0JKRUNUUyBXSEVOIFdFIERSQVcgVEhFTVxuICAgIHByb3RlY3RlZCBtZXNoVHJhbnNmb3JtOiBNYXRyaXg7XG4gICAgcHJvdGVjdGVkIG1lc2hUcmFuc2xhdGU6IFZlY3RvcjM7XG4gICAgcHJvdGVjdGVkIG1lc2hSb3RhdGU6IFZlY3RvcjM7XG4gICAgcHJvdGVjdGVkIG1lc2hTY2FsZTogVmVjdG9yMztcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBXRSdMTCBNQU5BR0UgVEhFU0UgRk9SIE9VUiBXZWJHTCBTSEFERVJTXG4gICAgICAgIHRoaXMud2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMud2ViR0xVbmlmb3JtTG9jYXRpb25zID0gbmV3IE1hcCgpO1xuXG4gICAgICAgIC8vIFdFJ0xMIFVTRSBUSEVTRSBGT1IgVFJBTlNMQVRJTkcsIFJPVEFUSU5HLCBBTkQgU0NBTElORyBUSEUgTUVTSFxuICAgICAgICB0aGlzLm1lc2hUcmFuc2Zvcm0gPSBuZXcgTWF0cml4KDQsIDQpO1xuICAgICAgICB0aGlzLm1lc2hUcmFuc2xhdGUgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLm1lc2hSb3RhdGUgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB0aGlzLm1lc2hTY2FsZSA9IG5ldyBWZWN0b3IzKCk7XG4gICAgfVxuXG4gICAgcHVibGljIGluaXQod2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcbiAgICAgICAgdmVydGV4U2hhZGVyU291cmNlOiBzdHJpbmcsXG4gICAgICAgIGZyYWdtZW50U2hhZGVyU291cmNlOiBzdHJpbmcsXG4gICAgICAgIHJlbmRlclNldHVwRGF0YTogb2JqZWN0KTogdm9pZCB7XG4gICAgICAgIC8vIEZJUlNUIFdFIE5FRUQgVE8gTUFLRSBUSEUgU0hBREVSXG4gICAgICAgIHRoaXMuc2hhZGVyID0gbmV3IFdlYkdMR2FtZVNoYWRlcigpO1xuICAgICAgICB0aGlzLnNoYWRlci5pbml0KHdlYkdMLCB2ZXJ0ZXhTaGFkZXJTb3VyY2UsIGZyYWdtZW50U2hhZGVyU291cmNlKTtcblxuICAgICAgICAvLyBDUkVBVEUgVEhFIEJVRkZFUiBPTiBUSEUgR1BVXG4gICAgICAgIHRoaXMudmVydGV4RGF0YUJ1ZmZlciA9IHdlYkdMLmNyZWF0ZUJ1ZmZlcigpO1xuXG4gICAgICAgIC8vIEJJTkQgVEhFIEJVRkZFUiBUTyBCRSBWRVJURVggREFUQVxuICAgICAgICB3ZWJHTC5iaW5kQnVmZmVyKHdlYkdMLkFSUkFZX0JVRkZFUiwgdGhpcy52ZXJ0ZXhEYXRhQnVmZmVyKTtcblxuICAgICAgICAvLyBNQUtFIFRIRSBNRVNIIERBVEEgT1VSU0VMVkVTIElOIEEgQ0hJTEQgQ0xBU1NcbiAgICAgICAgbGV0IG1lc2hWZXJ0ZXhEYXRhOiBGbG9hdDMyQXJyYXkgPSB0aGlzLmdldFZlcnRleERhdGEocmVuZGVyU2V0dXBEYXRhKTtcblxuICAgICAgICAvLyBBTkQgU0VORCBUSEUgREFUQSBUTyBUSEUgQlVGRkVSIFdFIENSRUFURUQgT04gVEhFIEdQVVxuICAgICAgICB3ZWJHTC5idWZmZXJEYXRhKHdlYkdMLkFSUkFZX0JVRkZFUiwgbWVzaFZlcnRleERhdGEsIHdlYkdMLlNUQVRJQ19EUkFXKTtcblxuICAgICAgICAvLyBTRVRVUCBUSEUgU0hBREVSIEFUVFJJQlVURVMgQU5EIFVOSUZPUk1TXG4gICAgICAgIHRoaXMubG9hZEF0dHJpYnV0ZUxvY2F0aW9ucyh3ZWJHTCwgdGhpcy5nZXRTaGFkZXJBdHRyaWJ1dGVOYW1lcygpKTtcbiAgICAgICAgdGhpcy5sb2FkVW5pZm9ybUxvY2F0aW9ucyh3ZWJHTCwgdGhpcy5nZXRTaGFkZXJVbmlmb3JtTmFtZXMoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGFic3RyYWN0IGdldFZlcnRleERhdGEocmVuZGVyRGF0YTogb2JqZWN0KTogRmxvYXQzMkFycmF5O1xuICAgIHB1YmxpYyBhYnN0cmFjdCBnZXRTaGFkZXJBdHRyaWJ1dGVOYW1lcygpOiBzdHJpbmdbXTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgZ2V0U2hhZGVyVW5pZm9ybU5hbWVzKCk6IHN0cmluZ1tdO1xuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBsb2FkcyBhbGwgdGhlIGF0dHJpYnV0ZSBkYXRhIHZhbHVlcyBzbyB0aGF0IHdlIGNhblxuICAgICAqIHJldHJpZXZlIHRoZW0gbGF0ZXIgd2hlbiBpdCBpcyB0aW1lIHRvIHJlbmRlci4gTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb25cbiAgICAgKiBjYW4gb25seSBiZSBjYWxsZWQgYWZ0ZXIgdGhlIHNoYWRlciBwcm9ncmFtIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAgICovXG4gICAgcHJvdGVjdGVkIGxvYWRBdHRyaWJ1dGVMb2NhdGlvbnMod2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgYXR0cmlidXRlTG9jYXRpb25OYW1lczogQXJyYXk8c3RyaW5nPikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZUxvY2F0aW9uTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbk5hbWU6IHN0cmluZyA9IGF0dHJpYnV0ZUxvY2F0aW9uTmFtZXNbaV07XG4gICAgICAgICAgICBsZXQgbG9jYXRpb246IEdMdWludCA9IHdlYkdMLmdldEF0dHJpYkxvY2F0aW9uKHRoaXMuc2hhZGVyLmdldFByb2dyYW0oKSwgbG9jYXRpb25OYW1lKTtcbiAgICAgICAgICAgIHRoaXMud2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnMuc2V0KGxvY2F0aW9uTmFtZSwgbG9jYXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBsb2FkcyBhbGwgdGhlIHVuaWZvcm0gZGF0YSB2YWx1ZXMgc28gdGhhdCB3ZSBjYW5cbiAgICAgKiByZXRyaWV2ZSB0aGVtIGxhdGVyIHdoZW4gaXQgaXMgdGltZSB0byByZW5kZXIuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uXG4gICAgICogY2FuIG9ubHkgYmUgY2FsbGVkIGFmdGVyIHRoZSBzaGFkZXIgcHJvZ3JhbSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBsb2FkVW5pZm9ybUxvY2F0aW9ucyh3ZWJHTDogV2ViR0xSZW5kZXJpbmdDb250ZXh0LCB1bmlmb3JtTG9jYXRpb25OYW1lczogQXJyYXk8c3RyaW5nPikge1xuICAgICAgICBmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwgdW5pZm9ybUxvY2F0aW9uTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBsb2NhdGlvbk5hbWU6IHN0cmluZyA9IHVuaWZvcm1Mb2NhdGlvbk5hbWVzW2ldO1xuICAgICAgICAgICAgbGV0IGxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHdlYkdMLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCksIGxvY2F0aW9uTmFtZSk7XG4gICAgICAgICAgICB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9ucy5zZXQobG9jYXRpb25OYW1lLCBsb2NhdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG59IiwiLypcbiAqIFRoaXMgc2VydmVzIGFzIHRoZSBzdWJzeXN0ZW0gdGhhdCBtYW5hZ2VzIGFsbCBnYW1lIHJlbmRlcmluZy5cbiAqL1xuaW1wb3J0IHsgVGV4dFJlbmRlcmVyIH0gZnJvbSAnLi9UZXh0UmVuZGVyZXInXG5pbXBvcnQgeyBXZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXIgfSBmcm9tICcuL1dlYkdMR2FtZVRpbGVkTGF5ZXJSZW5kZXJlcidcbmltcG9ydCB7IFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyIH0gZnJvbSAnLi9XZWJHTEdhbWVTcHJpdGVSZW5kZXJlcidcbmltcG9ydCB7IFdlYkdMR2FtZVRleHR1cmUgfSBmcm9tICcuL1dlYkdMR2FtZVRleHR1cmUnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGUgfSBmcm9tICcuLi9zY2VuZS9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUnXG5pbXBvcnQgeyBUaWxlZExheWVyIH0gZnJvbSAnLi4vc2NlbmUvdGlsZXMvVGlsZWRMYXllcidcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi4vc2NlbmUvVmlld3BvcnQnXG5cblxuZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVJlbmRlcmluZ1N5c3RlbSB7XG4gICAgcHJpdmF0ZSByZW5kZXJpbmdDYW52YXM6IEhUTUxDYW52YXNFbGVtZW50O1xuICAgIHByaXZhdGUgd2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dDtcbiAgICBwcml2YXRlIGNhbnZhc1dpZHRoOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBjYW52YXNIZWlnaHQ6IG51bWJlcjtcblxuICAgIC8vIE9VUiBHQU1FUyBSRU5ERVIgVEhSRUUgRElGRkVSRU5UIFRZUEVTIE9GIFRISU5HU1xuICAgIHByaXZhdGUgdGlsZWRMYXllclJlbmRlcmVyOiBXZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXI7XG4gICAgcHJpdmF0ZSBzcHJpdGVSZW5kZXJlcjogV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXI7XG4gICAgcHJpdmF0ZSB0ZXh0UmVuZGVyZXI6IFRleHRSZW5kZXJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvciggcmVuZGVyaW5nQ2FudmFzSWQ6IHN0cmluZyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDYW52YXNJZDogc3RyaW5nKSB7XG4gICAgICAgIC8vIEZJUlNUIFNFVFVQIHdlYkdMXG4gICAgICAgIHRoaXMucmVuZGVyaW5nQ2FudmFzID0gPEhUTUxDYW52YXNFbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHJlbmRlcmluZ0NhbnZhc0lkKTtcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdDYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5yZW5kZXJpbmdDYW52YXMuaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB0aGlzLmNhbnZhc1dpZHRoID0gdGhpcy5yZW5kZXJpbmdDYW52YXMud2lkdGg7XG4gICAgICAgIHRoaXMuY2FudmFzSGVpZ2h0ID0gdGhpcy5yZW5kZXJpbmdDYW52YXMuaGVpZ2h0O1xuICAgICAgICB0aGlzLndlYkdMID0gdGhpcy5yZW5kZXJpbmdDYW52YXMuZ2V0Q29udGV4dChcIndlYmdsXCIpO1xuXG4gICAgICAgIC8vIElGIFRIRSBVU0VSJ1MgTUFDSElORS9CUk9XU0VSIERPRVNOJ1QgU1VQUE9SVFxuICAgICAgICAvLyBXZWJHTCBUSEVOIFRIRVJFJ1MgTk8gUE9JTlQgT0YgR09JTkcgT05cbiAgICAgICAgaWYgKCF0aGlzLndlYkdMKSB7XG4gICAgICAgICAgICAvLyBQUk9WSURFIFNPTUUgRkVFREJBQ0sgVEhBVCBXZWJHTCBXT04nVCBXT1JLIEJFQ0FVU0VcbiAgICAgICAgICAgIC8vIFRIRSBVU0VSJ1MnIEdSQVBISUNTIENBUkQgSVMgRk9SIFRIRSBCSVJEU1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIldlYkdMIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBkZXZpY2VcIik7XG5cbiAgICAgICAgICAgIC8vIEFORCBFTkQgSU5JVElBTElaQVRJT05cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdlYkdMIElTIFNVUFBPUlRFRCwgU08gSU5JVCBFVkVSWVRISU5HIFRIQVQgVVNFUyBJVFxuXG4gICAgICAgIC8vIE1BS0UgVEhFIENMRUFSIENPTE9SIEJMQUNLXG4gICAgICAgIHRoaXMuc2V0Q2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApO1xuXG4gICAgICAgIC8vIEVOQUJMRSBERVBUSCBURVNUSU5HXG4gICAgICAgIHRoaXMud2ViR0wuZGlzYWJsZSh0aGlzLndlYkdMLkRFUFRIX1RFU1QpO1xuICAgICAgICB0aGlzLndlYkdMLmVuYWJsZSh0aGlzLndlYkdMLkJMRU5EKTtcbiAgICAgICAgdGhpcy53ZWJHTC5ibGVuZEZ1bmModGhpcy53ZWJHTC5TUkNfQUxQSEEsIHRoaXMud2ViR0wuT05FX01JTlVTX1NSQ19BTFBIQSk7XG5cbiAgICAgICAgLy8gVFVSTiBPTiBCQUNLRkFDRSBDVUxMSU5HXG4gICAgICAgIHRoaXMud2ViR0wuZW5hYmxlKHRoaXMud2ViR0wuQ1VMTF9GQUNFKTtcblxuICAgICAgICAvLyBUSElTIFNQRUNJRklFUyBUSEFUIFdFJ1JFIFVTSU5HIFRIRSBFTlRJUkUgQ0FOVkFTXG4gICAgICAgIHRoaXMud2ViR0wudmlld3BvcnQoMCwgMCwgdGhpcy5jYW52YXNXaWR0aCwgdGhpcy5jYW52YXNIZWlnaHQpO1xuXG4gICAgICAgIC8vIE1BS0UgVEhFIFRJTEVEIExBWUVSIFJFTkRFUkVSXG4gICAgICAgIHRoaXMudGlsZWRMYXllclJlbmRlcmVyID0gbmV3IFdlYkdMR2FtZVRpbGVkTGF5ZXJSZW5kZXJlcigpO1xuXG4gICAgICAgIC8vIE1BS0UgVEhFIFNQUklURSBSRU5ERVJFUlxuICAgICAgICB0aGlzLnNwcml0ZVJlbmRlcmVyID0gbmV3IFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyKCk7XG5cbiAgICAgICAgLy8gVEhJUyBXSUxMIFNUT1JFIE9VUiBURVhUXG4gICAgICAgIHRoaXMudGV4dFJlbmRlcmVyID0gbmV3IFRleHRSZW5kZXJlcih0ZXh0Q2FudmFzSWQsIFwic2VyaWZcIiwgMTgsIFwiI0ZGRkYwMFwiKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGV4dHVyZUNvbnN0YW50KGlkOiBudW1iZXIpOiBudW1iZXIge1xuICAgICAgICAvLyBXRSBPTkxZIEFMTE9XIEZPUiAxMCBURVhUVVJFUyBUTyBCRSBQVVQgT04gVEhFIEdQVVxuICAgICAgICBzd2l0Y2ggKGlkKSB7XG4gICAgICAgICAgICBjYXNlIDA6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkUwO1xuICAgICAgICAgICAgY2FzZSAxOiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFMTtcbiAgICAgICAgICAgIGNhc2UgMjogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTI7XG4gICAgICAgICAgICBjYXNlIDM6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkUzO1xuICAgICAgICAgICAgY2FzZSA0OiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFNDtcbiAgICAgICAgICAgIGNhc2UgNTogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTU7XG4gICAgICAgICAgICBjYXNlIDY6IHJldHVybiB0aGlzLndlYkdMLlRFWFRVUkU2O1xuICAgICAgICAgICAgY2FzZSA3OiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFNztcbiAgICAgICAgICAgIGNhc2UgODogcmV0dXJuIHRoaXMud2ViR0wuVEVYVFVSRTg7XG4gICAgICAgICAgICBkZWZhdWx0OiByZXR1cm4gdGhpcy53ZWJHTC5URVhUVVJFOTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRXZWJHTCgpOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQge1xuICAgICAgICByZXR1cm4gdGhpcy53ZWJHTDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZWRMYXllclJlbmRlcmVyKCk6IFdlYkdMR2FtZVRpbGVkTGF5ZXJSZW5kZXJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVkTGF5ZXJSZW5kZXJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3ByaXRlUmVuZGVyZXIoKTogV2ViR0xHYW1lU3ByaXRlUmVuZGVyZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5zcHJpdGVSZW5kZXJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGV4dFJlbmRlcmVyKCk6IFRleHRSZW5kZXJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHRSZW5kZXJlcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgaW5pdFdlYkdMVGV4dHVyZSh0ZXh0dXJlVG9Jbml0OiBXZWJHTEdhbWVUZXh0dXJlLCB0ZXh0dXJlSWQ6IG51bWJlciwgaW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICB0ZXh0dXJlVG9Jbml0LndpZHRoID0gaW1hZ2Uud2lkdGg7XG4gICAgICAgIHRleHR1cmVUb0luaXQuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuXG4gICAgICAgIC8vIENSRUFURSBBIFdlYkdMIFRFWFRVUkUgT04gVEhFIEdQVVxuICAgICAgICB0ZXh0dXJlVG9Jbml0LndlYkdMVGV4dHVyZSA9IHRoaXMud2ViR0wuY3JlYXRlVGV4dHVyZSgpO1xuICAgICAgICB0ZXh0dXJlVG9Jbml0LndlYkdMVGV4dHVyZUlkID0gdGV4dHVyZUlkO1xuXG4gICAgICAgIC8vIEZMSVAgVEhFIElNQUdFJ1MgeS1BWElTXG4gICAgICAgIC8vd2ViR0wucGl4ZWxTdG9yZWkod2ViR0wuVU5QQUNLX0ZMSVBfWV9XRUJHTCwgMSk7XG5cbiAgICAgICAgLy8gQUNUSVZBVEUgVEhFIFdlYkdMIFRFWFRVUkUgT04gVEhFIEdQVVxuICAgICAgICAvL2xldCB0ZXh0dXJlTnVtTmFtZSA6IHN0cmluZyA9IFwiVEVYVFVSRVwiICsgdGV4dHVyZUlkO1xuICAgICAgICBsZXQgdGV4dHVyZU5hbWVDb25zdGFudDogbnVtYmVyID0gdGhpcy5nZXRUZXh0dXJlQ29uc3RhbnQodGV4dHVyZUlkKTtcbiAgICAgICAgdGhpcy53ZWJHTC5hY3RpdmVUZXh0dXJlKHRleHR1cmVOYW1lQ29uc3RhbnQpO1xuXG4gICAgICAgIC8vIEJJTkQgVEhFIFRFWFRVUkUgVE8gQSAyRCBUWVBFXG4gICAgICAgIHRoaXMud2ViR0wuYmluZFRleHR1cmUodGhpcy53ZWJHTC5URVhUVVJFXzJELCB0ZXh0dXJlVG9Jbml0LndlYkdMVGV4dHVyZSk7XG5cbiAgICAgICAgLy8gU1BFQ0lGWSBSRU5ERVJJTkcgU0VUVElOR1NcbiAgICAgICAgdGhpcy53ZWJHTC50ZXhQYXJhbWV0ZXJpKHRoaXMud2ViR0wuVEVYVFVSRV8yRCwgdGhpcy53ZWJHTC5URVhUVVJFX01JTl9GSUxURVIsIHRoaXMud2ViR0wuTElORUFSKTtcblxuICAgICAgICAvLyBTRVQgVEhFIElNQUdFIEZPUiBUSEUgVEVYVFVSRVxuICAgICAgICB0aGlzLndlYkdMLnRleEltYWdlMkQodGhpcy53ZWJHTC5URVhUVVJFXzJELCAwLCB0aGlzLndlYkdMLlJHQkEsIHRoaXMud2ViR0wuUkdCQSwgdGhpcy53ZWJHTC5VTlNJR05FRF9CWVRFLCBpbWFnZSk7XG5cbiAgICAgICAgLy8gS0VFUCBJVCBGT1IgV0hFTiBXRSBSRU5ERVJcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Q2xlYXJDb2xvcihyOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyLCBhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy53ZWJHTC5jbGVhckNvbG9yKHIsIGcsIGIsIGEpO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW5kZXIoICB2aWV3cG9ydCA6IFZpZXdwb3J0LFxuICAgICAgICAgICAgICAgICAgICB0aWxlZExheWVyczogQXJyYXk8VGlsZWRMYXllcj4sXG4gICAgICAgICAgICAgICAgICAgIHZpc2libGVTcHJpdGVzOiBBcnJheTxBbmltYXRlZFNwcml0ZT4pOiB2b2lkIHtcbiAgICAgICAgLy8gQ0xFQVIgVEhFIENBTlZBU1xuICAgICAgICB0aGlzLndlYkdMLmNsZWFyKHRoaXMud2ViR0wuQ09MT1JfQlVGRkVSX0JJVCB8IHRoaXMud2ViR0wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgLy8gUkVOREVSIFRIRSBUSUxFRCBMQVlFUiBGSVJTVFxuICAgICAgICB0aGlzLnRpbGVkTGF5ZXJSZW5kZXJlci5yZW5kZXIodGhpcy53ZWJHTCwgdmlld3BvcnQsIHRpbGVkTGF5ZXJzKTtcblxuICAgICAgICAvLyBSRU5ERVIgVEhFIFNQUklURVMgT04gT05FIENBTlZBU1xuICAgICAgICB0aGlzLnNwcml0ZVJlbmRlcmVyLnJlbmRlcih0aGlzLndlYkdMLCB2aWV3cG9ydCwgdmlzaWJsZVNwcml0ZXMpO1xuXG4gICAgICAgIC8vIFRIRU4gVEhFIFRFWFQgT04gQU5PVEhFUiBPVkVSTEFQUElORyBDQU5WQVNcbiAgICAgICAgdGhpcy50ZXh0UmVuZGVyZXIucmVuZGVyKCk7XG4gICAgfVxufSIsIi8qXG4gKiBUaGlzIGlzIGEgd3JhcHBlciBjbGFzcyBmb3IgYSBXZWJHTFByb2dyYW0sIGkuZS4gYSBzaGFkZXIgZm9yIGN1c3RvbSByZW5kZXJpbmdcbiAqIHVzaW5nIFdlYkdMJ3MgcHJvZ3JhbW1hYmxlIHBpcGVsaW5lLlxuICovXG5leHBvcnQgY2xhc3MgV2ViR0xHYW1lU2hhZGVyIHtcbiAgICBwcml2YXRlIHByb2dyYW0gOiBXZWJHTFByb2dyYW07XG4gICAgcHJpdmF0ZSB2ZXJ0ZXhTaGFkZXIgOiBXZWJHTFNoYWRlcjtcbiAgICBwcml2YXRlIGZyYWdtZW50U2hhZGVyIDogV2ViR0xTaGFkZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoKSB7fVxuXG4gICAgcHVibGljIGdldFByb2dyYW0oKSA6IFdlYkdMUHJvZ3JhbSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyYW07XG4gICAgfVxuXG4gICAgcHVibGljIGluaXQod2ViR0wgOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsIHZTb3VyY2UgOiBzdHJpbmcsIGZTb3VyY2UgOiBzdHJpbmcpIDogdm9pZCB7XG4gICAgICAgIHRoaXMudmVydGV4U2hhZGVyID0gPFdlYkdMU2hhZGVyPnRoaXMuY3JlYXRlU2hhZGVyKHdlYkdMLCB3ZWJHTC5WRVJURVhfU0hBREVSLCB2U291cmNlKTtcbiAgICAgICAgdGhpcy5mcmFnbWVudFNoYWRlciA9IDxXZWJHTFNoYWRlcj50aGlzLmNyZWF0ZVNoYWRlcih3ZWJHTCwgd2ViR0wuRlJBR01FTlRfU0hBREVSLCBmU291cmNlKTtcbiAgICAgICAgdGhpcy5wcm9ncmFtID0gdGhpcy5jcmVhdGVTaGFkZXJQcm9ncmFtKHdlYkdMLCB0aGlzLnZlcnRleFNoYWRlciwgdGhpcy5mcmFnbWVudFNoYWRlcik7XG4gICAgfVxuXG4gICAgcHVibGljIGNyZWF0ZVNoYWRlcih3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdHlwZSA6IG51bWJlciwgc291cmNlIDogc3RyaW5nKSA6IFdlYkdMU2hhZGVyIHtcbiAgICAgICAgLy8gTUFLRSBBIE5FVyBTSEFERVIgT0JKRUNULCBMT0FEIElUJ1MgU09VUkNFLCBBTkQgQ09NUElMRSBJVFxuICAgICAgICB2YXIgc2hhZGVyID0gd2ViR0wuY3JlYXRlU2hhZGVyKHR5cGUpO1xuICAgICAgICB3ZWJHTC5zaGFkZXJTb3VyY2Uoc2hhZGVyLCBzb3VyY2UpO1xuICAgICAgICB3ZWJHTC5jb21waWxlU2hhZGVyKHNoYWRlcik7XG5cbiAgICAgICAgLy8gRElEIElUIENPTVBJTEU/XG4gICAgICAgIHZhciBzdWNjZXNzID0gd2ViR0wuZ2V0U2hhZGVyUGFyYW1ldGVyKHNoYWRlciwgd2ViR0wuQ09NUElMRV9TVEFUVVMpO1xuICAgICAgICBpZiAoc3VjY2Vzcykge1xuICAgICAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERJU0FTVEVSXG4gICAgICAgIGNvbnNvbGUubG9nKHdlYkdMLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSk7XG4gICAgICAgIHdlYkdMLmRlbGV0ZVNoYWRlcihzaGFkZXIpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY3JlYXRlU2hhZGVyUHJvZ3JhbSh3ZWJHTCA6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCwgdlNoYWRlciA6IFdlYkdMU2hhZGVyLCBmU2hhZGVyIDogV2ViR0xTaGFkZXIpIDogV2ViR0xQcm9ncmFtIHtcbiAgICAgICAgLy8gTUFLRSBUSEUgR0xTTCBTSEFERVIgUFJPR1JBTVxuICAgICAgICBsZXQgcHJvZ3JhbVRvQ3JlYXRlID0gd2ViR0wuY3JlYXRlUHJvZ3JhbSgpO1xuXG4gICAgICAgIC8vIExJTksgVEhFIFZFUlQgQU5EIEZSQUdcbiAgICAgICAgd2ViR0wuYXR0YWNoU2hhZGVyKHByb2dyYW1Ub0NyZWF0ZSwgdlNoYWRlcik7XG4gICAgICAgIHdlYkdMLmF0dGFjaFNoYWRlcihwcm9ncmFtVG9DcmVhdGUsIGZTaGFkZXIpO1xuXG4gICAgICAgIC8vIE5PVyBXRSBDQU4gTElOSyBUSEUgU0hBREVSIFBST0dSQU1cbiAgICAgICAgd2ViR0wubGlua1Byb2dyYW0ocHJvZ3JhbVRvQ3JlYXRlKTtcbiAgICAgICAgbGV0IGxpbmtlZCA6IGJvb2xlYW4gPSB3ZWJHTC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW1Ub0NyZWF0ZSwgd2ViR0wuTElOS19TVEFUVVMpO1xuXG4gICAgICAgIC8vIElTIElUIExJTktFRD9cbiAgICAgICAgaWYgKCFsaW5rZWQpIHtcbiAgICAgICAgICAgIC8vIERJU0FTVEVSXG4gICAgICAgICAgICBsZXQgZXJyb3JGZWVkYmFjayA6IHN0cmluZyA9IHdlYkdMLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW1Ub0NyZWF0ZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvckZlZWRiYWNrKTtcblxuICAgICAgICAgICAgLy8gRElTQVNURVJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHdlYkdMLmdldFByb2dyYW1JbmZvTG9nKHByb2dyYW1Ub0NyZWF0ZSkpO1xuICAgICAgICAgICAgd2ViR0wuZGVsZXRlUHJvZ3JhbShwcm9ncmFtVG9DcmVhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcm9ncmFtVG9DcmVhdGU7XG4gICAgfVxufSIsImltcG9ydCB7IFdlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudCB9IGZyb20gJy4vV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50J1xuaW1wb3J0IHsgTWF0aFV0aWxpdGllcyB9IGZyb20gJy4uL21hdGgvTWF0aFV0aWxpdGllcydcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlJ1xuaW1wb3J0IHsgQW5pbWF0ZWRTcHJpdGVUeXBlIH0gZnJvbSAnLi4vc2NlbmUvc3ByaXRlL0FuaW1hdGVkU3ByaXRlVHlwZSdcbmltcG9ydCB7IFdlYkdMR2FtZVRleHR1cmUgfSBmcm9tICcuL1dlYkdMR2FtZVRleHR1cmUnXG5pbXBvcnQgeyBWaWV3cG9ydCB9IGZyb20gJy4uL3NjZW5lL1ZpZXdwb3J0J1xuaW1wb3J0IHsgVmVjdG9yMyB9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcblxuZXhwb3J0IGNsYXNzIFdlYkdMR2FtZVNwcml0ZVJlbmRlcmVyIGV4dGVuZHMgV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50IHtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VmVydGV4RGF0YSgpOiBGbG9hdDMyQXJyYXkge1xuICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgICAgICAtMC41LCAwLjUsIDAuMCwgMC4wLFxuICAgICAgICAgICAgLTAuNSwgLTAuNSwgMC4wLCAxLjAsXG4gICAgICAgICAgICAwLjUsIDAuNSwgMS4wLCAwLjAsXG4gICAgICAgICAgICAwLjUsIC0wLjUsIDEuMCwgMS4wXG4gICAgICAgIF0pO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0U2hhZGVyQXR0cmlidXRlTmFtZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW3RoaXMuQV9QT1NJVElPTiwgdGhpcy5BX1RFWF9DT09SRF07XG4gICAgfVxuICAgIHB1YmxpYyBnZXRTaGFkZXJVbmlmb3JtTmFtZXMoKTogc3RyaW5nW10ge1xuICAgICAgICByZXR1cm4gW3RoaXMuVV9NRVNIX1RSQU5TRk9STSwgdGhpcy5VX1NBTVBMRVIsIHRoaXMuVV9URVhfQ09PUkRfRkFDVE9SLCB0aGlzLlVfVEVYX0NPT1JEX1NISUZUXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKHdlYkdMOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXG4gICAgICAgIHZpZXdwb3J0OiBWaWV3cG9ydCxcbiAgICAgICAgdmlzaWJsZVNwcml0ZXM6IEFycmF5PEFuaW1hdGVkU3ByaXRlPik6IHZvaWQge1xuICAgICAgICAvLyBTRUxFQ1QgVEhFIEFOSU1BVEVEIFNQUklURSBSRU5ERVJJTkcgU0hBREVSIFBST0dSQU0gRk9SIFVTRVxuICAgICAgICBsZXQgc2hhZGVyUHJvZ3JhbVRvVXNlID0gdGhpcy5zaGFkZXIuZ2V0UHJvZ3JhbSgpO1xuICAgICAgICB3ZWJHTC51c2VQcm9ncmFtKHNoYWRlclByb2dyYW1Ub1VzZSk7XG5cbiAgICAgICAgLy8gQU5EIFRIRU4gUkVOREVSIEVBQ0ggT05FXG4gICAgICAgIGZvciAobGV0IHNwcml0ZSBvZiB2aXNpYmxlU3ByaXRlcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJBbmltYXRlZFNwcml0ZSh3ZWJHTCwgdmlld3BvcnQsIHNwcml0ZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckFuaW1hdGVkU3ByaXRlKHdlYkdMOiBXZWJHTFJlbmRlcmluZ0NvbnRleHQsXG4gICAgICAgIHZpZXdwb3J0OiBWaWV3cG9ydCxcbiAgICAgICAgc3ByaXRlOiBBbmltYXRlZFNwcml0ZSk6IHZvaWQge1xuICAgICAgICAvLyBZT1UnTEwgTkVFRCBUTyBVUERBVEUgVEhJUyBNRVRIT0QgVE8gTUFLRSBTVVJFIFNQUklURVMgU0NST0xMIEFORCBST1RBVEVcblxuICAgICAgICBsZXQgY2FudmFzV2lkdGg6IG51bWJlciA9IHdlYkdMLmNhbnZhcy53aWR0aDtcbiAgICAgICAgbGV0IGNhbnZhc0hlaWdodDogbnVtYmVyID0gd2ViR0wuY2FudmFzLmhlaWdodDtcbiAgICAgICAgbGV0IHNwcml0ZVR5cGU6IEFuaW1hdGVkU3ByaXRlVHlwZSA9IHNwcml0ZS5nZXRTcHJpdGVUeXBlKCk7XG4gICAgICAgIGxldCB0ZXh0dXJlOiBXZWJHTEdhbWVUZXh0dXJlID0gc3ByaXRlVHlwZS5nZXRTcHJpdGVTaGVldFRleHR1cmUoKTtcblxuICAgICAgICAvLyBDQUxDVUxBVEUgSE9XIE1VQ0ggVE8gVFJBTlNMQVRFIFRIRSBRVUFEIFBFUiBUSEUgU1BSSVRFIFBPU0lUSU9OXG4gICAgICAgIGxldCBzcHJpdGVXaWR0aDogbnVtYmVyID0gc3ByaXRlVHlwZS5nZXRTcHJpdGVXaWR0aCgpO1xuICAgICAgICBsZXQgc3ByaXRlSGVpZ2h0OiBudW1iZXIgPSBzcHJpdGVUeXBlLmdldFNwcml0ZUhlaWdodCgpO1xuICAgICAgICBsZXQgc3ByaXRlWEluUGl4ZWxzOiBudW1iZXIgPSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyAoc3ByaXRlV2lkdGggLyAyKSAtICh2aWV3cG9ydC5nZXRYKCkpO1xuICAgICAgICBsZXQgc3ByaXRlWUluUGl4ZWxzOiBudW1iZXIgPSBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgKyAoc3ByaXRlSGVpZ2h0IC8gMikgKyAodmlld3BvcnQuZ2V0WSgpKTtcbiAgICAgICAgLy8gaWYoc3ByaXRlLmdldElnbm9yZVZpZXdwb3J0KCkgPT0gZmFsc2Upe1xuICAgICAgICAvLyAgICAgc3ByaXRlWEluUGl4ZWxzIC09IHZpZXdwb3J0LmdldFgoKTtcbiAgICAgICAgLy8gICAgIHNwcml0ZVlJblBpeGVscyArPSB2aWV3cG9ydC5nZXRZKCk7XG4gICAgICAgIC8vIH1cbiAgICAgICAgbGV0IHNwcml0ZVhUcmFuc2xhdGU6IG51bWJlciA9IChzcHJpdGVYSW5QaXhlbHMgLSAoY2FudmFzV2lkdGggLyAyKSkgLyAoY2FudmFzV2lkdGggLyAyKTtcbiAgICAgICAgbGV0IHNwcml0ZVlUcmFuc2xhdGU6IG51bWJlciA9IChzcHJpdGVZSW5QaXhlbHMgLSAoY2FudmFzSGVpZ2h0IC8gMikpIC8gKGNhbnZhc0hlaWdodCAvIDIpO1xuICAgICAgICB0aGlzLm1lc2hUcmFuc2xhdGUuc2V0WChzcHJpdGVYVHJhbnNsYXRlKTtcbiAgICAgICAgdGhpcy5tZXNoVHJhbnNsYXRlLnNldFkoLXNwcml0ZVlUcmFuc2xhdGUpO1xuXG5cblxuICAgICAgICB2YXIgdGVtcFJvdGF0aW9uOiBudW1iZXIgPSBzcHJpdGUuZ2V0RGlyZWN0aW9uKCk7XG4gICAgICAgIHZhciByb3RhdGlvbkRlZ3JlZXM6IG51bWJlciA9IHRlbXBSb3RhdGlvbiAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgdmFyIHJvdGF0aW9uU2luOiBudW1iZXIgPSBNYXRoLnNpbihyb3RhdGlvbkRlZ3JlZXMpO1xuICAgICAgICB2YXIgcm90YXRpb25Db3M6IG51bWJlciA9IE1hdGguY29zKHJvdGF0aW9uRGVncmVlcyk7XG5cblxuICAgICAgICAvLyBDQUxDVUxBVEUgSE9XIE1VQ0ggVE8gU0NBTEUgVEhFIFFVQUQgUEVSIFRIRSBTUFJJVEUgU0laRVxuICAgICAgICBsZXQgZGVmYXVsdFdpZHRoOiBudW1iZXIgPSBjYW52YXNXaWR0aDtcbiAgICAgICAgbGV0IGRlZmF1bHRIZWlnaHQ6IG51bWJlciA9IGNhbnZhc0hlaWdodDtcbiAgICAgICAgbGV0IHNjYWxlWDogbnVtYmVyID0gMiAqIHNwcml0ZVdpZHRoIC8gZGVmYXVsdFdpZHRoO1xuICAgICAgICBsZXQgc2NhbGVZOiBudW1iZXIgPSAyICogc3ByaXRlSGVpZ2h0IC8gZGVmYXVsdEhlaWdodDtcbiAgICAgICAgbGV0IGZsaXBBbmdsZVdpZHRoID0gTWF0aC5hdGFuKGRlZmF1bHRXaWR0aCAvIGRlZmF1bHRIZWlnaHQpICogKDE4MCAvIE1hdGguUEkpO1xuICAgICAgICBsZXQgZmlscEFuZ2xlSGVpZ2h0ID0gTWF0aC5hdGFuKGRlZmF1bHRIZWlnaHQgLyBkZWZhdWx0V2lkdGgpICogKDE4MCAvIE1hdGguUEkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmbGlwQW5nbGUpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWxwQW5nbGUyKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGVmYXVsdEhlaWdodCk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRlZmF1bHRXaWR0aCk7XG4gICAgICAgIC8vIGxldCBzY2FsZVg6IG51bWJlcjtcbiAgICAgICAgLy8gbGV0IHNjYWxlWTogbnVtYmVyO1xuXG5cblxuICAgICAgICAvLyBsZXQgb3RoZXJSb3RhdGlvbjogbnVtYmVyID0gdGVtcFJvdGF0aW9uO1xuICAgICAgICAvLyAvLyBpZiAodGVtcFJvdGF0aW9uID4gMTgwKSB7XG4gICAgICAgIC8vIC8vICAgICBvdGhlclJvdGF0aW9uIC09IDE4MDtcbiAgICAgICAgLy8gLy8gfVxuXG4gICAgICAgIC8vIDx0ZXN0aW5nPlxuICAgICAgICAvLyByb3RhdGlvbkRlZ3JlZXMgJT0gOTA7XG5cbiAgICAgICAgLy8gaWYgKHJvdGF0aW9uRGVncmVlcyA8PSBmbGlwQW5nbGVXaWR0aCkge1xuICAgICAgICAvLyAgICAgc2NhbGVYID0gMiAqIHNwcml0ZVdpZHRoIC8gKDIgKiAoKGRlZmF1bHRXaWR0aCAvIDIpIC8gTWF0aC5jb3Mocm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgc2NhbGVYID0gMiAqIHNwcml0ZVdpZHRoIC8gKDIgKiAoKGRlZmF1bHRIZWlnaHQgLyAyKSAvIE1hdGguY29zKDkwIC0gcm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy8gaWYgKHJvdGF0aW9uRGVncmVlcyA8PSBmaWxwQW5nbGVIZWlnaHQpIHtcbiAgICAgICAgLy8gICAgIHNjYWxlWSA9IDIgKiBzcHJpdGVIZWlnaHQgLyAoMiAqICgoZGVmYXVsdEhlaWdodCAvIDIpIC8gTWF0aC5jb3Mocm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgc2NhbGVZID0gMiAqIHNwcml0ZVdpZHRoIC8gKDIgKiAoKGRlZmF1bHRXaWR0aCAvIDIpIC8gTWF0aC5jb3MoOTAgLSByb3RhdGlvbkRlZ3JlZXMpKSlcbiAgICAgICAgLy8gfVxuXG4gICAgICAgIC8vIHRoaXMubWVzaFNjYWxlLnNldChzY2FsZVgsIHNjYWxlWSwgMC4wLCAwLjApO1xuICAgICAgICAvLyA8L1Rlc3Rpbmc+XG5cbiAgICAgICAgLy8gaWYgKG90aGVyUm90YXRpb24gPj0gMCAmJiBvdGhlclJvdGF0aW9uIDw9IGZsaXBBbmdsZSkge1xuICAgICAgICAvLyAgICAgc2NhbGVYID0gMiAqIHNwcml0ZVdpZHRoIC8gKDIgKiAoKGRlZmF1bHRXaWR0aCAvIDIpIC8gTWF0aC5jb3Mocm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyAgICAgc2NhbGVZID0gMiAqIHNwcml0ZUhlaWdodCAvICgyICogKChkZWZhdWx0SGVpZ2h0IC8gMikgLyBNYXRoLmNvcyhyb3RhdGlvbkRlZ3JlZXMpKSk7XG4gICAgICAgIC8vIH0gZWxzZSBpZiAob3RoZXJSb3RhdGlvbiA+IGZsaXBBbmdsZSAmJiBvdGhlclJvdGF0aW9uIDwgOTApIHtcbiAgICAgICAgLy8gICAgIHNjYWxlWSA9IDIgKiBzcHJpdGVXaWR0aCAvICgyICogKChkZWZhdWx0SGVpZ2h0IC8gMikgLyBNYXRoLmNvcygoTWF0aC5QSSAvIDIpIC0gcm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyAgICAgc2NhbGVYID0gMiAqIHNwcml0ZUhlaWdodCAvICgyICogKChkZWZhdWx0SGVpZ2h0IC8gMikgLyBNYXRoLmNvcyhyb3RhdGlvbkRlZ3JlZXMpKSk7XG4gICAgICAgIC8vIH0gZWxzZSBpZiAob3RoZXJSb3RhdGlvbiA+PSA5MCAmJiBvdGhlclJvdGF0aW9uIDw9IGZpbHBBbmdsZTIgKyA5MCkge1xuICAgICAgICAvLyAgICAgc2NhbGVZID0gMiAqIHNwcml0ZVdpZHRoIC8gKDIgKiAoKGRlZmF1bHRIZWlnaHQgLyAyKSAvIE1hdGguY29zKChNYXRoLlBJKSAtIHJvdGF0aW9uRGVncmVlcykpKTtcbiAgICAgICAgLy8gICAgIHNjYWxlWCA9IDIgKiBzcHJpdGVIZWlnaHQgLyAoMiAqICgoZGVmYXVsdEhlaWdodCAvIDIpIC8gTWF0aC5jb3MoKE1hdGguUEkgLyAyKSAtIChNYXRoLlBJKSAtIHJvdGF0aW9uRGVncmVlcykpKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICAgIHNjYWxlWCA9IDIgKiBzcHJpdGVXaWR0aCAvICgyICogKChkZWZhdWx0V2lkdGggLyAyKSAvIE1hdGguY29zKChNYXRoLlBJKSAtIHJvdGF0aW9uRGVncmVlcykpKTtcbiAgICAgICAgLy8gICAgIHNjYWxlWSA9IDIgKiBzcHJpdGVIZWlnaHQgLyAoMiAqICgoZGVmYXVsdEhlaWdodCAvIDIpIC8gTWF0aC5jb3MoKE1hdGguUEkpIC0gcm90YXRpb25EZWdyZWVzKSkpO1xuICAgICAgICAvLyB9XG5cblxuICAgICAgICB0aGlzLm1lc2hTY2FsZS5zZXQoTWF0aC5hYnMocm90YXRpb25Db3MgKiBzY2FsZVgpICsgTWF0aC5hYnMocm90YXRpb25TaW4gKiBzY2FsZVkpLCBNYXRoLmFicyhyb3RhdGlvbkNvcyAqIHNjYWxlWSkgKyBNYXRoLmFicyhyb3RhdGlvblNpbiAqIHNjYWxlWCksIDAuMCwgMC4wKTtcblxuICAgICAgICB0aGlzLm1lc2hSb3RhdGUuc2V0KDAuMCwgMC4wLCB0ZW1wUm90YXRpb24gKiAwLjAxNzQ1MzMsIDAuMCk7IC8vIHJvdGF0ZSBvbiB6IGF4aXNcblxuXG4gICAgICAgIC8vIEB0b2RvIC0gQ09NQklORSBUSElTIFdJVEggVEhFIFJPVEFURSBBTkQgU0NBTEUgVkFMVUVTIEZST00gVEhFIFNQUklURVxuICAgICAgICBNYXRoVXRpbGl0aWVzLmlkZW50aXR5KHRoaXMubWVzaFRyYW5zZm9ybSk7XG4gICAgICAgIE1hdGhVdGlsaXRpZXMubW9kZWwodGhpcy5tZXNoVHJhbnNmb3JtLCB0aGlzLm1lc2hUcmFuc2xhdGUsIHRoaXMubWVzaFJvdGF0ZSwgdGhpcy5tZXNoU2NhbGUpO1xuXG4gICAgICAgIC8vIEZJR1VSRSBPVVQgVEhFIFRFWFRVUkUgQ09PUkRJTkFURSBGQUNUT1IgQU5EIFNISUZUXG4gICAgICAgIGxldCB0ZXhDb29yZEZhY3Rvclg6IG51bWJlciA9IHNwcml0ZVdpZHRoIC8gdGV4dHVyZS53aWR0aDtcbiAgICAgICAgbGV0IHRleENvb3JkRmFjdG9yWTogbnVtYmVyID0gc3ByaXRlSGVpZ2h0IC8gdGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgIGxldCBzcHJpdGVMZWZ0OiBudW1iZXIgPSBzcHJpdGUuZ2V0TGVmdCgpO1xuICAgICAgICBsZXQgc3ByaXRlVG9wOiBudW1iZXIgPSBzcHJpdGUuZ2V0VG9wKCk7XG4gICAgICAgIGxldCB0ZXhDb29yZFNoaWZ0WDogbnVtYmVyID0gc3ByaXRlTGVmdCAvIHRleHR1cmUud2lkdGg7XG4gICAgICAgIGxldCB0ZXhDb29yZFNoaWZ0WTogbnVtYmVyID0gc3ByaXRlVG9wIC8gdGV4dHVyZS5oZWlnaHQ7XG5cbiAgICAgICAgLy8gVVNFIFRIRSBBVFRSSUJVVEVTXG4gICAgICAgIHdlYkdMLmJpbmRCdWZmZXIod2ViR0wuQVJSQVlfQlVGRkVSLCB0aGlzLnZlcnRleERhdGFCdWZmZXIpO1xuICAgICAgICB3ZWJHTC5iaW5kVGV4dHVyZSh3ZWJHTC5URVhUVVJFXzJELCB0ZXh0dXJlLndlYkdMVGV4dHVyZSk7XG5cbiAgICAgICAgLy8gSE9PSyBVUCBUSEUgQVRUUklCVVRFU1xuICAgICAgICBsZXQgYV9Qb3NpdGlvbkxvY2F0aW9uOiBHTHVpbnQgPSB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zLmdldCh0aGlzLkFfUE9TSVRJT04pO1xuICAgICAgICB3ZWJHTC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGFfUG9zaXRpb25Mb2NhdGlvbiwgdGhpcy5GTE9BVFNfUEVSX1RFWFRVUkVfQ09PUkRJTkFURSwgd2ViR0wuRkxPQVQsIGZhbHNlLCB0aGlzLlRPVEFMX0JZVEVTLCB0aGlzLlZFUlRFWF9QT1NJVElPTl9PRkZTRVQpO1xuICAgICAgICB3ZWJHTC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShhX1Bvc2l0aW9uTG9jYXRpb24pO1xuICAgICAgICBsZXQgYV9UZXhDb29yZExvY2F0aW9uOiBHTHVpbnQgPSB0aGlzLndlYkdMQXR0cmlidXRlTG9jYXRpb25zLmdldCh0aGlzLkFfVEVYX0NPT1JEKTtcbiAgICAgICAgd2ViR0wudmVydGV4QXR0cmliUG9pbnRlcihhX1RleENvb3JkTG9jYXRpb24sIHRoaXMuRkxPQVRTX1BFUl9URVhUVVJFX0NPT1JESU5BVEUsIHdlYkdMLkZMT0FULCBmYWxzZSwgdGhpcy5UT1RBTF9CWVRFUywgdGhpcy5URVhUVVJFX0NPT1JESU5BVEVfT0ZGU0VUKTtcbiAgICAgICAgd2ViR0wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYV9UZXhDb29yZExvY2F0aW9uKTtcblxuICAgICAgICAvLyBVU0UgVEhFIFVOSUZPUk1TXG4gICAgICAgIGxldCB1X01lc2hUcmFuc2Zvcm1Mb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9ucy5nZXQodGhpcy5VX01FU0hfVFJBTlNGT1JNKTtcbiAgICAgICAgd2ViR0wudW5pZm9ybU1hdHJpeDRmdih1X01lc2hUcmFuc2Zvcm1Mb2NhdGlvbiwgZmFsc2UsIHRoaXMubWVzaFRyYW5zZm9ybS5nZXREYXRhKCkpO1xuXG4gICAgICAgIGxldCB1X1NhbXBsZXJMb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9ucy5nZXQodGhpcy5VX1NBTVBMRVIpO1xuICAgICAgICB3ZWJHTC51bmlmb3JtMWkodV9TYW1wbGVyTG9jYXRpb24sIHRleHR1cmUud2ViR0xUZXh0dXJlSWQpO1xuXG4gICAgICAgIGxldCB1X1RleENvb3JkRmFjdG9yTG9jYXRpb246IFdlYkdMVW5pZm9ybUxvY2F0aW9uID0gdGhpcy53ZWJHTFVuaWZvcm1Mb2NhdGlvbnMuZ2V0KHRoaXMuVV9URVhfQ09PUkRfRkFDVE9SKTtcbiAgICAgICAgd2ViR0wudW5pZm9ybTJmKHVfVGV4Q29vcmRGYWN0b3JMb2NhdGlvbiwgdGV4Q29vcmRGYWN0b3JYLCB0ZXhDb29yZEZhY3RvclkpO1xuXG4gICAgICAgIGxldCB1X1RleENvb3JkU2hpZnRMb2NhdGlvbjogV2ViR0xVbmlmb3JtTG9jYXRpb24gPSB0aGlzLndlYkdMVW5pZm9ybUxvY2F0aW9ucy5nZXQodGhpcy5VX1RFWF9DT09SRF9TSElGVCk7XG4gICAgICAgIHdlYkdMLnVuaWZvcm0yZih1X1RleENvb3JkU2hpZnRMb2NhdGlvbiwgdGV4Q29vcmRTaGlmdFgsIHRleENvb3JkU2hpZnRZKTtcblxuICAgICAgICAvLyBSb3RhdGlvblxuICAgICAgICAvLyBsZXQgdV9Sb3RhdGlvbkxvY2F0aW9uOiBXZWJHTFVuaWZvcm1Mb2NhdGlvbiA9IHRoaXMud2ViR0xBdHRyaWJ1dGVMb2NhdGlvbnMuZ2V0KHRoaXMuVV9ST1RBVElPTik7XG4gICAgICAgIC8vIHdlYkdMLnVuaWZvcm0yZnYodV9Sb3RhdGlvbkxvY2F0aW9uLCByb3RhdGlvbik7XG5cblxuICAgICAgICAvLyBEUkFXIFRIRSBTUFJJVEUgQVMgQSBUUklBTkdMRSBTVFJJUCBVU0lORyA0IFZFUlRJQ0VTLCBTVEFSVElORyBBVCBUSEUgU1RBUlQgT0YgVEhFIEFSUkFZIChpbmRleCAwKVxuICAgICAgICB3ZWJHTC5kcmF3QXJyYXlzKHdlYkdMLlRSSUFOR0xFX1NUUklQLCB0aGlzLklOREVYX09GX0ZJUlNUX1ZFUlRFWCwgdGhpcy5OVU1fVkVSVElDRVMpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgV2ViR0xHYW1lVGV4dHVyZSB7XG4gICAgcHVibGljIHdlYkdMVGV4dHVyZUlkOiBudW1iZXI7XG4gICAgcHVibGljIHdlYkdMVGV4dHVyZTogV2ViR0xUZXh0dXJlO1xuICAgIHB1YmxpYyBpbWFnZTogSFRNTEltYWdlRWxlbWVudDtcbiAgICBwdWJsaWMgd2lkdGggOiBudW1iZXI7XG4gICAgcHVibGljIGhlaWdodCA6IG51bWJlcjtcbn0iLCJpbXBvcnQgeyBNYXRoVXRpbGl0aWVzIH0gZnJvbSBcIi4uL21hdGgvTWF0aFV0aWxpdGllc1wiXG5pbXBvcnQgeyBUaWxlZExheWVyIH0gZnJvbSBcIi4uL3NjZW5lL3RpbGVzL1RpbGVkTGF5ZXJcIlxuaW1wb3J0IHsgVGlsZVNldCB9IGZyb20gXCIuLi9zY2VuZS90aWxlcy9UaWxlU2V0XCJcbmltcG9ydCB7IFdlYkdMR2FtZVJlbmRlcmluZ0NvbXBvbmVudCB9IGZyb20gJy4vV2ViR0xHYW1lUmVuZGVyaW5nQ29tcG9uZW50J1xuaW1wb3J0IHsgV2ViR0xHYW1lVGV4dHVyZSB9IGZyb20gJy4vV2ViR0xHYW1lVGV4dHVyZSdcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi4vc2NlbmUvVmlld3BvcnQnXG5cbmV4cG9ydCBjbGFzcyBXZWJHTEdhbWVUaWxlZExheWVyUmVuZGVyZXIgZXh0ZW5kcyBXZWJHTEdhbWVSZW5kZXJpbmdDb21wb25lbnQge1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGdlbmVyYXRlcyB0aGUgYXJyYXkgb2YgYXR0cmlidXRlIGRhdGEgbmVlZGVkIHRvIFxuICAgICAqIHJlbmRlciBvdXIgVGlsZWRMYXllciBhbmQgcHV0cyBpdCBpbiB0aGUgdGlsZWQgbGF5ZXIgYXJndW1lbnQuXG4gICAgICovXG4gICAgcHVibGljIGdlbmVyYXRlVmVydGV4RGF0YSh0aWxlZExheWVyOiBUaWxlZExheWVyKTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgbGV0IHNvbWVOdW1iZXJZb3VIYXZlVG9EZXRlcm1pbmUgOiBudW1iZXIgPSA0O1xuICAgICAgICBsZXQgZGF0YVRvRmlsbCA9IFtzb21lTnVtYmVyWW91SGF2ZVRvRGV0ZXJtaW5lXTtcbiAgICAgICAgbGV0IHZlcnRleERhdGE6IEZsb2F0MzJBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YVRvRmlsbCk7XG4gICAgICAgIHJldHVybiB2ZXJ0ZXhEYXRhO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRWZXJ0ZXhEYXRhKHJlbmRlclNldHVwRGF0YTogb2JqZWN0KTogRmxvYXQzMkFycmF5IHtcbiAgICAgICAgLy8gV0UgV0lMTCBORUVEIFRISVMgVE8gS05PVyBIT1cgTEFSR0UgVE8gTUFLRSBPVVIgVkVSVEVYIERBVEEgQlVGRkVSXG4gICAgICAgIGxldCB0aWxlZExheWVyczogQXJyYXk8VGlsZWRMYXllcj4gPSA8QXJyYXk8VGlsZWRMYXllcj4+cmVuZGVyU2V0dXBEYXRhO1xuICAgICAgICBsZXQgdGlsZWRMYXllcjogVGlsZWRMYXllciA9IHRpbGVkTGF5ZXJzWzBdO1xuICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVZlcnRleERhdGEodGlsZWRMYXllcik7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNoYWRlckF0dHJpYnV0ZU5hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgLy8gWU9VJ0xMIE5FRUQgVE8gREVGSU5FIFRISVMgTUVUSE9EXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U2hhZGVyVW5pZm9ybU5hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICAgICAgLy8gWU9VJ0xMIE5FRUQgVE8gREVGSU5FIFRISVMgTUVUSE9EXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCAgd2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgdmlld3BvcnQgOiBWaWV3cG9ydCxcbiAgICAgICAgICAgICAgICAgICAgdGlsZWRMYXllcnM6IEFycmF5PFRpbGVkTGF5ZXI+KTogdm9pZCB7XG5cbiAgICAgICAgICAgIC8vIFNFTEVDVCBUSEUgQU5JTUFURUQgU1BSSVRFIFJFTkRFUklORyBTSEFERVIgUFJPR1JBTSBGT1IgVVNFXG4gICAgICAgIGxldCBzaGFkZXJQcm9ncmFtVG9Vc2UgPSB0aGlzLnNoYWRlci5nZXRQcm9ncmFtKCk7XG4gICAgICAgIHdlYkdMLnVzZVByb2dyYW0oc2hhZGVyUHJvZ3JhbVRvVXNlKTtcblxuICAgICAgICAvLyBBTkQgVEhFTiBSRU5ERVIgRUFDSCBMQVlFUlxuICAgICAgICBmb3IgKGxldCB0aWxlZExheWVyIG9mIHRpbGVkTGF5ZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclRpbGVkTGF5ZXIod2ViR0wsIHZpZXdwb3J0LCB0aWxlZExheWVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyVGlsZWRMYXllcihcbiAgICAgICAgd2ViR0w6IFdlYkdMUmVuZGVyaW5nQ29udGV4dCxcbiAgICAgICAgdmlld3BvcnQgOiBWaWV3cG9ydCxcbiAgICAgICAgdGlsZWRMYXllcjogVGlsZWRMYXllcikge1xuICAgICAgICAgICAgLy8gWU9VJ0xMIE5FRUQgVE8gREVGSU5FIFRISVMgTUVUSE9EXG4gICAgfVxufSIsImltcG9ydCB7IFNjZW5lT2JqZWN0IH0gZnJvbSAnLi9TY2VuZU9iamVjdCdcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSAnLi9zcHJpdGUvQW5pbWF0ZWRTcHJpdGUnXG5pbXBvcnQgeyBUaWxlZExheWVyIH0gZnJvbSAnLi90aWxlcy9UaWxlZExheWVyJ1xuaW1wb3J0IHsgVGlsZVNldCB9IGZyb20gJy4vdGlsZXMvVGlsZVNldCdcbmltcG9ydCB7IFZpZXdwb3J0IH0gZnJvbSAnLi9WaWV3cG9ydCdcbmltcG9ydCB7IEdhbWVQaHlzaWNzIH0gZnJvbSAnLi4vcGh5c2ljcy9HYW1lUGh5c2ljcyc7XG5cbmV4cG9ydCBjbGFzcyBTY2VuZUdyYXBoIHtcbiAgICAvLyBBTkQgQUxMIE9GIFRIRSBBTklNQVRFRCBTUFJJVEVTLCBXSElDSCBBUkUgTk9UIFNUT1JFRFxuICAgIC8vIFNPUlRFRCBPUiBJTiBBTlkgUEFSVElDVUxBUiBPUkRFUi4gTk9URSBUSEFUIEFOSU1BVEVEIFNQUklURVNcbiAgICAvLyBBUkUgU0NFTkUgT0JKRUNUU1xuICAgIHByaXZhdGUgYW5pbWF0ZWRTcHJpdGVzOiBBcnJheTxBbmltYXRlZFNwcml0ZT47XG5cbiAgICAvLyBTRVQgT0YgVklTSUJMRSBPQkpFQ1RTLCBOT1RFIFRIQVQgQVQgVEhFIE1PTUVOVCBPVVJcbiAgICAvLyBTQ0VORSBHUkFQSCBJUyBRVUlURSBTSU1QTEUsIFNPIFRISVMgSVMgVEhFIFNBTUUgQVNcbiAgICAvLyBPVVIgTElTVCBPRiBBTklNQVRFRCBTUFJJVEVTXG4gICAgcHJpdmF0ZSB2aXNpYmxlU2V0OiBBcnJheTxTY2VuZU9iamVjdD47XG5cbiAgICAvLyBXRSBBUkUgQUxTTyBVU0lORyBBIFRJTElORyBFTkdJTkUgRk9SIFJFTkRFUklORyBPVVIgTEVWRUxcbiAgICAvLyBOT1RFIFRIQVQgV0UgTUFOQUdFIFRISVMgSEVSRSBCRUNBVVNFIFdFIE1BWSBJTlZPTFZFIFRIRSBUSUxFRFxuICAgIC8vIExBWUVSUyBJTiBQSFlTSUNTIEFORCBQQVRIRklORElORyBBUyBXRUxMXG4gICAgcHJpdmF0ZSB0aWxlZExheWVyczogQXJyYXk8VGlsZWRMYXllcj47XG4gICAgcHJpdmF0ZSB0aWxlU2V0czogQXJyYXk8VGlsZVNldD47XG5cbiAgICAvLyBUSEUgVklFV1BPUlQgSVMgVVNFRCBUTyBGSUxURVIgT1VUIFdIQVQgSVMgTk9UIFZJU0lCTEVcbiAgICBwcml2YXRlIHZpZXdwb3J0OiBWaWV3cG9ydDtcblxuXG4gICAgcHJpdmF0ZSBwbGF5ZXI6IEFuaW1hdGVkU3ByaXRlO1xuXG4gICAgcHJpdmF0ZSBtb3VzZTogbnVtYmVyW10gPSBbMCwgMF07XG5cblxuICAgIHByaXZhdGUgcGh5c2ljc1N5c3RlbTogR2FtZVBoeXNpY3MgPSBuZXcgR2FtZVBoeXNpY3MoKTtcblxuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBERUZBVUxUIENPTlNUUlVDVE9SIElOSVRJQUxJWkVTIE9VUiBEQVRBIFNUUlVDVFVSRVNcbiAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjbGVhcigpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5hbmltYXRlZFNwcml0ZXMgPSBbXTtcbiAgICAgICAgdGhpcy52aXNpYmxlU2V0ID0gW107XG4gICAgICAgIHRoaXMudGlsZWRMYXllcnMgPSBbXTtcbiAgICAgICAgdGhpcy50aWxlU2V0cyA9IFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRNb3VzZSh4OiBudW1iZXIsIHk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLm1vdXNlWzBdID0geDtcbiAgICAgICAgdGhpcy5tb3VzZVsxXSA9IHlcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TW91c2UoKTogbnVtYmVyW10ge1xuICAgICAgICByZXR1cm4gdGhpcy5tb3VzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UGxheWVyKHNwcml0ZTogQW5pbWF0ZWRTcHJpdGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5wbGF5ZXIgPSBzcHJpdGU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBsYXllcigpOiBBbmltYXRlZFNwcml0ZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsYXllcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVGlsZVNldCh0aWxlU2V0VG9BZGQ6IFRpbGVTZXQpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2V0cy5wdXNoKHRpbGVTZXRUb0FkZCkgLSAxO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROdW1UaWxlU2V0cygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2V0cy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVTZXQoaW5kZXg6IG51bWJlcik6IFRpbGVTZXQge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2V0c1tpbmRleF07XG4gICAgfVxuXG4gICAgcHVibGljIGFkZExheWVyKGxheWVyVG9BZGQ6IFRpbGVkTGF5ZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy50aWxlZExheWVycy5wdXNoKGxheWVyVG9BZGQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROdW1UaWxlZExheWVycygpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlZExheWVycy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVkTGF5ZXJzKCk6IEFycmF5PFRpbGVkTGF5ZXI+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZWRMYXllcnM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVkTGF5ZXIobGF5ZXJJbmRleDogbnVtYmVyKTogVGlsZWRMYXllciB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbGVkTGF5ZXJzW2xheWVySW5kZXhdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXROdW1TcHJpdGVzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGVkU3ByaXRlcy5sZW5ndGg7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFZpZXdwb3J0KGluaXRWaWV3cG9ydDogVmlld3BvcnQpOiB2b2lkIHtcbiAgICAgICAgdGhpcy52aWV3cG9ydCA9IGluaXRWaWV3cG9ydDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Vmlld3BvcnQoKTogVmlld3BvcnQge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3cG9ydDtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQW5pbWF0ZWRTcHJpdGUoc3ByaXRlOiBBbmltYXRlZFNwcml0ZSk6IHZvaWQge1xuICAgICAgICB0aGlzLmFuaW1hdGVkU3ByaXRlcy5wdXNoKHNwcml0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZUF0KHRlc3RYOiBudW1iZXIsIHRlc3RZOiBudW1iZXIpOiBBbmltYXRlZFNwcml0ZSB7XG4gICAgICAgIGZvciAobGV0IHNwcml0ZSBvZiB0aGlzLmFuaW1hdGVkU3ByaXRlcykge1xuICAgICAgICAgICAgaWYgKHNwcml0ZS5jb250YWlucyh0ZXN0WCwgdGVzdFkpKVxuICAgICAgICAgICAgICAgIHJldHVybiBzcHJpdGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogdXBkYXRlXG4gICAgICogXG4gICAgICogQ2FsbGVkIG9uY2UgcGVyIGZyYW1lLCB0aGlzIGZ1bmN0aW9uIHVwZGF0ZXMgdGhlIHN0YXRlIG9mIGFsbCB0aGUgb2JqZWN0c1xuICAgICAqIGluIHRoZSBzY2VuZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0gZGVsdGEgVGhlIHRpbWUgdGhhdCBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHRpbWUgdGhpcyB1cGRhdGVcbiAgICAgKiBmdW5jYXRpb24gd2FzIGNhbGxlZC5cbiAgICAgKi9cbiAgICBwdWJsaWMgdXBkYXRlKGRlbHRhOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5waHlzaWNzU3lzdGVtLnVwZGF0ZSh0aGlzKTtcbiAgICAgICAgZm9yIChsZXQgc3ByaXRlIG9mIHRoaXMuYW5pbWF0ZWRTcHJpdGVzKSB7XG4gICAgICAgICAgICBzcHJpdGUudXBkYXRlKGRlbHRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzY29wZSgpOiBBcnJheTxTY2VuZU9iamVjdD4ge1xuICAgICAgICAvLyBDTEVBUiBPVVQgVEhFIE9MRFxuICAgICAgICB0aGlzLnZpc2libGVTZXQgPSBbXTtcblxuICAgICAgICAvLyBQVVQgQUxMIFRIRSBTQ0VORSBPQkpFQ1RTIElOVE8gVEhFIFZJU0lCTEUgU0VUXG4gICAgICAgIGZvciAobGV0IHNwcml0ZSBvZiB0aGlzLmFuaW1hdGVkU3ByaXRlcykge1xuICAgICAgICAgICAgLy8gaWYgKHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSArIHNwcml0ZS5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKSA+PSB0aGlzLnZpZXdwb3J0LmdldFgoKSAmJiBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRYKCkgPD0gdGhpcy52aWV3cG9ydC5nZXRYKCkgKyB0aGlzLnZpZXdwb3J0LmdldFdpZHRoKCkpIHtcbiAgICAgICAgICAgIC8vICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpIC0gc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVIZWlnaHQoKSA8PSB0aGlzLnZpZXdwb3J0LmdldFkoKSAmJiBzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgPj0gdGhpcy52aWV3cG9ydC5nZXRZKCkgLSB0aGlzLnZpZXdwb3J0LmdldEhlaWdodCgpKSB7XG5cbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB0aGlzLnZpc2libGVTZXQucHVzaChzcHJpdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZVNldDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3ByaXRlc0luUmFuZ2UoeFBvczogbnVtYmVyLCB5UG9zOiBudW1iZXIsIHJhbmdlOiBudW1iZXIpOiBBbmltYXRlZFNwcml0ZVtdIHtcbiAgICAgICAgbGV0IHNwcml0ZXNJblJhbmdlOiBBbmltYXRlZFNwcml0ZVtdID0gW107XG5cbiAgICAgICAgZm9yIChsZXQgc3ByaXRlIG9mIHRoaXMuYW5pbWF0ZWRTcHJpdGVzKSB7XG4gICAgICAgICAgICBpZiAoc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpICsgc3ByaXRlLmdldFNwcml0ZVR5cGUoKS5nZXRTcHJpdGVXaWR0aCgpID49IHhQb3MgJiYgc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WCgpIDw9IHhQb3MgKyByYW5nZSkge1xuICAgICAgICAgICAgICAgIGlmIChzcHJpdGUuZ2V0UG9zaXRpb24oKS5nZXRZKCkgLSBzcHJpdGUuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZUhlaWdodCgpIDw9IHlQb3MgJiYgc3ByaXRlLmdldFBvc2l0aW9uKCkuZ2V0WSgpID49IHlQb3MgLSByYW5nZSkge1xuICAgICAgICAgICAgICAgICAgICBzcHJpdGVzSW5SYW5nZS5wdXNoKHNwcml0ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzcHJpdGVzSW5SYW5nZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgbnVtQWxpdmUoKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGNvdW50OiBudW1iZXIgPSAwO1xuICAgICAgICBmb3IgKGxldCBzcHJpdGUgb2YgdGhpcy5hbmltYXRlZFNwcml0ZXMpIHtcbiAgICAgICAgICAgIGlmICghc3ByaXRlLmlzRGVhZCgpKSB7XG4gICAgICAgICAgICAgICAgY291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY291bnQ7XG4gICAgfVxuXG5cbn0iLCJpbXBvcnQge1ZlY3RvcjN9IGZyb20gJy4uL21hdGgvVmVjdG9yMydcblxuLyoqXG4gKiBTY2VuZU9iamVjdFxuICogXG4gKiBBIFNjZW5lT2JqZWN0IGlzIHNvbWV0aGluZyB0aGF0IGNhbiBiZSBwbGFjZWQgaW50byB0aGUgc2NlbmUgZ3JhcGguIEl0IGhhc1xuICogYSBwb3NpdGlvbiwgcm90YXRpb24sIGFuZCBzY2FsZSBpbiB0aGUgZ2FtZSB3b3JsZC4gTm90ZSB0aGF0IGl0cyBwb3NpdGlvblxuICogaXMgdHlwaWNhbGx5IGl0cyBjZW50ZXJlZCBsb2NhdGlvbiwgc28gaWYgd2UncmUgdGFsa2luZyBhYm91dCBhIDJkIGJveCwgXG4gKiBpdCB3b3VsZCBiZSB0aGUgY2VudGVyIG9mIHRoYXQgYm94LlxuICovXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgU2NlbmVPYmplY3Qge1xuICAgIHByaXZhdGUgcG9zaXRpb24gOiBWZWN0b3IzO1xuICAgIHByaXZhdGUgcm90YXRpb24gOiBWZWN0b3IzO1xuICAgIHByaXZhdGUgc2NhbGUgOiBWZWN0b3IzO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgdGhpcy5yb3RhdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgVmVjdG9yMygpO1xuXG4gICAgICAgIC8vIENMRUFSIEFMTCBWQUxVRVNcbiAgICAgICAgdGhpcy5wb3NpdGlvbi5zZXQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcbiAgICAgICAgdGhpcy5yb3RhdGlvbi5zZXQoMC4wLCAwLjAsIDAuMCwgMS4wKTtcbiAgICAgICAgdGhpcy5zY2FsZS5zZXQoMS4wLCAxLjAsIDEuMCwgMS4wKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UG9zaXRpb24oKSA6IFZlY3RvcjMge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbjtcbiAgICB9ICAgIFxuXG4gICAgcHVibGljIGdldFJvdGF0aW9uKCkgOiBWZWN0b3IzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm90YXRpb247XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNjYWxlKCkgOiBWZWN0b3IzIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2NhbGU7XG4gICAgfVxuXG4gICAgcHVibGljIGFic3RyYWN0IGNvbnRhaW5zKHRlc3RYIDogbnVtYmVyLCB0ZXN0WSA6IG51bWJlcikgOiBib29sZWFuO1xufSIsImV4cG9ydCBjbGFzcyBWaWV3cG9ydCB7XG4gICAgcHJpdmF0ZSB3aWR0aCA6IG51bWJlcjtcbiAgICBwcml2YXRlIGhlaWdodCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHggOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB5IDogbnVtYmVyO1xuXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGluaXRXaWR0aCA6IG51bWJlciwgaW5pdEhlaWdodCA6IG51bWJlcikge1xuICAgICAgICB0aGlzLndpZHRoID0gaW5pdFdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGluaXRIZWlnaHQ7XG4gICAgICAgIHRoaXMueCA9IDA7XG4gICAgICAgIHRoaXMueSA9IDA7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFdpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy53aWR0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLng7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFkoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnk7XG4gICAgfVxuXG4gICAgcHVibGljIGluYyhpbmNYIDogbnVtYmVyLCBpbmNZIDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnggKz0gaW5jWDtcbiAgICAgICAgdGhpcy55ICs9IGluY1k7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFBvc2l0aW9uKGluaXRYIDogbnVtYmVyLCBpbml0WSA6IG51bWJlcikgOiB2b2lkIHtcbiAgICAgICAgdGhpcy54ID0gaW5pdFg7XG4gICAgICAgIHRoaXMueSA9IGluaXRZO1xuICAgIH1cblxuICAgIFxuXG59IiwiaW1wb3J0IHsgU2NlbmVPYmplY3QgfSBmcm9tICcuLi9TY2VuZU9iamVjdCdcbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlVHlwZSB9IGZyb20gJy4vQW5pbWF0ZWRTcHJpdGVUeXBlJ1xuaW1wb3J0IHsgQUlCZWhhdmlvciwgU3RhdGUgfSBmcm9tICcuLi8uLi9BSS9BSUJlaGF2aW9yJztcblxuZXhwb3J0IGNsYXNzIEFuaW1hdGVkU3ByaXRlIGV4dGVuZHMgU2NlbmVPYmplY3Qge1xuICAgIHByaXZhdGUgc3ByaXRlVHlwZTogQW5pbWF0ZWRTcHJpdGVUeXBlO1xuICAgIHByaXZhdGUgc3RhdGU6IHN0cmluZztcbiAgICBwcml2YXRlIGFuaW1hdGlvbkZyYW1lSW5kZXg6IG51bWJlcjtcbiAgICBwcml2YXRlIGZyYW1lQ291bnRlcjogbnVtYmVyO1xuICAgIHByaXZhdGUgZGlyZWN0aW9uOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBhaTogQUlCZWhhdmlvcjtcbiAgICBwdWJsaWMgaGFzQUk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGRlYWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBwcml2YXRlIGlnbm9yZVZpZXdwb3J0OiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoaW5pdFNwcml0ZVR5cGU6IEFuaW1hdGVkU3ByaXRlVHlwZSwgaW5pdFN0YXRlOiBzdHJpbmcpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zcHJpdGVUeXBlID0gaW5pdFNwcml0ZVR5cGU7XG5cbiAgICAgICAgLy8gU1RBUlQgUkVTRVRcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGluaXRTdGF0ZTtcbiAgICAgICAgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5mcmFtZUNvdW50ZXIgPSAwO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEFJKGFpOiBBSUJlaGF2aW9yKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYWkgPSBhaTtcbiAgICAgICAgdGhpcy5oYXNBSSA9IHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFJKCk6IEFJQmVoYXZpb3Ige1xuICAgICAgICByZXR1cm4gdGhpcy5haTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0SWdub3JlVmlld3BvcnQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuaWdub3JlVmlld3BvcnQgPSB0cnVlO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJZ25vcmVWaWV3cG9ydCgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaWdub3JlVmlld3BvcnQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldERpcmVjdGlvbigpOiBudW1iZXIge1xuICAgICAgICAvLyB0aGlzLmRpcmVjdGlvbiArPSAxO1xuICAgICAgICAvLyBpZiAodGhpcy5kaXJlY3Rpb24gPT0gMzYwKSB7XG4gICAgICAgIC8vICAgICB0aGlzLmRpcmVjdGlvbiA9IDA7XG4gICAgICAgIC8vIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHNldERpcmVjdGlvbihuZXdEaXJlY3Rpb246IG51bWJlcikge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IChuZXdEaXJlY3Rpb24gJSAzNjApO1xuXG4gICAgfVxuXG5cblxuICAgIHB1YmxpYyBnZXRBbmltYXRpb25GcmFtZUluZGV4KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbkZyYW1lSW5kZXg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZyYW1lQ291bnRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZUNvdW50ZXI7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVR5cGUoKTogQW5pbWF0ZWRTcHJpdGVUeXBlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlVHlwZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0U3RhdGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFN0YXRlKGluaXRTdGF0ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBpbml0U3RhdGU7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWVDb3VudGVyID0gMDtcbiAgICB9XG5cbiAgICBwdWJsaWMga2lsbCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kZWFkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNEZWFkKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFkO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGUoZGVsdGE6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLmZyYW1lQ291bnRlcisrO1xuXG4gICAgICAgIC8vIEhBVkUgV0UgR09ORSBQQVNUIFRIRSBMQVNUIEZSQU1FIElOIFRIRSBBTklNQVRJT04/XG4gICAgICAgIHZhciBjdXJyZW50QW5pbWF0aW9uID0gdGhpcy5zcHJpdGVUeXBlLmdldEFuaW1hdGlvbih0aGlzLnN0YXRlKTtcbiAgICAgICAgdmFyIGN1cnJlbnRGcmFtZSA9IGN1cnJlbnRBbmltYXRpb25bdGhpcy5hbmltYXRpb25GcmFtZUluZGV4XTtcbiAgICAgICAgaWYgKHRoaXMuZnJhbWVDb3VudGVyID4gKGN1cnJlbnRGcmFtZS5kdXJhdGlvbikpIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCsrO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA+PSBjdXJyZW50QW5pbWF0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uRnJhbWVJbmRleCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh0aGlzLnNwcml0ZVR5cGUuZ2V0TmV4dCh0aGlzLnN0YXRlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZyYW1lQ291bnRlciA9IDA7XG4gICAgICAgIH1cblxuXG4gICAgICAgIGlmICh0aGlzLmhhc0FJID09IHRydWUpIHtcbiAgICAgICAgICAgIHRoaXMuYWkudXBkYXRlKCk7XG4gICAgICAgICAgICB0aGlzLmFpLnJlc29sdmVTdGF0ZSh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjb250YWlucyhwb2ludFg6IG51bWJlciwgcG9pbnRZOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IHNwcml0ZVdpZHRoID0gdGhpcy5nZXRTcHJpdGVUeXBlKCkuZ2V0U3ByaXRlV2lkdGgoKTtcbiAgICAgICAgbGV0IHNwcml0ZUhlaWdodCA9IHRoaXMuZ2V0U3ByaXRlVHlwZSgpLmdldFNwcml0ZUhlaWdodCgpO1xuICAgICAgICBsZXQgc3ByaXRlTGVmdCA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRYKCk7XG4gICAgICAgIGxldCBzcHJpdGVSaWdodCA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyBzcHJpdGVXaWR0aDtcbiAgICAgICAgbGV0IHNwcml0ZVRvcCA9IHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRZKCk7XG4gICAgICAgIGxldCBzcHJpdGVCb3R0b20gPSB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgc3ByaXRlSGVpZ2h0O1xuICAgICAgICBpZiAoKHBvaW50WCA8IHNwcml0ZUxlZnQpXG4gICAgICAgICAgICB8fCAoc3ByaXRlUmlnaHQgPCBwb2ludFgpXG4gICAgICAgICAgICB8fCAocG9pbnRZIDwgc3ByaXRlVG9wKVxuICAgICAgICAgICAgfHwgKHNwcml0ZUJvdHRvbSA8IHBvaW50WSkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqUkVOQU1FIFRISVMgTUVUSE9EIFNPIElUIERFTk9URVMgUElYRUwgTE9DQVRJT04gSU4gVEVYVFVSRSAqL1xuICAgIHB1YmxpYyBnZXRMZWZ0KCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVR5cGUuZ2V0TGVmdCh0aGlzLnN0YXRlLCB0aGlzLmFuaW1hdGlvbkZyYW1lSW5kZXgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUb3AoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlVHlwZS5nZXRUb3AodGhpcy5zdGF0ZSwgdGhpcy5hbmltYXRpb25GcmFtZUluZGV4KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICAgICAgbGV0IHN1bW1hcnk6IHN0cmluZyA9IFwieyBwb3NpdGlvbjogKFwiXG4gICAgICAgICAgICArIHRoaXMuZ2V0UG9zaXRpb24oKS5nZXRYKCkgKyBcIiwgXCIgKyB0aGlzLmdldFBvc2l0aW9uKCkuZ2V0WSgpICsgXCIpIFwiXG4gICAgICAgICAgICArIFwiKHN0YXRlOiBcIiArIHRoaXMuZ2V0U3RhdGUoKSArIFwiKSBcIlxuICAgICAgICAgICAgKyBcIihhbmltYXRpb25GcmFtZUluZGV4OiBcIiArIHRoaXMuZ2V0QW5pbWF0aW9uRnJhbWVJbmRleCgpICsgXCIpIFwiXG4gICAgICAgICAgICArIFwiKGZyYW1lQ291bnRlcjogXCIgKyB0aGlzLmdldEZyYW1lQ291bnRlcigpICsgXCIpIFwiO1xuICAgICAgICByZXR1cm4gc3VtbWFyeTtcbiAgICB9XG5cblxuXG59IiwiaW1wb3J0IHsgV2ViR0xHYW1lVGV4dHVyZSB9IGZyb20gJy4uLy4uL3JlbmRlcmluZy9XZWJHTEdhbWVUZXh0dXJlJ1xuXG5leHBvcnQgY2xhc3MgQW5pbWF0aW9uRnJhbWUge1xuICAgIHB1YmxpYyBsZWZ0OiBudW1iZXI7XG4gICAgcHVibGljIHRvcDogbnVtYmVyO1xuICAgIHB1YmxpYyBkdXJhdGlvbjogbnVtYmVyO1xuXG4gICAgY29uc3RydWN0b3IoaW5pdExlZnQ6IG51bWJlciwgaW5pdFRvcDogbnVtYmVyLCBpbml0RHVyYXRpb246IG51bWJlcikge1xuICAgICAgICB0aGlzLmxlZnQgPSBpbml0TGVmdDtcbiAgICAgICAgdGhpcy50b3AgPSBpbml0VG9wO1xuICAgICAgICB0aGlzLmR1cmF0aW9uID0gaW5pdER1cmF0aW9uO1xuICAgIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFuaW1hdGVkU3ByaXRlVHlwZSB7XG4gICAgcHJpdmF0ZSBzcHJpdGVTaGVldFRleHR1cmU6IFdlYkdMR2FtZVRleHR1cmU7XG4gICAgcHJpdmF0ZSBhbmltYXRpb25zOiBNYXA8c3RyaW5nLCBBcnJheTxBbmltYXRpb25GcmFtZT4+O1xuICAgIHByaXZhdGUgbmV4dEFuaW1hdGlvbnM6IE1hcDxzdHJpbmcsIHN0cmluZz47XG4gICAgcHJpdmF0ZSBzcHJpdGVXaWR0aDogbnVtYmVyO1xuICAgIHByaXZhdGUgc3ByaXRlSGVpZ2h0OiBudW1iZXI7XG5cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoaW5pdFNwcml0ZVNoZWV0VGV4dHVyZTogV2ViR0xHYW1lVGV4dHVyZSxcbiAgICAgICAgaW5pdFNwcml0ZVdpZHRoOiBudW1iZXIsIGluaXRTcHJpdGVIZWlnaHQ6IG51bWJlcikge1xuICAgICAgICB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZSA9IGluaXRTcHJpdGVTaGVldFRleHR1cmU7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5uZXh0QW5pbWF0aW9ucyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5zcHJpdGVXaWR0aCA9IGluaXRTcHJpdGVXaWR0aDtcbiAgICAgICAgdGhpcy5zcHJpdGVIZWlnaHQgPSBpbml0U3ByaXRlSGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRBbmltYXRpb24oc3RhdGU6IHN0cmluZywgbmV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYW5pbWF0aW9ucy5zZXQoc3RhdGUsIG5ldyBBcnJheTxBbmltYXRpb25GcmFtZT4oKSk7XG4gICAgICAgIHRoaXMubmV4dEFuaW1hdGlvbnMuc2V0KHN0YXRlLCBuZXh0KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkQW5pbWF0aW9uRnJhbWUoc3RhdGU6IHN0cmluZywgaW5kZXg6IG51bWJlciwgZnJhbWVEdXJhdGlvbjogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIHZhciBjb2x1bW5zID0gdGhpcy5zcHJpdGVTaGVldFRleHR1cmUud2lkdGggLyB0aGlzLnNwcml0ZVdpZHRoO1xuICAgICAgICB2YXIgcm93cyA9IHRoaXMuc3ByaXRlU2hlZXRUZXh0dXJlLmhlaWdodCAvIHRoaXMuc3ByaXRlSGVpZ2h0O1xuICAgICAgICB2YXIgY29sID0gaW5kZXggJSBjb2x1bW5zO1xuICAgICAgICB2YXIgcm93ID0gTWF0aC5mbG9vcihpbmRleCAvIGNvbHVtbnMpO1xuICAgICAgICB2YXIgbGVmdCA9IGNvbCAqIHRoaXMuc3ByaXRlV2lkdGg7XG4gICAgICAgIHZhciB0b3AgPSByb3cgKiB0aGlzLnNwcml0ZUhlaWdodDtcbiAgICAgICAgdGhpcy5hbmltYXRpb25zLmdldChzdGF0ZSkucHVzaChuZXcgQW5pbWF0aW9uRnJhbWUobGVmdCwgdG9wLCBmcmFtZUR1cmF0aW9uKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFNwcml0ZVdpZHRoKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVdpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTcHJpdGVIZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3ByaXRlSGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRTcHJpdGVTaGVldFRleHR1cmUoKTogV2ViR0xHYW1lVGV4dHVyZSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNwcml0ZVNoZWV0VGV4dHVyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0QW5pbWF0aW9uKHN0YXRlOiBzdHJpbmcpOiBBcnJheTxBbmltYXRpb25GcmFtZT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25zLmdldChzdGF0ZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldExlZnQoc3RhdGU6IHN0cmluZywgZnJhbWVJbmRleDogbnVtYmVyKTogbnVtYmVyIHtcbiAgICAgICAgbGV0IGFuaW1hdGlvbkZyYW1lOiBBbmltYXRpb25GcmFtZSA9IHRoaXMuYW5pbWF0aW9ucy5nZXQoc3RhdGUpW2ZyYW1lSW5kZXhdO1xuICAgICAgICByZXR1cm4gYW5pbWF0aW9uRnJhbWUubGVmdDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VG9wKHN0YXRlOiBzdHJpbmcsIGZyYW1lSW5kZXg6IG51bWJlcik6IG51bWJlciB7XG4gICAgICAgIGxldCBhbmltYXRpb25GcmFtZTogQW5pbWF0aW9uRnJhbWUgPSB0aGlzLmFuaW1hdGlvbnMuZ2V0KHN0YXRlKVtmcmFtZUluZGV4XTtcbiAgICAgICAgcmV0dXJuIGFuaW1hdGlvbkZyYW1lLnRvcDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmV4dChzdGF0ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dEFuaW1hdGlvbnMuZ2V0KHN0YXRlKTtcbiAgICB9XG5cbn0iLCJpbXBvcnQgeyBXZWJHTEdhbWVUZXh0dXJlIH0gZnJvbSBcIi4uLy4uL3JlbmRlcmluZy9XZWJHTEdhbWVUZXh0dXJlXCI7XG5cbmV4cG9ydCBjbGFzcyBUaWxlU2V0IHtcbiAgICBwcml2YXRlIG5hbWUgOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBjb2x1bW5zIDogbnVtYmVyO1xuICAgIHByaXZhdGUgcm93cyA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRpbGVXaWR0aCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRpbGVIZWlnaHQgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSB0aWxlU3BhY2luZyA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRpbGVTaGVldFdpZHRoIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGlsZVNoZWV0SGVpZ2h0IDogbnVtYmVyO1xuICAgIHByaXZhdGUgZmlyc3RJbmRleCA6IG51bWJlcjtcbiAgICBwcml2YXRlIHRleHR1cmUgOiBXZWJHTEdhbWVUZXh0dXJlO1xuXG4gICAgY29uc3RydWN0b3IoaW5pdE5hbWUgOiBzdHJpbmcsIFxuICAgICAgICAgICAgICAgIGluaXRDb2x1bW5zIDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRSb3dzIDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRUaWxlV2lkdGggOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRpbGVIZWlnaHQgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRpbGVTcGFjaW5nIDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRUaWxlU2hlZXRXaWR0aCA6IG51bWJlcixcbiAgICAgICAgICAgICAgICBpbml0VGlsZVNoZWV0SGVpZ2h0IDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRGaXJzdEluZGV4IDogbnVtYmVyLFxuICAgICAgICAgICAgICAgIGluaXRUZXh0dXJlIDogV2ViR0xHYW1lVGV4dHVyZSkge1xuICAgICAgICB0aGlzLm5hbWUgPSBpbml0TmFtZTtcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gaW5pdENvbHVtbnM7XG4gICAgICAgIHRoaXMucm93cyA9IGluaXRSb3dzO1xuICAgICAgICB0aGlzLnRpbGVXaWR0aCA9IGluaXRUaWxlV2lkdGg7XG4gICAgICAgIHRoaXMudGlsZUhlaWdodCA9IGluaXRUaWxlSGVpZ2h0O1xuICAgICAgICB0aGlzLnRpbGVTcGFjaW5nID0gaW5pdFRpbGVTcGFjaW5nO1xuICAgICAgICB0aGlzLnRpbGVTaGVldFdpZHRoID0gaW5pdFRpbGVTaGVldFdpZHRoO1xuICAgICAgICB0aGlzLnRpbGVTaGVldEhlaWdodCA9IGluaXRUaWxlU2hlZXRIZWlnaHQ7XG4gICAgICAgIHRoaXMuZmlyc3RJbmRleCA9IGluaXRGaXJzdEluZGV4O1xuICAgICAgICB0aGlzLnRleHR1cmUgPSBpbml0VGV4dHVyZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TmFtZSgpIDogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q29sdW1ucygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1ucztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Um93cygpIDogbnVtYmVyIHsgXG4gICAgICAgIHJldHVybiB0aGlzLnJvd3M7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVXaWR0aCgpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVdpZHRoO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlSGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlSGVpZ2h0O1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlU3BhY2luZygpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNwYWNpbmc7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRpbGVTaGVldFdpZHRoKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2hlZXRXaWR0aDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZVNoZWV0SGVpZ2h0KCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlU2hlZXRIZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEZpcnN0SW5kZXgoKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpcnN0SW5kZXg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFRleHR1cmUoKSA6IFdlYkdMR2FtZVRleHR1cmUge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBUaWxlU2V0IH0gZnJvbSBcIi4vVGlsZVNldFwiO1xuXG5leHBvcnQgY2xhc3MgVGlsZWRMYXllciB7XG4gICAgcHJpdmF0ZSBjb2xsaWRhYmxlIDogYm9vbGVhbjtcbiAgICBwcml2YXRlIHRpbGVzIDogQXJyYXk8bnVtYmVyPjtcbiAgICBwcml2YXRlIGNvbHVtbnMgOiBudW1iZXI7XG4gICAgcHJpdmF0ZSByb3dzIDogbnVtYmVyO1xuICAgIHByaXZhdGUgdGlsZVNldCA6IFRpbGVTZXQ7XG4gICAgXG4gICAgLy8gV0UgV0lMTCBTVE9SRSBSRU5ERVJJTkctU1BFQ0lGSUMgREFUQSBIRVJFXG4gICAgcHJpdmF0ZSByZW5kZXJEYXRhIDogb2JqZWN0O1xuXG4gICAgY29uc3RydWN0b3IoaW5pdENvbHVtbnMgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFJvd3MgOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgaW5pdFRpbGVTZXQgOiBUaWxlU2V0KSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSBuZXcgQXJyYXkoKTtcbiAgICAgICAgdGhpcy5jb2x1bW5zID0gaW5pdENvbHVtbnM7XG4gICAgICAgIHRoaXMucm93cyA9IGluaXRSb3dzO1xuICAgICAgICB0aGlzLnRpbGVTZXQgPSBpbml0VGlsZVNldDtcbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0UmVuZGVyRGF0YShpbml0UmVuZGVyRGF0YSA6IG9iamVjdCkgOiB2b2lkIHtcbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhID0gaW5pdFJlbmRlckRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFJlbmRlckRhdGEoKSA6IG9iamVjdCB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlckRhdGE7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1pbmltdW1WaXNpYmxlQ29sdW1uKHZpZXdwb3J0TGVmdCA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHZpZXdwb3J0TGVmdCAvIHRoaXMudGlsZVNldC5nZXRUaWxlV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE1heGltdW1WaXNpYmxlQ29sdW1uKHZpZXdwb3J0UmlnaHQgOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuICh2aWV3cG9ydFJpZ2h0IC8gdGhpcy50aWxlU2V0LmdldFRpbGVXaWR0aCgpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0TWluaW11bVZpc2libGVSb3codmlld3BvcnRUb3AgOiBudW1iZXIpIDogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuICh2aWV3cG9ydFRvcCAvIHRoaXMudGlsZVNldC5nZXRUaWxlSGVpZ2h0KCkpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRNYXhpbXVtVmlzaWJsZVJvdyh2aWV3cG9ydEJvdHRvbSA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gKHZpZXdwb3J0Qm90dG9tIC8gdGhpcy50aWxlU2V0LmdldFRpbGVIZWlnaHQoKSk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldE51bUNlbGxzKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zICogdGhpcy5yb3dzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDb2x1bW5zKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRSb3dzKCkgOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3dzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlU2V0KCkgOiBUaWxlU2V0IHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZVNldDtcbiAgICB9XG5cbiAgICBwdWJsaWMgaXNDb2xsaWRhYmxlKCkgOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGlkYWJsZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVGlsZSh0aWxlU2V0Q2VsbEluZGV4IDogbnVtYmVyKSA6IHZvaWQge1xuICAgICAgICB0aGlzLnRpbGVzLnB1c2godGlsZVNldENlbGxJbmRleCk7XG4gICAgfVxuXG4gICAgcHVibGljIHNldFRpbGUoY29sdW1uIDogbnVtYmVyLCByb3cgOiBudW1iZXIsIHRpbGVTZXRDZWxsSW5kZXggOiBudW1iZXIpIHtcbiAgICAgICAgbGV0IHRpbGVJbmRleCA6IG51bWJlciA9IHRoaXMuZ2V0VGlsZUluZGV4KGNvbHVtbiwgcm93KTtcbiAgICAgICAgdGhpcy50aWxlc1t0aWxlSW5kZXhdID0gdGlsZVNldENlbGxJbmRleDtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZUluZGV4KGNvbHVtbiA6IG51bWJlciwgcm93IDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAocm93ICogdGhpcy5jb2x1bW5zKSArIGNvbHVtbjtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0VGlsZVNldENlbGxJbmRleChjb2x1bW4gOiBudW1iZXIsIHJvdyA6IG51bWJlcikgOiBudW1iZXIge1xuICAgICAgICBsZXQgdGlsZUluZGV4IDogbnVtYmVyID0gdGhpcy5nZXRUaWxlSW5kZXgoY29sdW1uLCByb3cpO1xuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1t0aWxlSW5kZXhdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRUaWxlKGNvbHVtbiA6IG51bWJlciwgcm93IDogbnVtYmVyKSA6IG51bWJlciB7XG4gICAgICAgIGxldCBpbmRleCA9IHRoaXMuZ2V0VGlsZUluZGV4KGNvbHVtbiwgcm93KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGlsZXNbaW5kZXhdO1xuICAgIH1cbn0iLCIvKlxuICogVGhpcyBwcm92aWRlcyByZXNwb25zZXMgdG8gVUkgaW5wdXQuXG4gKi9cbmltcG9ydCB7IEFuaW1hdGVkU3ByaXRlIH0gZnJvbSBcIi4uL3NjZW5lL3Nwcml0ZS9BbmltYXRlZFNwcml0ZVwiXG5pbXBvcnQgeyBTY2VuZUdyYXBoIH0gZnJvbSBcIi4uL3NjZW5lL1NjZW5lR3JhcGhcIlxuaW1wb3J0IHsgU3RhdGUgfSBmcm9tIFwiLi4vQUkvQUlCZWhhdmlvclwiO1xuXG5leHBvcnQgY2xhc3MgVUlDb250cm9sbGVyIHtcbiAgICBwcml2YXRlIHNwcml0ZVRvRHJhZzogQW5pbWF0ZWRTcHJpdGU7XG4gICAgcHJpdmF0ZSBzY2VuZTogU2NlbmVHcmFwaDtcbiAgICBwcml2YXRlIGRyYWdPZmZzZXRYOiBudW1iZXI7XG4gICAgcHJpdmF0ZSBkcmFnT2Zmc2V0WTogbnVtYmVyO1xuXG4gICAgcHJpdmF0ZSBrZXlzOiBzdHJpbmdbXTtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihjYW52YXNJZDogc3RyaW5nLCBpbml0U2NlbmU6IFNjZW5lR3JhcGgpIHtcbiAgICAgICAgdGhpcy5zcHJpdGVUb0RyYWcgPSBudWxsO1xuICAgICAgICB0aGlzLnNjZW5lID0gaW5pdFNjZW5lO1xuICAgICAgICB0aGlzLmRyYWdPZmZzZXRYID0gLTE7XG4gICAgICAgIHRoaXMuZHJhZ09mZnNldFkgPSAtMTtcblxuICAgICAgICB0aGlzLmtleXMgPSBbXTtcblxuICAgICAgICBsZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCA9IDxIVE1MQ2FudmFzRWxlbWVudD5kb2N1bWVudC5nZXRFbGVtZW50QnlJZChjYW52YXNJZCk7XG4gICAgICAgIGNhbnZhcy50YWJJbmRleCA9IDE7XG4gICAgICAgIC8vIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMubW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIC8vIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwibW91c2V1cFwiLCB0aGlzLm1vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgLy8gY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMua2V5YmFvcmRQcmVzcyk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwia2V5cHJlc3NcIiwgdGhpcy5rZXliYW9yZFByZXNzSGVsZCk7XG4gICAgICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLmtleWJhb3JkUHJlc3NEb3duKTtcbiAgICAgICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLmtleWJhb3JkUHJlc3NVcCk7XG4gICAgfVxuXG4gICAgLy8gcHVibGljIG1vdXNlRG93bkhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICAvLyAgICAgbGV0IG1vdXNlUHJlc3NYOiBudW1iZXIgPSBldmVudC5jbGllbnRYO1xuICAgIC8vICAgICBsZXQgbW91c2VQcmVzc1k6IG51bWJlciA9IGV2ZW50LmNsaWVudFk7XG4gICAgLy8gICAgIGxldCBzcHJpdGU6IEFuaW1hdGVkU3ByaXRlID0gdGhpcy5zY2VuZS5nZXRTcHJpdGVBdChtb3VzZVByZXNzWCwgbW91c2VQcmVzc1kpO1xuICAgIC8vICAgICBjb25zb2xlLmxvZyhcIm1vdXNlUHJlc3NYOiBcIiArIG1vdXNlUHJlc3NYKTtcbiAgICAvLyAgICAgY29uc29sZS5sb2coXCJtb3VzZVByZXNzWTogXCIgKyBtb3VzZVByZXNzWSk7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKFwic3ByaXRlOiBcIiArIHNwcml0ZSk7XG4gICAgLy8gICAgIGlmIChzcHJpdGUgIT0gbnVsbCkge1xuICAgIC8vICAgICAgICAgLy8gU1RBUlQgRFJBR0dJTkcgSVRcbiAgICAvLyAgICAgICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gc3ByaXRlO1xuICAgIC8vICAgICAgICAgdGhpcy5kcmFnT2Zmc2V0WCA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFgoKSAtIG1vdXNlUHJlc3NYO1xuICAgIC8vICAgICAgICAgdGhpcy5kcmFnT2Zmc2V0WSA9IHNwcml0ZS5nZXRQb3NpdGlvbigpLmdldFkoKSAtIG1vdXNlUHJlc3NZO1xuICAgIC8vICAgICB9XG4gICAgLy8gfVxuXG4gICAgcHVibGljIG1vdXNlTW92ZUhhbmRsZXIgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgbGV0IHBsYXllcjogQW5pbWF0ZWRTcHJpdGUgPSB0aGlzLnNjZW5lLmdldFBsYXllcigpO1xuXG4gICAgICAgIGlmIChwbGF5ZXIgPyBwbGF5ZXIuaGFzQUkgOiBmYWxzZSkge1xuICAgICAgICAgICAgcGxheWVyLmdldEFJKCkuc2V0QmVoYXZpb3IoW1N0YXRlLldBTEtdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjZW5lLnNldE1vdXNlKGV2ZW50LmNsaWVudFggKyB0aGlzLnNjZW5lLmdldFZpZXdwb3J0KCkuZ2V0WCgpLCBldmVudC5jbGllbnRZIC0gdGhpcy5zY2VuZS5nZXRWaWV3cG9ydCgpLmdldFkoKSk7XG4gICAgfVxuXG4gICAgLy8gcHVibGljIG1vdXNlVXBIYW5kbGVyID0gKGV2ZW50OiBNb3VzZUV2ZW50KTogdm9pZCA9PiB7XG4gICAgLy8gICAgIHRoaXMuc3ByaXRlVG9EcmFnID0gbnVsbDtcbiAgICAvLyB9XG5cblxuICAgIHB1YmxpYyBrZXliYW9yZFByZXNzRG93biA9IChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PSBcIktleUFcIiB8fCBldmVudC5jb2RlID09IFwiS2V5U1wiIHx8IGV2ZW50LmNvZGUgPT0gXCJLZXlXXCIgfHwgZXZlbnQuY29kZSA9PSBcIktleURcIikge1xuICAgICAgICAgICAgbGV0IGNvZGUgPSBldmVudC5jb2RlO1xuICAgICAgICAgICAgaWYgKHRoaXMua2V5cy5pbmRleE9mKGNvZGUpID09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlzLnB1c2goY29kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIHB1YmxpYyBrZXliYW9yZFByZXNzSGVsZCA9IChldmVudDogS2V5Ym9hcmRFdmVudCk6IHZvaWQgPT4ge1xuICAgICAgICBpZiAoZXZlbnQuY29kZSA9PSBcIktleUFcIiB8fCBldmVudC5jb2RlID09IFwiS2V5U1wiIHx8IGV2ZW50LmNvZGUgPT0gXCJLZXlXXCIgfHwgZXZlbnQuY29kZSA9PSBcIktleURcIikge1xuICAgICAgICAgICAgbGV0IHZpZXdwb3J0ID0gdGhpcy5zY2VuZS5nZXRWaWV3cG9ydCgpO1xuICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSAwO1xuICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSAwO1xuICAgICAgICAgICAgdGhpcy5rZXlzLmZvckVhY2gobGV0dGVyID0+IHtcblxuICAgICAgICAgICAgICAgIGlmIChsZXR0ZXIgPT0gJ0tleVcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdLZXlQcmVzczogVycpO1xuICAgICAgICAgICAgICAgICAgICB5T2Zmc2V0ICs9IDEwO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09ICdLZXlBJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnS2V5UHJlc3M6IEEnKTtcbiAgICAgICAgICAgICAgICAgICAgeE9mZnNldCAtPSAxMDtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxldHRlciA9PSAnS2V5UycpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0tleVByZXNzOiBTJyk7XG4gICAgICAgICAgICAgICAgICAgIHlPZmZzZXQgLT0gMTA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT0gJ0tleUQnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdLZXlQcmVzczogRCcpO1xuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0ICs9IDEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2aWV3cG9ydC5zZXRQb3NpdGlvbih2aWV3cG9ydC5nZXRYKCkgKyB4T2Zmc2V0LCB2aWV3cG9ydC5nZXRZKCkgKyB5T2Zmc2V0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBrZXliYW9yZFByZXNzVXAgPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpOiB2b2lkID0+IHtcbiAgICAgICAgbGV0IGNvZGUgPSBldmVudC5jb2RlO1xuICAgICAgICB0aGlzLmtleXMuc3BsaWNlKHRoaXMua2V5cy5pbmRleE9mKGNvZGUpLCAxKTtcbiAgICB9XG5cblxufSJdfQ=="}